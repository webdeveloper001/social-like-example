!function(){"use strict";angular.module("app",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngMessages","pascalprecht.translate","tmh.dynamicLocale","login","ui.router","ui.bootstrap.modal","mgcrea.ngStrap"])}(),function(){"use strict";function e(e){function t(t,i){for(var r=t.length,l=r*(r-1)/2,c=i.length,d=0,u=0,g=0,m=0,p=0;r>p;p++){n[p]=new Array(r),a[p]=new Array(r);for(var v=0;r>v;v++)n[p][v]=0,a[p][v]=0;s[p]=t[p].id}for(p=0;c>p;p++)d=s.indexOf(i[p].hs),u=s.indexOf(i[p].ls),d>=0&&u>=0&&(i[p].sel==i[p].hs?n[d][u]++:i[p].sel==i[p].ls&&n[u][d]++,a[d][u]++,a[u][d]++);for(g=0,p=0;r>p;p++)for(v=0;r>v;v++)g+=a[p][v];for(m=g/(4*l),p=0;r>p;p++){for(t[p].Rank=0,g=0,v=0;r>v;v++)t[p].Rank=t[p].Rank+n[p][v],g+=a[p][v];t[p].Rank=t[p].Rank/g,m>g&&(t[p].Rank=t[p].Rank*(g/m))}for(var f=0;r>f;f++)for(v=0;r>v;v++)f!=v&&t[v].Rank>=t[f].Rank&&n[f][v]>n[v][f]&&a[f][v]>=m&&(t[f].Rank=t[v].Rank+.01);o=t,e.answersR=o,e.R=n,e.GP=a,e.A=s}e.A=[];var n=[],a=[],s=[],o=[],i={computeRanking:t};return i}angular.module("app").service("rank",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e,t,n){function a(t){function n(e){return console.log("creating match record was succesful"),e.data}var a={};a.resource=[],a.resource.push(t),l.push.apply(l,t);var s=c+"/_table/matchtable";return e.post(s,t,{headers:{"Content-Type":"multipart/form-data"},body:a}).then(n,i)}function s(n){function a(e){return l=e.data.resource}if(r()&&!n)return t.when(l);var s=c+"/_table/matchtable";return e.get(s).then(a,i)}function o(t){function n(n){function a(e){console.log("deleting records succesful")}return s=c+"/_table/matchtable?filter=hs="+t,e["delete"](s).then(a,i)}for(var a=0;a<l.length;a++)(l[a].ls==t||l[a].hs==t)&&l.splice(a,1);var s=c+"/_table/matchtable?filter=ls="+t;return e["delete"](s).then(n,i)}function i(e){throw e}function r(){return l.length>0}var l=[],c="/api/v2/mysql",d={GetMatchTable:s,postRec:a,deleteRecordsbyAnswer:o};return d}angular.module("app").factory("matchrec",e),e.$inject=["$http","$q","$rootScope"]}(),function(){"use strict";function e(e,t,n,a,s,o,i,r,l,c,d,u,g,m,p){function v(){y(),l.update(c.cCategory.id,["views","answers"],[c.cCategory.views+1,c.canswers.length]),f(),k(),S.tableimage=c.cCategory.imagefile,i.computeRanking(c.canswers,c.cmrecs),console.log("Rank Summary Loaded!")}function f(){if(c.isLoggedIn){m.loadVotesTable().then(function(e){for(var t=0;t<e.length;t++)for(var n=0;n<c.ccatans.length;n++)if(e[t].catans==c.ccatans[n].id){var a=e[t];c.cvotes.push(a)}}),g.loadEditVotesTable().then(function(e){for(var t=0;t<e.length;t++)if(e[t].category==c.cCategory.id){var n=e[t];c.ceditvotes.push(n)}}),c.cmrecs_user=[];for(var e=0;e<c.cmrecs.length;e++)c.cmrecs[e].user==c.user.id&&c.cmrecs_user.push(c.cmrecs[e]);c.cuseractivity_user=[];for(var e=0;e<c.cuseractivity.length;e++)if(c.cuseractivity[e].user==c.user.id){c.userHasRank=!0,c.userActRecId=c.cuseractivity[e].id;break}}}function h(e){n.go("answerDetail",{index:e})}function b(){return c.canswers.length>1?void n.go("match"):void e.getDialog("answersFew")}function w(){return R?void e.getDialog("answersFull"):(c.viewCtn=0,void n.go("addAnswer"))}function y(){c.cCategory={};for(var e=0;e<c.content.length;e++)if(c.content[e].id==t.index){c.cCategory=c.content[e];break}var n=[],s=0;switch(c.cCategory.type){case"Place":s=0;break;case"Person":s=1;break;case"Event":s=2;break;case"Organization":s=3;break;case"Short-Phrase":s=4;break;case"Activity":s=5;break;case"Establishment":s=6}if(n=c.typeSchema[s].fields,c.fields=n,S.fields=c.fields,S.type=c.cCategory.type,c.NhImplied=!1,"Establishment"==c.cCategory.type)for(var e=0;e<c.neighborhoods.length;e++)c.cCategory.title.includes(c.neighborhoods[e])&&(c.NhImplied=!0);if(c.NhImplied)for(var e=0;e<S.fields.length;e++)"cityarea"==S.fields[e].name&&(S.fields[e].isrequired=!1);c.canswers=[],c.ccatans=[],c.B=[];for(var e=0;e<r.length;e++)if(r[e].category==c.cCategory.id)for(var i=0;i<a.length;i++)if(r[e].answer==a[i].id){c.canswers.push(a[i]),c.ccatans.push(r[e]),c.B.push(r[e].id);break}S.answers=c.canswers;for(var e=0;e<S.answers.length;e++)1==e?(S.answers[e].specials="Its Happy Hour!",S.answers[e].style="happy"):(S.answers[e].specials="---",S.answers[e].style="");c.cmrecs=[];for(var e=0;e<o.length;e++)o[e].category==c.cCategory.id&&c.cmrecs.push(o[e]);c.cedits=[];for(var e=0;e<u.length;e++)if(u[e].category==c.cCategory.id){var l=u[e];c.cedits.push(l)}c.cuseractivity=[];for(var e=0;e<p.length;e++)if(p[e].category==c.cCategory.id){var d=p[e];c.cuseractivity.push(d)}S.numContributors=c.cuseractivity.length}function k(){R=c.canswers.length>=20?!0:!1}function x(){c.isLoggedIn?c.cmrecs_user.length>0?(S.selOverall="",S.selPersonal="active",S.numContributors=1,i.computeRanking(c.canswers,c.cmrecs_user)):e.getDialog("noPersonalRank"):e.getDialog("notLoggedIn")}function A(){S.selOverall="active",S.selPersonal="",S.numContributors=c.cuseractivity.length,i.computeRanking(c.canswers,c.cmrecs)}function C(){c.$emit("closeRank")}function $(){c.addInfoMsgAck=!0,S.addInfoMsgAck=!0}var S=this;S.title="rankSummary",S.addAnswerDisabled="",S.ranking=c.title,S.answerDetail=h,S.addAnswer=w,S.goRank=b,S.closeRank=C,S.rankOverall=A,S.rankPersonal=x,S.closeAddInfoMsg=$,S.selOverall="active",S.selPersonal="";c.cvotes=[],c.ceditvotes=[],c.cmrecs_user=[],c.catansrecs=r;var R=!1;c.userHasRank=!1,c.userActRecId=0,S.addInfoMsgAck=c.addInfoMsgAck?c.addInfoMsgAck:!1,c.$on("$stateChangeSuccess",function(e,t,n,a,s){c.previousState=a.name}),c.showR&&v()}angular.module("app").controller("rankSummary",e),e.$inject=["dialog","$stateParams","$state","answers","answer","mrecs","rank","catansrecs","table","$rootScope","$modal","edits","editvote","votes","useractivities"]}(),function(){"use strict";function e(e,t,n,a,s,o,i,r){function l(){p(),v(),u()}function c(e){if(!s.isLoggedIn)return void t.getDialog("notLoggedIn");var n={};n.user=s.user.id,n.hs=b.answer1.id,n.ls=b.answer2.id,n.category=s.cCategory.id,n.timestmp=Date.now(),1==e&&(n.sel=b.answer1.id),2==e&&(n.sel=b.answer2.id),R.push(n),s.cmrecs_user.push(n),$++,$>=A&&($=0),P=!0,u()}function d(){$++,$>=A&&($=0),u()}function u(){if(b.GP=s.cmrecs_user.length,b.Tot=A,s.cmrecs_user.length>=A)return t.getDialog(P?"goodJobRankComplete":"rankComplete"),void g();if(S)for(var e=w[C[$]],n=y[C[$]],a=!1,o=0;o<s.cmrecs_user.length;o++)if(s.cmrecs_user[o].hs==k[e].id&&s.cmrecs_user[o].ls==k[n].id){a=!0;break}a&&d(),b.answer1=k[w[C[$]]],b.answer2=k[y[C[$]]],f()}function g(){e.go("rankSummary",{index:b.table.id})}function m(t){1===t?e.go("answerDetail",{index:b.answer1.id}):e.go("answerDetail",{index:b.answer2.id})}function p(){w=[],y=[];for(var e=0;x-1>=e;e++)for(var t=e+1;x-1>=t;t++)w.push(e),y.push(t)}function v(){function e(e){var t,n,a=e.length;if(a)for(;--a;)n=Math.floor(Math.random()*(a+1)),t=e[n],e[n]=e[a],e[a]=t;return e}for(var t=0;A>t;t++)C[t]=t;C=e(C)}function f(){b.fields=s.fields}function h(){s.$emit("closeRank")}var b=this;b.title="match",b.header="table"+s.cCategory.id+".header",b.body="table"+s.cCategory.id+".body",b.ranking=s.title;var w=[],y=[],k=s.canswers,x=k.length,A=x*(x-1)/2,C=[],$=0,S=s.cmrecs_user.length>0,R=[],P=!1;b.table=s.cCategory,b.type=s.cCategory.type,b.answer1,b.answer2,b.selectAnswer=c,b.rankSummary=g,b.skipMatch=d,b.answerDetail=m,b.closeRank=h,s.$on("$stateChangeSuccess",function(e,t,n,a,o){s.previousState=a.name}),s.$on("$stateChangeStart",function(e,t,n,a,i){"match"==a.name&&R.length>0&&(o.postRec(R),s.userHasRank?r.patchRec(s.userActRecId):r.postRec(),R=[])}),s.showR&&l()}angular.module("app").controller("match",e),e.$inject=["$state","dialog","$location","answer","$rootScope","matchrec","$modal","useractivity"]}(),function(){"use strict";function e(e,t,n,a,s,o){function i(){r(),console.log("editRanking page Loaded!")}function r(){t.cCategory={};for(var e=0;e<t.content.length;e++)if(t.content[e].id==a.index){t.cCategory=t.content[e];break}g.rankTitle=t.cCategory.title,g.tags=t.cCategory.tags,g.keywords=t.cCategory.keywords,g.type=t.cCategory.type,g.question=t.cCategory.question}function l(){t.$emit("closeRank")}function c(){var e=JSON.parse(JSON.stringify(t.cCategory)),n=[],a=[];e.title!=g.rankTitle&&(n.push("title"),a.push(g.rankTitle)),e.tags!=g.tags&&(n.push("tags"),a.push(g.tags)),e.keywords!=g.keywords&&(n.push("keywords"),a.push(g.keywords)),e.type!=g.type&&(n.push("type"),a.push(g.type)),e.question!=g.question&&(n.push("question"),a.push(g.question)),s.update(e.id,n,a)}function d(){o.deleteRank(u)}function u(){s.deleteTable(t.cCategory.id)}var g=this;g.title="editRanking",g.ranking=t.title,g.closeRank=l,g.goEdit=c,g.goDelete=d,g.typeList=["Person","Establishment","Place","Activity","Short-Phrase","Organization","Event"],i()}angular.module("app").controller("editRanking",e),e.$inject=["$location","$rootScope","$state","$stateParams","table","dialog"]}(),function(){"use strict";function e(e,t,n,a,s){function o(t){return e.post("/api/v2/user/session",t).then(function(t){e.defaults.headers.common["X-DreamFactory-Session-Token"]=t.data.session_token,n.session_token=t.data.session_token,a.user=t.data;try{window.localStorage.user=JSON.stringify(t.data)}catch(s){}})}function i(){var e=t.defer(),n=s+"/api/v2/user/session?service=facebook";return e.resolve({url:n}),e.promise}function r(t){function s(t){console.log("oauth results",t),e.defaults.headers.common["X-DreamFactory-Session-Token"]=t.data.session_token,n.session_token=t.data.session_token,a.user=t.data;try{window.localStorage.user=JSON.stringify(t.data)}catch(s){}}return e.post("/api/v2/user/session?oauth_callback=true&service=facebook&"+t).then(s,c)}function l(){return e["delete"]("/api/v2/user/session").then(function(t){delete e.defaults.headers.common["X-DreamFactory-Session-Token"],n.remove("session_token"),delete a.user,a.isLoggedIn=!1;try{window.localStorage.removeItem("user")}catch(s){}})}function c(e){throw console.log("error",e),e}function d(t){return console.log("options",t),e.post("/api/v2/user/register?login=true",t).then(function(e){console.log("register result",e)},function(e){console.log("error",e)})}var u={initiate:o,loginWithFacebook:i,oauthWithFacebook:r,register:d,logout:l};return u}angular.module("app").factory("login",e),e.$inject=["$http","$q","$cookies","$rootScope","INSTANCE_URL"]}(),function(){"use strict";angular.module("login",["ngResource","ngCookies","ui.router"]).run(["$rootScope",function(e){try{e.user=JSON.parse(window.localStorage.user),e.user&&(e.isLoggedIn=!0)}catch(t){}}]).config(function(){})}(),function(){"use strict";function e(e,t,n,a){function s(e){return e.url.indexOf("/api/v2")>-1&&(e.url=a+e.url),"post"===e.method.toLowerCase()&&e.url.indexOf("/api/v2/user/session")>-1&&delete e.headers["X-DreamFactory-Session-Token"],e}function o(n){return console.log("result",n),302==n.status?(console.log("result",n),e.path("/login"),t.reject(n)):((401===n.status||403===n.status&&n.data.error.message.indexOf("token")>-1)&&e.path("/login"),t.reject(n))}var i={request:s,responseError:o};return i}angular.module("login").factory("httpInterceptor",e),e.$inject=["$location","$q","$injector","INSTANCE_URL"]}(),function(){"use strict";function e(e,t,n){function a(){t.isLoggedIn=!1}function s(){console.log("register",s),n.register({email:i.username,password:i.password,first_name:i.firstName||"Address",last_name:i.lastName||"Book"}).then(function(){e.path("/login")},function(e){i.message=e.Message,console.log("Error: ",e)})}function o(){e.path("/login")}var i=this;i.title="register",i.username="",i.password="",i.confirm="",i.firstName="",i.lastName="",i.message="",i.register=s,i.signIn=o,a()}angular.module("login").controller("register",e),e.$inject=["$location","$rootScope","login"]}(),function(){"use strict";function e(e,t,n,a,s){function o(){var t=location.search,s=t.lastIndexOf("?");s>=0&&(t=t.substr(s+1)),t&&a.oauthWithFacebook(t).then(function(t){n.isLoggedIn=!0,console.log("isLoggedIn",n.isLoggedIn),e.path("/")}),console.log("vm.code",d.code),n.isLoggedIn=!1}function i(){console.log("submit"),a.initiate({email:d.username,password:d.password}).then(function(){n.isLoggedIn=!0,console.log("isLoggedIn",n.isLoggedIn),e.path("/")})}function r(){a.loginWithFacebook().then(function(e){t.location=e.url})}function l(){e.path("/register")}function c(){s.getDialog("whyFacebook")}var d=this;d.title="login",d.username="",d.password="",d.code="",d.submit=i,d.register=l,d.redirectForFacebook=r,d.whyFacebookDialog=c,o()}angular.module("login").controller("login",e),e.$inject=["$location","$window","$rootScope","login","dialog"]}(),function(){"use strict";function e(e,t,n){function a(n){function a(e){return i=e.data.resource}if(s()&&!n)return t.when(i);var l=r;return e.get(l).then(a,o)}function s(){return i.length>0}function o(e){throw e}var i=[],r="/api/v2/mysql/_table/cities",l={getCities:a};return l}angular.module("app").factory("city",e),e.$inject=["$http","$q","$rootScope"]}(),function(){"use strict";function e(e,t,n,a,s,o){function i(){console.log("Navbar Loaded!")}function r(){s.go("about")}function l(){s.go("admin")}function c(){s.go("customer")}function d(){e.path("/login")}function u(){a.logout().then(function(){f.user="",f.isLoggedIn=!1,e.path("/")})}function g(){openModal("#selectCityModal")}function m(){n.cities||o.getCities().then(function(e){n.cities=e,p()})}function p(){function e(e){var n=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);t.geocode({latLng:n},function(e,t){if(t==google.maps.GeocoderStatus.OK)if(e[0]){{var n=e[0].formatted_address,a=n.split(","),s=a.length;a[s-1],a[s-2]}o=a[s-3],v(o)}else v();else v()})}var t;t=new google.maps.Geocoder,navigator.geolocation&&navigator.geolocation?navigator.geolocation.getCurrentPosition(e):v()}function v(e){var t=!1,a={};angular.forEach(n.cities,function(n){n.name==e.trim()&&n.is_active&&(t=!0,a=n)}),0==t?openModal("#selectCityModal"):(n.selectedCity=a,n.$digest())}var f=this;f.title="navbar",f.user=n.user,f.isLoggedIn=n.isLoggedIn?n.isLoggedIn:!1,f.logout=u,f.goToLogin=d,f.gotoAbout=r,f.gotoAdmin=l,f.gotoCustomer=c,f.openCitySelection=g,i(),m()}angular.module("app").controller("navbar",e),e.$inject=["$location","$translate","$rootScope","login","$state","city"]}(),function(){"use strict";function e(e,t,n,a){function s(){a(o,1e3),console.log("Layout Loaded!")}function o(){r.isLoading=!1}function i(){t.sval=r.val,t.$emit("searchRank")}var r=this;r.title="layout",r.header="",r.searchRank=i,r.isLoading=t.canswers?!1:!0,s(),t.selectCity=function(e){t.selectedCity=e,closeModal("#selectCityModal")}}angular.module("app").controller("layout",e),e.$inject=["$location","$rootScope","$translate","$timeout"]}(),function(){"use strict";function e(e){function t(){}var n={getData:t};return n}angular.module("app").factory("datacontext",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t,n){function a(){console.log("About page Loaded!")}function s(){n.go("content")}var o=this;o.title="about",o.goBack=s,a()}angular.module("app").controller("about",e),e.$inject=["$location","$rootScope","$state"]}(),function(){"use strict";function e(e,t,n){function a(n){function a(e){return p=e.data.resource}if(c()&&!n)return t.when(p);var s=f;return e.get(s).then(a,g)}function s(n,a){function s(e){return m=e.data}if(u(n)&&!a)return t.when(m);var o=f+"/"+n;return e.get(o).then(s,g)}function o(n,a){function s(e){return v=e.data.resource}if(d()&&!a)return t.when(v);var o=f+"/?filter=answer="+n;return e.get(o).then(s,g)}function i(t){function n(e){var n=t;return n.id=e.data.resource[0].id,p.length>0&&p.push(n),v.length>0&&v.push(n),console.log("result",e),e.data}var a=f,s=[];return s.push(t),e.post(a,s,{headers:{"Content-Type":"multipart/form-data"},body:s}).then(n,g)}function r(t){function n(e){return console.log("updating special succesful"),e.data}var a={};a.resource=[],a.resource.push(t);var s=f;if(p.length>0)for(var o=0;o<p.length;o++)p[o].id==t.id&&(p[o]=t);if(v.length>0)for(var o=0;o<v.length;o++)v[o].id==t.id&&(v[o]=t);return e.patch(s,a,{headers:{"Content-Type":"multipart/form-data"},body:a}).then(n,g)}function l(t){function n(e){return console.log("Deleting special was succesful"),e.data}var a={};a.resource=[];var s={};s.id=t,a.resource.push(s);var o=f+"/"+t;if(p.length>0){var i=p.map(function(e){return e.id}).indexOf(t);i>-1&&p.splice(i,1)}if(v.length>0){var i=v.map(function(e){return e.id}).indexOf(t);i>-1&&v.splice(i,1)}return e["delete"](o,s,{headers:{"Content-Type":"multipart/form-data"},body:a}).then(n,g)}function c(){return p.length>0}function d(){return v.length>0}function u(e){return m&&m.id==e}function g(e){throw e}var m,p=[],v=[],f="/api/v2/mysql/_table/specials",h={getSpecials:a,getSpecial:s,addSpecial:i,updateSpecial:r,deleteSpecial:l,getSpecialsbyAnswer:o};return h}angular.module("app").factory("special",e),e.$inject=["$http","$q","$rootScope"]}(),function(){"use strict";function e(e){function t(e){if("onetime"==e.freq){n(e,"stime"),n(e,"etime");var t=new Date(e.sdate),a=t.toString();e.sdate=a.substring(0,15),t=new Date(e.edate),a=t.toString(),e.edate=a.substring(0,15)}"weekly"==e.freq&&(n(e,"stime2"),n(e,"etime2"))}function n(e,t){var n="";switch(t){case"stime":n=e.stime;break;case"etime":n=e.etime;break;case"stime2":n=e.stime2;break;case"etime2":n=e.etime2}if(null!=n&&void 0!=n&&(n.includes("00:00")||n.includes("30:00"))){n=n.replace("00:00","00"),n=n.replace("30:00","30");var a=parseInt(n.substring(0,2))<12;if(n+=a?" AM":" PM",!a){var s=parseInt(n.substring(0,2))-12,o="";o=10>s?"0"+s.toString():s.toString(),n=n.replace(n.substring(0,2),o)}}switch(t){case"stime":e.stime=n;break;case"etime":e.etime=n;break;case"stime2":e.stime2=n;break;case"etime2":e.etime2=n}}var a={formatdatetime:t,formatTime:n};return a}angular.module("app").service("datetime",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e,t,n,a,s){function o(){s.getSpecialsbyAnswer(t.cust.canswer).then(function(e){t.cust.specials=e,i()}),console.log("Specials Page loaded!")}function i(){c.specialsList=t.cust.specials}function r(){t.specialmode="add",n.go("editspecial")}function l(e){t.cspecial=e,t.specialmode="edit",n.go("editspecial")}var c=this;c.title="specials",c.addSpecial=r,c.selSpecial=l,c.specialsList=[],t.cust.specials=[],o()}angular.module("app").controller("specials",e),e.$inject=["$location","$rootScope","$state","dialog","special"]}(),function(){"use strict";function e(e,t,n){function a(){console.log("photogallery page Loaded!")}var s=this;s.title="photogallery",a()}angular.module("app").controller("photogallery",e),e.$inject=["$location","$rootScope","$state"]}(),function(){"use strict";function e(e,t,n){function a(){console.log("mainphoto page Loaded!")}var s=this;s.title="mainphoto",a()}angular.module("app").controller("mainphoto",e),e.$inject=["$location","$rootScope","$state"]}(),function(){"use strict";function e(e,t,n,a,s,o){function i(){"edit"==t.specialmode&&(p.sp=JSON.parse(JSON.stringify(t.cspecial)),o.formatdatetime(p.sp),p.isEdit=!0,"onetime"==p.sp.freq&&l(1),"weekly"==p.sp.freq&&l(2),p.sp.bc=p.sp.bc,p.sp.fc=p.sp.fc),"add"==t.specialmode&&(p["char"]=25,p.sp.fc="hsl(0, 100%, 0%)",p.sp.bc="hsl(0, 0%, 100%)",l(1)),m(),console.log("editspecial page Loaded!")}function r(){p["char"]=25-p.sp.stitle.length}function l(e){1==e&&(p.weekly=!1,p.onetime=!0,p.sp.freq="onetime"),2==e&&(p.weekly=!0,p.onetime=!1,p.sp.freq="weekly")}function c(){v=p.sp,v.name="Your business",v.answer=t.cust.canswer,v.freq=p.onetime?"onetime":"weekly",a.createSpecialPreview(v,d)}function d(){0==p.isEdit?("onetime"==p.sp.freq&&(v.stime2=null,v.etime2=null),"weekly"==p.sp.freq&&(v.stime=null,v.sdate=null,v.etime=null,v.edate=null),s.addSpecial(v).then()):s.updateSpecial(v),n.go("specials")}function u(){s.deleteSpecial(p.sp.id),n.go("specials")}function g(){n.go("specials")}function m(){p.timeDD=["7:00 AM","7:30 AM","8:00 AM","8:30 AM","9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM","3:30 PM","4:00 PM","4:30 PM","5:00 PM","5:30 PM","6:00 PM","6:30 PM","7:00 PM","7:30 PM","8:00 PM","8:30 PM","9:00 PM","9:30 PM","10:00 PM","10:30 PM","11:00 PM","11:30 PM","12:00 AM","12:30 AM","1:00 AM","1:30 AM","2:00 AM","2:30 AM","3:00 AM","3:30 AM","4:00 AM","4:30 AM","5:00 AM","5:30 AM","6:00 AM","6:30 AM"]}var p=this;p.title="editspecial",p.sp={};var v={};p.displayCharLength=r,p.frequencySel=l,p.showPreview=c,p.deleteSpecial=u,p.goBack=g,p.isEdit=!1,i()}angular.module("app").controller("editspecial",e),e.$inject=["$location","$rootScope","$state","dialog","special","datetime"]}(),function(){"use strict";function e(e,t,n,a,s,o){function i(){a.getAnswerbyCustomer(t.cust.id).then(function(e){t.custans=e.resource,console.log("Customer-Answer records: ",t.custans),r()}),console.log("customer page Loaded!")}function r(){m.answers=t.custans}function l(e){t.cust.canswer=e.id,console.log("current answer ",e.id,e.name)}function c(){void 0==t.cust.canswer?s.getDialog("selectBusiness"):n.go("mainphoto")}function d(){void 0==t.cust.canswer?s.getDialog("selectBusiness"):n.go("specials")}function u(){void 0==t.cust.canswer?s.getDialog("selectBusiness"):n.go("photogallery")}function g(){n.go("content")}var m=this;m.title="customer",m.selMainPhoto="active",m.selSpecials="",m.selPhotoGallery="",m.goBack=g,m.loadMainPhoto=c,m.loadSpecials=d,m.loadPhotoGallery=u,m.selAnswer=l,t.cust={},t.cust.id=1,i()}angular.module("app").controller("customer",e),e.$inject=["$location","$rootScope","$state","answer","dialog","special"]}(),function(){"use strict";function e(e,t,n){function a(n){function a(e){return c=e.data.resource}if(r()&&!n)return t.when(c);var s=d;return e.get(s).then(a,l)}function s(t){function n(e){var n=t;return n.id=e.data.resource[0].id,c.push(n),console.log("result",e),e.data}var a=d,s=[];return s.push(t),e.post(a,s,{headers:{"Content-Type":"multipart/form-data"},body:s}).then(n,l)}function o(t){function n(e){return console.log("Deleting answer was succesful"),e.data}var a={};a.resource=[];var s={};s.id=t,a.resource.push(s);var o=d+"/"+t,i=c.map(function(e){return e.id}).indexOf(t);return i>-1&&c.splice(i,1),e["delete"](o,s,{headers:{"Content-Type":"multipart/form-data"},body:a}).then(n,l)}function i(t,a,s){function o(e){return console.log("updating ranking record succesful"),e.data}var i={};i.resource=[];var r={};r.id=t;for(var c=0;c<a.length;c++)switch(a[c]){case"views":r.views=s[c];break;case"answers":r.answers=s[c];break;case"title":r.title=s[c];break;case"tags":r.tags=s[c];break;case"keywords":r.keywords=s[c];break;case"type":r.type=s[c];break;case"question":r.question=s[c]}i.resource.push(r);for(var u=d,g=0,c=0;c<n.content.length;c++)if(n.content[c].id==t){g=c;break}for(var c=0;c<a.length;c++)switch(a[c]){case"answers":n.content[g].answers=s[c];break;case"views":n.content[g].views=s[c];break;case"title":n.content[g].title=s[c];break;case"tags":n.content[g].tags=s[c];break;case"keywords":n.content[g].keywords=s[c];break;case"type":n.content[g].type=s[c];break;case"question":n.content[g].question=s[c]}return e.patch(u,i,{headers:{"Content-Type":"multipart/form-data"},body:i}).then(o,l)}function r(){return c.length>0}function l(e){throw e}var c=[],d="/api/v2/mysql/_table/ranking",u={getTables:a,update:i,addTable:s,deleteTable:o};return u}angular.module("app").factory("table",e),e.$inject=["$http","$q","$rootScope"]}(),function(){"use strict";function e(e,t,n,a,s,o,i,r,l,c){function d(){e.content={},e.viewCtn=0,h(),e.content=i,e.specials=c,u(),n.get("../../../assets/fields.json").success(function(t){e.typeSchema=t,console.log("Fields Loaded!")}),n.get("../../../assets/dialogs.json").success(function(t){e.dialogs=t,console.log("Dialogs Loaded!")}),t.go("rankSummary",{index:1})}function u(){x.searchArray=[],x.empty=[],x.cTags={},e.searchStr=[];for(var t=0;t<e.content.length;t++)e.content[t].showR=!1,e.content[t].showT=!0,e.searchStr[t]=e.content[t].tags+" "+e.content[t].title;e.neighborhoods=["Downtown","La Jolla","Pacific Beach","HillCrest","University Heights","Old Town","Del Mar","Ocean Beach","North Park","Mission Hills","Barrio Logan","City Heights","Clairemont","Mira Mesa","Point Loma","South Park","Scripps Ranch","Mission Valley","Kensington"],e.districts=["Columbia","Core","Cortez Hill","East Village","Gaslamp Quarter","Horton Plaza","Little Italy","Marina","Seaport Village"]}function g(){t.go("rankSummary",{index:e.cCategory.id})}function m(t){e.title=t.title,e.isDowntown=t.title.includes("downtown");for(var n=t.title.length,a=0,s=0,o=0;n>o;o++)if(" "==t.title[o]&&a++,3==a){s=o;break}e.header=t.title.substring(s,n-1)}function p(n,a){m(n);for(var s=[],o=0;o<x.resultsT.length;o++)a>o&&(s[o]=x.resultsT[o]),o>a&&x.resultsB.push(x.resultsT[o]);x.resultsT=s,x.showR=!0,e.showR=!0,C?t.go("editRanking",{index:n.id}):t.go("rankSummary",{index:n.id})}function v(e,t){var n=x.resultsT.length+1+t;b(),p(x.resultsT[n],n)}function f(){var t=!1;if(x.showR=!1,e.showR=!1,x.resultsT=[],x.resultsB=[],x.val.length>=3){for(var n=x.val.split(" "),a=0;a<e.content.length;a++){for(var s=!0,o=0;o<n.length;o++){var i=n[o].charAt(0).toUpperCase()+n[o].slice(1),l=n[o].charAt(0).toLowerCase()+n[o].slice(1);s=s&&(e.searchStr[a].includes(n[o])||e.searchStr[a].includes(n[o].toUpperCase())||e.searchStr[a].includes(i)||e.searchStr[a].includes(l))}s&&x.resultsT.push(e.content[a])}t=x.val.length>=A?!0:!1,x.resultsT.length<=5&&x.val.length%3==0&&t&&r.postQuery(x.val,x.resultsT.length),A=x.val.length}else x.resultsT=[],x.resultsB=[];e.viewNum=999}function h(){e.estAnswers=[],e.estNames=[];for(var t=0;t<o.length;t++)"Establishment"==o[t].type&&(e.estNames.push(o[t].name),e.estAnswers.push(o[t]))}function b(){x.showR=!1,e.showR=!1,f()}function w(){C=!0,x.selEditRank="active",x.selViewRank="",console.log("mode -- ",C)}function y(){C=!1,x.selEditRank="",x.selViewRank="active",console.log("mode -- ",C)}function k(){console.log("apply Rule")}var x=this;x.title="content",x.goBack=g,x.rankSelT=p,x.rankSelB=v,x.switchArray=f,x.viewRank=y,x.editRank=w,x.applyRule=k,x.content=[],x.emptyspace="",x.isAdmin=!1,e.$on("newCategory",function(e){console.log("trigger"),u()}),e.$on("closeRank",function(e){console.log("trigger closeRank"),b()}),e.viewNum=0,e.viewCtn=0;var A=0,C=!1;window.onload=function(){},d()}angular.module("app").controller("content",e),e.$inject=["$rootScope","$state","$http","$stateParams","$scope","answers","rankings","query","table","specials"]}(),function(){"use strict";angular.module("app").filter("orderObjectBy",function(){return function(e,t,n){var a=[];return angular.forEach(e,function(e){a.push(e)}),a.sort(function(e,n){return e[t]>n[t]?1:-1}),n&&a.reverse(),a}}).filter("objectLength",function(){return function(e){return e?Object.keys(e).length:0}}).filter("searchObject",function(){return function(e,t,n){function a(e,t){return e=(""+e).toLowerCase(),t=(""+t).toLowerCase(),-1!==e.indexOf(t)}if(!e)return!1;var s=[];if(!t){for(var o=Object.keys(e),i=0,r=o.length;r>i;i++)s.push(e[o[i]]);return s}return angular.forEach(e,function(e){if(n&&""!=n)e[n]&&a(e[n],t)&&s.push(e);else for(var o=Object.keys(e),i=0,r=o.length;r>i;i++)if(a(e[o[i]],t)){s.push(e);break}}),s}})}(),angular.module("app").directive("fileModel",["$parse",function(e){"use strict";return{restrict:"A",link:function(t,n,a){var s=e(a.fileModel),o=s.assign;n.bind("change",function(){t.$apply(function(){o(t,n[0].files[0])})})}}}]),function(){"use strict";function e(e,t,n){function a(a){function s(e){return c=e.data.resource}if(r()&&!a)return t.when(c);var o=d+"/_table/votetable/?filter=user="+n.user.id;return e.get(o).then(s,l)}function s(t,a){function s(e){var t=i;return t.id=e.data.resource[0].id,c.push(t),n.cvotes.push(t),console.log("Creating new voting record was succesful"),e.data}var o={};o.resource=[];var i={};i.user=n.user.id,i.catans=t,i.vote=a,i.timestmp=Date.now(),o.resource.push(i);var r=d+"/_table/votetable";return e.post(r,o,{headers:{"Content-Type":"multipart/form-data"},body:o}).then(s,l)}function o(t,n){function a(e){return console.log("Updating vote record was succesful"),e.data}var s={};s.resource=[];var o={};o.id=t,o.vote=n,o.timestmp=Date.now(),s.resource.push(o);var i=d+"/_table/votetable",r=c.map(function(e){return e.id}).indexOf(t);return c[r].vote=n,c[r].timestmp=o.timestmp,e.patch(i,s,{headers:{"Content-Type":"multipart/form-data"},body:s}).then(a,l)}function i(t){function n(e){return console.log("Deleting vote records was succesful"),e.data}for(var a=0;a<c.length;a++)c[a].answer==t&&c.splice(a,1);var s=d+"/_table/votetable?filter=answer="+t;return e["delete"](s).then(n,l)}function r(e){return c.length>0}function l(e){throw e}var c=[],d="/api/v2/mysql",u={loadVotesTable:a,patchRec:o,postRec:s,deleteVotesbyAnswer:i};return u}angular.module("app").factory("votes",e),e.$inject=["$http","$q","$rootScope"]}(),function(){"use strict";function e(e,t,n){function a(n){function a(e){return l=e.data.resource}if(i()&&!n)return t.when(l);var s=c;return e.get(s).then(a,r)}function s(){function t(e){return console.log("creating useractivity record was succesful"),e.data}var a={};a.user=n.user.id,a.category=n.cCategory.id,a.timestmp=Date.now();var s={};s.resource=[],s.resource.push(a),l.push(a);var o=c;return e.post(o,s,{headers:{"Content-Type":"multipart/form-data"},body:s}).then(t,r)}function o(t){function n(e){return console.log("Updating useractivity record was succesful"),e.data}var a={};a.resource=[];var s={};s.id=t,s.timestmp=Date.now(),a.resource.push(s);var o=c;return e.patch(o,a,{headers:{"Content-Type":"multipart/form-data"},body:a}).then(n,r)}function i(){return l.length>0}function r(e){throw e}var l=[],c="/api/v2/mysql/_table/useractivity",d={getAllUserActivity:a,postRec:s,patchRec:o};return d}angular.module("app").factory("useractivity",e),e.$inject=["$http","$q","$rootScope"]}(),function(){"use strict";function e(e,t){function n(n){function a(e){return r=e.data.resource}if(s()&&!n)return t.when(r);var i=l;return e.get(i).then(a,o)}function a(t,n){function a(e){return i=e.data}var s=l+"/?fields=field&filter=tableid="+t;return e.get(s).then(a,o)}function s(){return r.length>0}function o(e){throw e}var i,r=[],l="/api/v2/mysql/_table/tablefield",c={getAllTableFields:n,getTableFields:a};return c}angular.module("app").factory("tablefield",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t){function n(e,t,n){function i(e){return console.log("query succeded"),o=e,s(o)}function r(e){console.log("image query failed")}var l=a(e,t,n);return l.then(i,r)}function a(n,a,s){for(var o="",i="https://www.googleapis.com/customsearch/v1?",r="&cx=000139851817949790257%3Aqwkdgi2q2ew",l="&key=AIzaSyBr143lDEROCrUWdKvqPQmhQ5BoFo13oSE",c="&num=10&searchType=image&fileType=jpg%2C+png%2C+bmp&imgType=photo&imgSize=large&filter=1",d="",u="",g="",m="",p=t.cCategory.keywords,v=[],f=0;f<n.length;f++)"edit"==s?v[f]=n[f].cval:"add"==s&&(v[f]=n[f].val);switch(n.length){case 1:v[0]&&(d=v[0]);break;case 2:v[0]&&(d=v[0]),v[1]&&(u=v[1]);break;case 3:v[0]&&(d=v[0]),v[1]&&(u=v[1]),v[2]&&(g=v[2]);break;case 4:v[0]&&(d=v[0]),v[1]&&(u=v[1]),v[2]&&(g=v[2]),v[3]&&(m=v[3])}switch(a){case 1:o="q="+d+" "+p;break;case 2:o="q="+d+" "+u+" "+g+" "+m+" "+p;break;case 3:o="q="+d+" "+g+" "+m+" "+p;break;case 4:o="q="+d+" "+u+" "+p}var h=i+o+r+c+l;return console.log("url",h),e.get(h)}function s(e){for(var t=[],n=!1,a=!1,s=0,o=0,r=0,l=0;i>l;l++)if(n=!1,a=!1,o=e.data.items[l].image.height,r=e.data.items[l].image.width,r>o&&1.8>r/o&&(n=!0),s=e.data.items[l].link.length,("g"==e.data.items[l].link[s-1]||"p"==e.data.items[l].link[s-1])&&(a=!0),n&&a){var c=e.data.items[l].link;t.push(c)}return t}var o=[],i=10,r={imageSearch:a,getImageLinks:n,filterImageResults:s};return r}angular.module("app").factory("image",e),e.$inject=["$http","$rootScope"]}(),function(){"use strict";function e(e,t,n){function a(t,a){function i(e){return console.log("creating flag answer record was succesful"),e.data}var r={};r.user=n.user.id,r.answer=t,r.flag=a,r.timestmp=Date.now();var l={};l.resource=[],
l.resource.push(r);var c=o;return e.post(c,l,{headers:{"Content-Type":"multipart/form-data"},body:l}).then(i,s)}function s(e){throw e}var o="/api/v2/mysql/_table/flagtable",i={flagAnswer:a};return i}angular.module("app").factory("flag",e),e.$inject=["$http","$q","$rootScope"]}(),function(){"use strict";function e(e,t,n){this.uploadFileToUrl=function(t,n){var a="/api/v2/files/images/"+t.name;return e.post(a,t,{headers:{"Content-Type":"multipart/form-data"}}).success(function(e){console.log("Uploading file was succesful")}).error(function(e){console.log("There was a problem uploading your file")})}}angular.module("app").service("fileupload",e),e.$inject=["$http","$cookies","APP_API_KEY"]}(),function(){"use strict";function e(e,t){function n(t){function n(e){return console.log("result",e),e.data}console.log("file",t);var a=o+"/"+t.name;return e.post(a,t,{headers:{"Content-Type":"multipart/form-data"}}).then(n,s)}function a(n){function a(e){return e.data}var i=o+"/"+encodeURIComponent(n);return e.get(i,{params:{api_key:t}}).then(a,s)}function s(e){throw console.log("Error: ",e),e}var o="/api/v2/files/images",i={uploadFile:n,getFile:a};return i}angular.module("app").factory("file",e),e.$inject=["$http","APP_API_KEY"]}(),function(){"use strict";function e(e,t,n){function a(a){function s(e){return d=e.data.resource}if(l()&&!a)return t.when(d);var o=u+"/_table/editvotetable/?filter=user="+n.user.id;return e.get(o).then(s,c)}function s(t){function a(e){for(var a={},s=0;s<e.data.resource.length;s++)a=t[s],a.id=e.data.resource[s].id,d.push(a),n.ceditvotes.push(a);return console.log("Creating new voting record for edit was succesful"),e.data}var s={};s.resource=[],s.resource.push(t);var o=u+"/_table/editvotetable";return e.post(o,t,{headers:{"Content-Type":"multipart/form-data"},body:t}).then(a,c)}function o(t,n){function a(e){return console.log("Updating vote record for edit was succesful"),e.data}var s={};s.resource=[];var o={};o.id=t,o.vote=n,o.timestmp=Date.now(),s.resource.push(o);var i=u+"/_table/editvotetable",r=d.map(function(e){return e.id}).indexOf(t);return d[r].vote=n,d[r].timestmp=o.timestmp,e.patch(i,s,{headers:{"Content-Type":"multipart/form-data"},body:s}).then(a,c)}function i(t){function n(e){return console.log("Deleting edit vote records for answer was succesful"),e.data}for(var a=0;a<d.length;a++)d[a].answer==t&&d.splice(a,1);var s=u+"/_table/editvotetable?filter=answer="+t;return e["delete"](s).then(n,c)}function r(t){function n(e){return console.log("Deleting edit vote records for answer was succesful"),e.data}for(var a=0;a<d.length;a++)d[a].edit==t&&d.splice(a,1);var s=u+"/_table/editvotetable?filter=edit="+t;return e["delete"](s).then(n,c)}function l(e){return d.length>0}function c(e){throw e}var d=[],u="/api/v2/mysql",g={loadEditVotesTable:a,patchEditVoteRec:o,postEditVoteRec:s,deleteEditVotes:r,deleteEditVotesbyAnswer:i};return g}angular.module("app").factory("editvote",e),e.$inject=["$http","$q","$rootScope"]}(),function(){"use strict";function e(e,t,n){function a(n){function a(e){return d=e.data.resource}if(l()&&!n)return t.when(d);var s=u;return e.get(s).then(a,c)}function s(t){function a(e){var a=t;return a.id=e.data.resource[0].id,d.push(a),n.cedits.push(a),console.log("Adding new Edit succesful",e),e.data}var s=u,o=[];return o.push(t),e.post(s,o,{headers:{"Content-Type":"multipart/form-data"},body:o}).then(a,c)}function o(t,n,a){function s(e){return console.log("updating edit vote counts succesful"),e.data}var o={};o.resource=[];var i={};i.id=t,i.upV=n,i.downV=a,o.resource.push(i);var r=u;return e.patch(r,o,{headers:{"Content-Type":"multipart/form-data"},body:o}).then(s,c)}function i(t){function n(e){return console.log("Deleting answer was succesful"),e.data}var a={};a.resource=[];var s={};s.id=t,a.resource.push(s);var o=u+"/"+t,i=d.map(function(e){return e.id}).indexOf(t);return i>-1&&d.splice(i,1),e["delete"](o,s,{headers:{"Content-Type":"multipart/form-data"},body:a}).then(n,c)}function r(t){function n(e){return console.log("Deleting edits for answer was succesful"),e.data}for(var a=0;a<d.length;a++)d[a].answer==t&&d.splice(a,1);var s=u+"?filter=answer="+t;return e["delete"](s).then(n,c)}function l(){return d.length>0}function c(e){throw e}var d=[],u="/api/v2/mysql/_table/edittable",g={getEdits:a,addEdit:s,updateEdit:o,deleteEdit:i,deleteEditbyAnswer:r};return g}angular.module("app").factory("edit",e),e.$inject=["$http","$q","$rootScope"]}(),function(){"use strict";function e(e,t){function n(e,t){BootstrapDialog.show({type:BootstrapDialog.TYPE_PRIMARY,title:e,message:t,buttons:[{id:"btn-ok",label:"OK",cssClass:"btn-primary",autospin:!1,action:function(e){e.close()}}]})}function a(e){var a=t.dialogs["dialog."+e+".title"],s=t.dialogs["dialog."+e+".text"];n(a,s)}function s(e,t,n){var a="",s="",o="",i="";a="Please Confirm",o="Cancel",i="Confirm","image"==t&&(s="You want to change the image of <strong><em>"+e.name+"</em></strong> to this one: </br><img src="+e.imageURL+' class="thumbnail" style="width:60%; max-height:150px">'),"field"==t&&(s='You want to change the <strong class="capitalize"><em>'+e.field+"</em></strong> of <strong><em>"+e.name+"</em></strong> to <strong><em>"+e.nval+"</em></strong>."),BootstrapDialog.confirm({type:BootstrapDialog.TYPE_PRIMARY,title:a,message:s,closable:!0,draggable:!0,btnCancelLabel:o,btnOKLabel:i,btnOKClass:"btn-primary",btnCancelAction:function(e){e.close()},callback:function(t){t&&n(e)}})}function o(e,n,a){for(var s="",o="",r="",l=("table"+t.cCategory.id+".header",0);l<t.fields.length;l++){switch(t.fields[l].name){case"name":r='<strong class="capitalize">Name</strong>: '+e.name+"</br>";break;case"location":r=e.location?'<strong class="capitalize">Location</strong>: '+e.location+"</br>":"<strong>Location</strong>: </br>";break;case"cityarea":r='<strong class="capitalize">City Area</strong>: '+e.cityarea+"</br>";break;case"addinfo":r=e.addinfo?'<strong class="capitalize">Additional Info</strong>: '+e.addinfo+"</br>":"<strong>Additional Info</strong>: </br>"}s+=r}i(e,o,s,n,a)}function i(e,n,a,s,o){var i="",r="",l="",c="";i="Please Confirm",l="Cancel",c="Confirm",r="You want to add the following answer to <strong>"+t.header+"</strong>. </br></br>"+a+"</br>With the following image:<img src="+s+' class="thumbnail" style="width:60%; max-height:150px">',BootstrapDialog.confirm({type:BootstrapDialog.TYPE_PRIMARY,title:i,message:r,closable:!0,draggable:!0,btnCancelLabel:l,btnOKLabel:c,btnOKClass:"btn-primary",btnCancelAction:function(e){e.close()},callback:function(t){t&&o(e)}})}function r(e,t,n,a){var s="",o="";"approve"==n&&(s="Changed Approved",o="Congrats! With your vote, the change of <strong>"+e.field+"</strong> of <strong>"+e.name+"</strong> to <strong>"+e.nval+"</strong> gets approved."),"reject"==n&&(s="Changed Rejected",o="Congrats! With your vote, the change of <strong>"+e.field+"</strong> of <strong>"+e.name+"</strong> to <strong>"+e.nval+"</strong> has been rejected."),BootstrapDialog.show({type:BootstrapDialog.TYPE_PRIMARY,title:s,message:o,buttons:[{id:"btn-ok",label:"OK",cssClass:"btn-primary",autospin:!1,action:function(e,s){a(t,n),e.close()}}]})}function l(e){var t="",n="";"editAnswer"==e&&(n="Information Edits",t="Use edits to correct, add or update information in a profile. All edits need to be accepted by other users before they are approved. </br></br>An edit or change becomes approved when the number of people that agree exceeds the number of people that disagree by 5. </br></br>An edit or change gets rejected when the number of people that disagree exceeds those that agree by 5. </br></br> Only one edit per field at a time is allowed. Make sure you vote on the edits you agree or disagree."),"addAnswer"==e&&(n="Add an Answer",t="1. Fill out the form. The fields marked with * are required. All other fields are not required but recommended. <br/><br/>2. Click the 'Load Images' button. <br/><br/>3. Use '>>' and '<<' buttons to browse through the images. You can 'Load More' images.<br/><br/>4. When you find the image you like 'Add' your answer to the ranking.<br/><br/><br/>NOTE: Not all images will correspond to your answer. Entering all fields will help with the image results."),BootstrapDialog.show({type:BootstrapDialog.TYPE_PRIMARY,title:n,message:t,buttons:[{id:"btn-ok",label:"OK",cssClass:"btn-primary",autospin:!1,action:function(e){e.close()}}]})}function c(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_PRIMARY,title:"Image URL",message:e,buttons:[{id:"btn-ok",label:"OK",cssClass:"btn-primary",autospin:!1,action:function(e){e.close()}}]})}function d(e,n,a,s){for(var o="",i="",r="",l="",c=0;c<t.fields.length;c++){switch(t.fields[c].name){case"name":r='<strong class="capitalize">Name</strong>: '+e.name+"</br>",l='<strong class="capitalize">Name</strong>: '+n.name+"</br>";break;case"location":r=e.location?'<strong class="capitalize">Location</strong>: '+e.location+"</br>":"<strong>Location</strong>: </br>",l=n.location?'<strong class="capitalize">Location</strong>: '+n.location+"</br>":"<strong>Location</strong>: </br>";break;case"cityarea":r='<strong class="capitalize">City Area</strong>: '+e.cityarea+"</br>",l='<strong class="capitalize">City Area</strong>: '+n.cityarea+"</br>";break;case"addinfo":r=e.addinfo?'<strong class="capitalize">Additional Infob</strong>: '+e.addinfo+"</br>":"<strong>Additional Info</strong>: </br>",l=n.addinfo?'<strong class="capitalize">Additional Infob</strong>: '+n.addinfo+"</br>":"<strong>Additional Info</strong>: </br>"}o+=r,i+=l}u(e,o,n,i,a,s)}function u(e,t,n,a,s,o){var i="",r="",l="",c="";i="Just checking",l="No, they are different",c="Yeah, same",r='Are these the same establishment? </br></br><div class="row"><div class="col-sm-6">'+t+"</br><img src="+e.imageurl+' class="thumbnail" style="width:60%; max-height:150px"></div><div class="col-sm-6">'+a+"</br><img src="+n.imageurl+' class="thumbnail" style="width:60%; max-height:150px"></div></div>',BootstrapDialog.confirm({type:BootstrapDialog.TYPE_PRIMARY,title:i,message:r,closable:!0,draggable:!0,btnCancelLabel:l,btnOKLabel:c,btnOKClass:"btn-primary",btnCancelAction:function(e){e.close()},callback:function(t){t?o():s(e)}})}function g(e,t){var n="",a="",s="",o="";n="Scope of Delete",s="Just this category",o="Everywhere",a="Choose scope to delete:",BootstrapDialog.confirm({type:BootstrapDialog.TYPE_DANGER,title:n,message:a,closable:!0,draggable:!0,btnCancelLabel:s,btnOKLabel:o,btnOKClass:"btn-primary",btnCancelAction:function(e){e.close()},callback:function(n){n?t():e()}})}function m(e,t){var n="",a="",s="",o="",i="";if(n="Special Preview",s="Back",o="Save Special","weekly"==e.freq&&(i="Every: "+(e.mon?" - Monday":"")+(e.tue?" - Tuesday":"")+(e.wed?" - Wednesday":"")+(e.thu?" - Thursday":"")+(e.fri?" - Friday":"")+(e.sat?" - Saturday":"")+(e.sun?" - Sunday":"")+"<br>From: "+e.stime2+" to "+e.etime2),"onetime"==e.freq){var r=e.sdate==e.edate;i=r?e.sdate+" from "+e.stime+" to "+e.etime:"Starts: "+e.sdate+" at "+e.stime+"<br>Ends: "+e.edate+" at "+e.etime}a='This is how this special will look: </br></br>In the ranking summary:<br><table class="table table-hover cursor "><thead><tr><th>Rank</th><th>Name</th><th>Neighborhood</th><th>Distance</th><th>Specials</th></tr></thead><tbody><tr><td>1</td><td>'+e.name+'</td><td>Neighborhood</td><td>1.5</td><td style="background-color:'+e.bc+";color:"+e.fc+';">'+e.stitle+'<td></tr></tbody></table><br>Inside your business profile:<br><br><div style="background-color:'+e.bc+";color:"+e.fc+';"><p><strong>'+e.stitle+" @ "+e.name+"</strong></p><p>"+i+"</p><p>"+e.details+"</p></div>",BootstrapDialog.confirm({type:BootstrapDialog.TYPE_PRIMARY,title:n,message:a,closable:!0,draggable:!0,btnCancelLabel:s,btnOKLabel:o,btnOKClass:"btn-primary",btnCancelAction:function(e){e.close()},callback:function(e){e&&t()}})}function p(e){var t="",n="",a="",s="";t="Confirm Delete",a="Cancel",s="Delete",n="Just confirming, do you want to delete?",BootstrapDialog.confirm({type:BootstrapDialog.TYPE_DANGER,title:t,message:n,closable:!0,draggable:!0,btnCancelLabel:a,btnOKLabel:s,btnOKClass:"btn-primary",btnCancelAction:function(e){e.close()},callback:function(t){t&&e()}})}var v={editConfirm:s,getDialog:a,showDialog:n,howItWorks:l,addAnswer:o,showAddAnswer:i,editChangeEffective:r,checkSameAnswer:d,showSameAnswer:u,deleteType:g,deleteRank:p,url:c,createSpecialPreview:m};return v}angular.module("app").factory("dialog",e),e.$inject=["$q","$rootScope"]}(),function(){"use strict";function e(e,t,n){function a(n){function a(e){return d=e.data.resource}if(l()&&!n)return t.when(d);var s=u;return e.get(s).then(a,c)}function s(t){function a(e){return console.log("creating catans record was succesful"),e.data}var s={};s.answer=t,s.category=n.cCategory.id,s.upV=0,s.downV=0,s.timestmp=Date.now();var o={};o.resource=[],o.resource.push(s),d.push(s);var i=u;return e.post(i,o,{headers:{"Content-Type":"multipart/form-data"},body:o}).then(a,c)}function o(t){function n(e){return console.log("Deleting catans records was succesful"),e.data}for(var a=0;a<d.length;a++)d[a].answer==t&&d.splice(a,1);var s=u+"?filter=answer="+t;return e["delete"](s).then(n,c)}function i(t,a){function s(e){return console.log("Deleting catans records by answer and category was succesful"),e.data}for(var o=0;o<d.length;o++)d[o].answer==t&&d[o].category==n.cCategory.id&&d.splice(o,1);var i=u+"?filter=(answer="+t+") AND (category="+a+")";return e["delete"](i).then(s,c)}function r(t,a,s){function o(e){return console.log("updating catans record succesful"),e.data}console.log("val  ",s);var i={};i.resource=[];var r={};r.id=t;for(var l=0;l<a.length;l++)switch(a[l]){case"upV":r.upV=s[l];break;case"downV":r.downV=s[l]}i.resource.push(r);for(var d=u,g=n.B.indexOf(+t),l=0;l<a.length;l++)switch(a[l]){case"upV":n.ccatans[g].upV=s[l];break;case"downV":n.ccatans[g].downV=s[l]}return e.patch(d,i,{headers:{"Content-Type":"multipart/form-data"},body:i}).then(o,c)}function l(){return d.length>0}function c(e){throw e}var d=[],u="/api/v2/mysql/_table/catans",g={getAllcatans:a,postRec:s,deleteRec:i,deleteAnswer:o,updateRec:r};return g}angular.module("app").factory("catans",e),e.$inject=["$http","$q","$rootScope"]}(),function(){"use strict";function e(e,t,n,a){function s(n){function a(e){return v=e.data.resource}if(u()&&!n)return t.when(v);var s=f;return e.get(s).then(a,m)}function o(n,a){function s(e){return p=e.data}if(g(n)&&!a)return t.when(p);var o=f+"/"+n;return e.get(o).then(s,m)}function i(t){function n(e){return e.data}var a=f+"/?filter=customer="+t;return e.get(a).then(n,m)}function r(t){function n(e){var n=t;return n.id=e.data.resource[0].id,v.push(n),a.postRec(n.id),console.log("result",e),e.data}var s=f,o=[];return o.push(t),e.post(s,o,{headers:{"Content-Type":"multipart/form-data"},body:o}).then(n,m)}function l(t,a,s){function o(e){return console.log("updating answer succesful"),e.data}var i={};i.resource=[];var r={};r.id=t;for(var l=0;l<a.length;l++)switch(a[l]){case"name":r.name=s[l];break;case"addinfo":r.addinfo=s[l];break;case"cityarea":r.cityarea=s[l];break;case"location":r.location=s[l];break;case"image":r.imageurl=s[l];break;case"views":r.views=s[l]}i.resource.push(r);for(var c=f,d=n.A.indexOf(+t),l=0;l<a.length;l++)switch(a[l]){case"name":n.canswers[d].name=s[l];break;case"addinfo":n.canswers[d].addinfo=s[l];break;case"cityarea":n.canswers[d].cityarea=s[l];break;case"location":n.canswers[d].location=s[l];break;case"image":n.canswers[d].imageurl=s[l];break;case"views":n.canswers[d].views=s[l]}return e.patch(c,i,{headers:{"Content-Type":"multipart/form-data"},body:i}).then(o,m)}function c(t,n){function a(e){return console.log(" answer flagged succesful"),e.data}var s={};s.resource=[];var o={};o.id=t,o.flag=n,s.resource.push(o);var i=f;return e.patch(i,s,{headers:{"Content-Type":"multipart/form-data"},body:s}).then(a,m)}function d(t){function n(e){return console.log("Deleting answer was succesful"),e.data}var a={};a.resource=[];var s={};s.id=t,a.resource.push(s);var o=f+"/"+t,i=v.map(function(e){return e.id}).indexOf(t);return i>-1&&v.splice(i,1),e["delete"](o,s,{headers:{"Content-Type":"multipart/form-data"},body:a}).then(n,m)}function u(){return v.length>0}function g(e){return p&&p.id==e}function m(e){throw e}var p,v=[],f="/api/v2/mysql/_table/answers",h={getAnswers:s,getAnswer:o,addAnswer:r,updateAnswer:l,deleteAnswer:d,flagAnswer:c,getAnswerbyCustomer:i};return h}angular.module("app").factory("answer",e),e.$inject=["$http","$q","$rootScope","catans"]}(),function(){"use strict";function e(e,t,n,a,s,o,i,r,l,c){function d(){u(),g(M.answer.id),console.log("Edit Answer Activated!")}function u(){for(var e=0;e<s.fields.length;e++){switch(V={},V.field=s.fields[e].name,s.fields[e].name){case"name":V.cval=M.answer.name;break;case"cityarea":V.cval=M.answer.cityarea;break;case"location":V.cval=M.answer.location;break;case"addinfo":V.cval=M.answer.addinfo}V.val="",V.label=s.fields[e].label,V.opts="country"==V.field?"c for c in vm.countries":"c for c in vm.emptyarray",M.fields.push(V)}for(var e=0;e<M.fields.length;e++)M.fields[e].val=M.fields[e].cval;console.log("fields  ",M.fields)}function g(e){M.edits=[],_=[],U=[];for(var t={},n=0;n<s.cedits.length;n++)if(s.cedits[n].answer==e){switch(t=s.cedits[n],t.vote=0,t.idx=n,t.agree="",t.disagree="",s.fields[0].name){case"name":t.name=M.answer.name}M.edits.push(t),_.push(s.cedits[n].upV),U.push(s.cedits[n].downV)}f(M.answer.id)}function m(t){if(!s.isLoggedIn)return void e.getDialog("notLoggedIn");for(var n=!1,a=0;a<M.edits.length;a++)if(M.edits[a].field==t.field){n=!0;break}if(n)return void e.getDialog("editFieldExists");var o={};switch(o.field=t.field,t.field){case"name":o.cval=M.answer.name;break;case"nickname":o.cval=M.answer.nickname;break;case"club":o.cval=M.answer.club;break;case"country":o.cval=M.answer.country}switch(o.nval=t.val,o.cval||(o.cval=""),o.answer=M.answer.id,o.upV=0,o.downV=0,o.imageURL="",o.display="none",s.fields[0].name){case"name":o.name=M.answer.name}o.user=s.user.id,o.username=s.user.name,o.category=s.cCategory.id,o.timestmp=Date.now(),e.editConfirm(o,"field",S)}function p(){if(!s.isLoggedIn)return void e.getDialog("notLoggedIn");for(var t=!1,n=0;n<M.edits.length;n++)if("image"==M.edits[n].field){t=!0;break}if(t)return void e.getDialog("editFieldExists");var a=c.getImageLinks(M.fields,z,"edit");a.then(D,L)}function v(){var t={};switch(t.field="image",t.cval=M.answer.imageurl,t.nval="",t.imageURL=M.imageURL,t.display="inline",t.answer=M.answer.id,t.upV=0,t.downV=0,s.fields[0].name){case"name":t.name=M.answer.name}t.user=s.user.id,t.username=s.user.name,t.category=s.cCategory.id,t.timestmp=Date.now(),e.editConfirm(t,"image",R)}function f(e){for(var t={},n=0;n<s.ceditvotes.length;n++)s.ceditvotes[n].answer==e&&(t=s.ceditvotes[n],O.push(t));for(n=0;n<M.edits.length;n++)for(var a=0;a<O.length;a++)M.edits[n].id==O[a].edit&&(M.edits[n].vote=O[a].vote);w()}function h(t,n){if(s.isAdmin)return void e.editChangeEffective(M.edits[n],n,"approve",x);if(!s.isLoggedIn)return void e.getDialog("notLoggedIn");switch(t.vote){case 1:M.edits[n].vote=0,M.edits[n].upV--;break;case 0:M.edits[n].vote=1,M.edits[n].upV++;break;case-1:M.edits[n].vote=1,M.edits[n].upV++,M.edits[n].downV--}y(n),w()}function b(t,n){if(s.isAdmin)return void e.editChangeEffective(M.edits[n],n,"reject",x);if(!s.isLoggedIn)return void e.getDialog("notLoggedIn");switch(t.vote){case 1:M.edits[n].vote=-1,M.edits[n].upV--,M.edits[n].downV++;break;case 0:M.edits[n].vote=-1,M.edits[n].downV++;break;case-1:M.edits[n].vote=0,M.edits[n].downV--}y(n),w()}function w(){for(var e=0;e<M.edits.length;e++)switch(M.edits[e].vote){case 1:M.edits[e].agree="active",M.edits[e].disagree="";break;case 0:M.edits[e].agree="",M.edits[e].disagree="";break;case-1:M.edits[e].agree="",M.edits[e].disagree="active"}}function y(t){if(M.edits[t].upV>M.edits[t].downV){if(M.edits[t].upV-M.edits[t].downV>=B)return void e.editChangeEffective(M.edits[t],t,"approve",x)}else if(M.edits[t].downV>M.edits[t].upV&&M.edits[t].downV-M.edits[t].upV>=F)return void e.editChangeEffective(M.edits[t],t,"reject",x)}function k(){console.log("updateRecords @ editAnswer");for(var e=!1,t=[],n={},a=0;a<M.edits.length;a++){e=!1;for(var o=0;o<O.length;o++)if(M.edits[a].id==O[o].edit){e=!0;break}e?r.patchEditVoteRec(O[o].id,M.edits[a].vote):0!=M.edits[a].vote&&(n={},n.edit=M.edits[a].id,n.user=s.user.id,n.category=s.cCategory.id,n.answer=M.edits[a].answer,n.vote=M.edits[a].vote,n.timestmp=Date.now(),t.push(n)),(M.edits[a].upV!=_[a]||M.edits[a].downV!=U[a])&&i.updateEdit(M.edits[a].id,M.edits[a].upV,M.edits[a].downV)}t.length>0&&(r.postEditVoteRec(t),t=[]),j=!0}function x(e,t){"approve"==t&&(A(e),P()),"reject"==t&&C(e)}function A(e){console.log("Edit has been approved"),"image"==M.edits[e].field?l.updateAnswer(M.edits[e].answer,[M.edits[e].field],[M.edits[e].imageURL]):l.updateAnswer(M.edits[e].answer,[M.edits[e].field],[M.edits[e].nval]),i.deleteEdit(M.edits[e].id),r.deleteEditVotes(M.edits[e].id),s.cedits.splice(M.edits[e].idx,1),M.edits.splice(e,1)}function C(e){console.log("Edit has been discarded"),i.deleteEdit(M.edits[e].id),r.deleteEditVotes(M.edits[e].id),s.cedits.splice(M.edits[e].idx,1),M.edits.splice(e,1)}function $(){e.howItWorks("editAnswer")}function S(e){k(),j=!1;var t=i.addEdit(e);console.log("creating edit"),t.then(function(){g(M.answer.id)})}function R(e){k(),j=!1;var t=i.addEdit(e);t.then(function(){g(M.answer.id),M.imageURL=M.answer.imageurl,M.imagefunctions="none"})}function P(){n.go("answerDetail",{index:M.answer.id})}function D(e){N=N.concat(e),M.numLinks=N.length,z++,(M.numLinks>10||z>4)&&(M.searchDisabled="disabled"),z>1&&(M.imageCommand="Load More Images"),M.linkIdx=0,M.imageURL=N[M.linkIdx],M.numLinks>0&&(M.imagefunctions="inline")}function L(){console.log("query failed, dont give up")}function I(){M.linkIdx++,M.linkIdx>=M.numLinks&&(M.linkIdx=0),M.imageURL=N[M.linkIdx]}function E(){M.linkIdx--,M.linkIdx<0&&(M.linkIdx=M.numLinks-1),M.imageURL=N[M.linkIdx]}function T(){s.$emit("closeRank")}var M=this;M.title="editAnswer",M.header="table"+s.cCategory.id+".header",M.body="table"+s.cCategory.id+".body",M.answer={},M.showHowItWorksDialog=$,M.editField=m,M.editAgree=h,M.editImage=p,M.selectImage=v,M.viewPrev=E,M.viewNext=I,M.closeRank=T,M.editDisagree=b,M.answerDetail=P,M.ranking=s.title;var q=s.A;t.index&&(M.answer=s.canswers[q.indexOf(+t.index)]),M.imageURL=M.answer.imageurl,M.fields=[];var V={};M.edits=[];var _=[],U=[],O=[],j=!1,B=5,F=5,N=[];M.linkIdx=0,M.numLinks=0,M.imageCommand="Change Image";var z=1;M.imagefunctions="none",M.emptyarray=[],s.$on("$stateChangeSuccess",function(e,t,n,a,o){s.previousState=a.name}),s.$on("$stateChangeStart",function(e,t,n,a,s){"editAnswer"==a.name&&(j||k())}),s.showR&&d()}angular.module("app").controller("editAnswer",e),e.$inject=["dialog","$stateParams","$state","answers","$rootScope","$modal","edit","editvote","answer","image"]}(),function(){"use strict";function e(e,t,n,a,s,o,i,r,l,c,d,u){function g(){m(),p(M.answer.id),w(M.answer.id),L(),b(M.catans.id),v(M.answer.id),D(M.answer.id),P(),console.log("Answer details loaded")}function m(){M["public"]=o.canswers["public"]}function p(e){for(var t=0;t<o.ccatans.length;t++)o.ccatans[t].answer==e&&(M.catans=o.ccatans[t]);j=M.catans.upV,B=M.catans.downV}function v(e){var t=0,n=0,a="";M.relativetable=[];for(var s=o.R,i=o.GP,r=o.answersR,l=F.indexOf(+e),c=0,d=o.fields[0].name,u=!1,g=0;g<r.length;g++)if(F[g]!=e){switch(c=s[l][g],d){case"name":a=r[g].name;break;case"nickname":a=r[g].nickname;break;case"country":a=r[g].country,u=!0;break;case"club":a=r[g].club}i[l][g]?(t=Math.round(c/i[l][g]*100),n=100-t):(t=0,n=0),M.relativetable.push({id:r[g].id,Rank:r[g].Rank,PctF:t,vsName:a,PctC:n,GP:i[l][g],isC:u})}}function f(e){h(),z=!1,q=!1,M.answer=N[F.indexOf(+e)],w(M.answer.id),j=M.catans.upV,B=M.catans.downV,m(),p(M.answer.id),b(M.catans.id),v(e),D(M.answer.id),P()}function h(){console.log("UpdateRecords @ answerDetail"),q&&V.vote!=U&&(o.cvotes[O].vote=U,i.patchRec(V.id,U)),q||0==U||i.postRec(_,U),(M.catans.upV!=j||M.catans.downV!=B)&&d.updateRec(M.catans.id,["upV","downV"],[M.catans.upV,M.catans.downV]),z=!0}function b(e){for(var t=0;t<o.cvotes.length;t++)if(o.cvotes[t].catans==e){V=o.cvotes[t],O=t,q=!0;break}q?(U=V.vote,_=V.catans):(U=0,_=e),y(U)}function w(e){M.numEdits=0;for(var t=0;t<o.cedits.length;t++)o.cedits[t].answer==e&&M.numEdits++}function y(e){1==e&&(M.answer.thumbUp="thumbs_up_blue.png",M.answer.thumbDn="thumbs_down_gray.png"),0==e&&(M.answer.thumbUp="thumbs_up_gray.png",M.answer.thumbDn="thumbs_down_gray.png"),-1==e&&(M.answer.thumbUp="thumbs_up_gray.png",M.answer.thumbDn="thumbs_down_blue.png")}function k(){if(!o.isLoggedIn)return void s.getDialog("notLoggedIn");switch(U){case-1:U=1,M.catans.upV++,M.catans.downV--;break;case 0:U=1,M.catans.upV++;break;case 1:U=0,M.catans.upV--}y(U),console.log("UpVote")}function x(){if(!o.isLoggedIn)return void s.getDialog("notLoggedIn");switch(U){case-1:U=0,M.catans.downV--;break;case 0:U=-1,M.catans.downV++;break;case 1:U=-1,M.catans.upV--,M.catans.downV++}y(U),console.log("DownVote")}function A(){if(console.log("goBack"),z||h(),"match"==o.previousState)n.go("match");else{var e=M.answer.views+1;a.updateAnswer(M.answer.id,["views"],[e]),n.go("rankSummary",{index:o.cCategory.id})}}function C(e){o.title=e.title,n.go("rankSummary",{index:e.id})}function $(){n.go("editAnswer",{index:M.answer.id})}function S(){s.deleteType(function(){d.deleteRec(M.answer.id,o.cCategory.id).then(function(){n.go("rankSummary",{index:o.cCategory.id})})},function(){a.deleteAnswer(M.answer.id),r.deleteRecordsbyAnswer(M.answer.id),i.deleteVotesbyAnswer(M.answer.id),l.deleteEditbyAnswer(M.answer.id),c.deleteEditVotesbyAnswer(M.answer.id),d.deleteAnswer(M.answer.id),n.go("rankSummary",{index:o.cCategory.id})})}function R(t){return o.isLoggedIn?(console.log("answer flagged!!!"),e.flagAnswer(M.catans.id,t),void s.getDialog("answerFlagged")):void s.getDialog("notLoggedIn")}function P(){M.otherRanks=[];for(var e=0;e<o.catansrecs.length;e++)if(o.catansrecs[e].answer==M.answer.id&&o.catansrecs[e].category!=o.cCategory.id)for(var t=0;t<o.content.length;t++)o.content[t].id==o.catansrecs[e].category&&M.otherRanks.push(o.content[t]);M.otherRanksExist=M.otherRanks.length>0?!0:!1}function D(e){M.specialsList=[];for(var t=0;t<o.specials.length;t++)if(o.specials[t].answer==e){u.formatdatetime(o.specials[t]),o.specials[t].name=M.answer.name;var n=T(o.specials[t]);o.specials[t].html=n;var a="background-color:"+o.specials[t].bc+";color:"+o.specials[t].fc+";white-space:pre;";o.specials[t].style=a,M.specialsList.push(o.specials[t])}}function L(){if(o.isLoggedIn){var e=o.user.name,t=e.localeCompare("Andres Moctezuma");M.deleteButton=7==o.user.id&&0==t?"inline":"none"}}function I(){s.url(M.answer.imageurl)}function E(){o.$emit("closeRank")}function T(e){var t="",n="";if("weekly"==e.freq&&(n="Every: "+(e.mon?" - Monday":"")+(e.tue?" - Tuesday":"")+(e.wed?" - Wednesday":"")+(e.thu?" - Thursday":"")+(e.fri?" - Friday":"")+(e.sat?" - Saturday":"")+(e.sun?" - Sunday":"")+"<br>From: "+e.stime2+" to "+e.etime2),"onetime"==e.freq){var a=e.sdate==e.edate;n=a?e.sdate+" from "+e.stime+" to "+e.etime:"Starts: "+e.sdate+" at "+e.stime+"<br>Ends: "+e.edate+" at "+e.etime}return t="<div ><p><strong>"+e.stitle+" @ "+e.name+"</strong></p><p>"+n+"</p><p>"+e.details+"</p></div>"}var M=this;M.title="answerDetail",M.ranking=o.title;var q=!1,V={},_=0,U=0,O=0,j=0,B=0,F=o.A,N=o.canswers,z=!1;M.numEdits=0,M.relativetable=[],M.catans=[],M.UpVote=k,M.DownVote=x,M.refresh=f,M.goBack=A,M.editAnswer=$,M.deleteAnswer=S,M.flagAnswer=R,M.deleteButton="none",M.showUrl=I,M.closeRank=E,M.rankSel=C,M.fields=o.fields,M.type=o.cCategory.type,t.index&&(M.answer=N[F.indexOf(+t.index)]),o.$on("$stateChangeSuccess",function(e,t,n,a,s){o.previousState=a.name}),o.$on("$stateChangeStart",function(e,t,n,a,s){"answerDetail"==a.name&&(z||h())}),o.showR&&g()}angular.module("app").controller("answerDetail",e),e.$inject=["flag","$stateParams","$state","answer","dialog","$rootScope","votes","matchrec","edit","editvote","catans","datetime"]}(),function(){"use strict";function e(e,t,n,a,s,o,i,r){function l(){c(),console.log("Add Answer Activated!")}function c(){R.emptyarray=[],R.neighborhoods=a.isDowntown?a.districts:a.neighborhoods,R.establishmentNames=a.estNames,R.fields=a.fields,R.type=a.cCategory.type,R.fields.opts=[],R.fields.val=[],R.fields.textstyle=[];for(var e=0;e<R.fields.length;e++)R.fields[e].val="",R.fields[e].opts="cityarea"==R.fields[e].name?"c for c in vm.neighborhoods":"c for c in vm.emptyarray","name"==R.fields[e].name&&"Establishment"==a.cCategory.type&&(R.fields[e].opts="c for c in vm.establishmentNames"),R.fields[e].textstyle="addinfo"==R.fields[e].name?"textarea":"text"}function d(){M.imageurl=L[R.linkIdx],"Short-Phrase"==a.cCategory.type&&(M.imageurl="none"),M.upV=0,M.downV=0,M.type=R.type,M.userid=1,M.views=0,E?e.checkSameAnswer(M,q,y,k):e.addAnswer(M,R.imageURL,y)}function u(){for(var e=0;e<R.fields.length;e++)switch(R.fields[e].name){case"name":M.name=R.fields[e].val;break;case"location":M.location=R.fields[e].val;break;case"addinfo":M.addinfo=R.fields[e].val;break;case"cityarea":M.cityarea=R.fields[e].val}}function g(){P=!0;for(var e=0;e<R.fields.length;e++)if(R.fields[e].isrequired&&R.fields[e].val.length<3){P=!1;break}D="Short-Phrase"==a.cCategory.type?P:P&&R.numLinks>0}function m(){t.go("rankSummary",{index:a.cCategory.id})}function p(){var t=[];if(u(),g(),!P)return void e.getDialog("missingDataImage");t=JSON.parse(JSON.stringify(R.fields));var n=o.getImageLinks(t,I,"add");n.then(h,v)}function v(){console.log("query failed, dont give up")}function f(){return u(),g(),$(M),D?void d():void e.getDialog("missingDataAnswer")}function h(e){for(var t,n=!1,a=0;a<e.length;a++){for(var s=0;s<L.length;s++)if(t=e[a].localeCompare(L[s]),0==t){n=!0;break}n||L.push(e[a])}R.numLinks=L.length,I++,(R.numLinks>10||I>=4)&&(R.searchDisabled="disabled"),I>1&&(R.imageCommand="More images"),R.linkIdx=0,R.imageURL=L[R.linkIdx],A(L[R.linkIdx],C),R.numLinks>0&&(R.imagefunctions="inline")}function b(){R.linkIdx++,R.linkIdx>=R.numLinks&&(R.linkIdx=0),R.imageURL=L[R.linkIdx],A(L[R.linkIdx],C)}function w(){R.linkIdx--,R.linkIdx<0&&(R.linkIdx=R.numLinks-1),R.imageURL=L[R.linkIdx],A(L[R.linkIdx],C)}function y(e){console.log("addAnswerConfrimed"),n.addAnswer(e).then(m)}function k(){console.log("answerIsSame"),T?e.getDialog("answerDuplicated"):r.postRec(q.id),m()}function x(){e.howItWorks("addAnswer")}function A(e,t,n){n=n||5e3;var a,s=!1,o=new Image;o.onerror=o.onabort=function(){s||(clearTimeout(a),t(e,"error"))},o.onload=function(){s||(clearTimeout(a),t(e,"success"))},o.src=e,a=setTimeout(function(){s=!0,t(e,"timeout")},n)}function C(e,t){("error"==t||"timeout"==t)&&(R.imageURL="../../../assets/images/noimage.jpg")}function $(e){for(var t=0;t<a.estAnswers.length;t++)if(e.name==a.estAnswers[t].name){E=!0,q=a.estAnswers[t];for(var n=0;n<a.catansrecs.length;n++)a.catansrecs[n].answer==a.estAnswers[t].id&&a.catansrecs[n].category==a.cCategory.id&&(T=!0)}}function S(){a.$emit("closeRank")}var R=this;R.title="addAnswer",R.header="table"+a.cCategory.id+".header",R.body="table"+a.cCategory.id+".body",R.searchDisabled="disabled",R.modalEnable=!0,R.publicfields=[],R.ranking=a.title;var P=!1,D=!1,L=[];R.linkIdx=0,R.numLinks=0,R.imageCommand="Load images",R.searchDisabled="";var I=1;R.imagefunctions="none";var E=!1,T=!1,M={},q={};R.callAddAnswer=f,R.rankSummary=m,R.callSearchImage=p,R.viewNext=b,R.viewPrev=w,R.closeRank=S,R.showHowItWorksDialog=x,R.imageURL="../../../assets/images/noimage.jpg",R.header=a.header,a.showR&&l()}angular.module("app").controller("addAnswer",e),e.$inject=["dialog","$state","answer","$rootScope","$modal","image","answers","catans"]}(),function(){"use strict";function e(e,t,n){function a(n){function a(e){return c=e.data.resource}if(r()&&!n)return t.when(c);var s=d;return e.get(s).then(a,l)}function s(t,n){function a(e){console.log("Creating new query record was succesful")}var s={};

s.resource=[];var o={};o.query=t,o.results=n,o.timestmp=Date.now(),s.resource.push(o);var i=d;return e.post(i,s,{headers:{"Content-Type":"multipart/form-data"},body:s}).then(a,l)}function o(t){function n(e){console.log("Flushing queries db was succesful")}var a={};a.resource=t,console.log("obj ---",t);var s=d;return e["delete"](s,t,{headers:{"Content-Type":"multipart/form-data"},body:t}).then(n,l)}function i(t){function n(e){return console.log("Deleting record was succesful"),e.data}var a={};a.resource=[];var s={};s.id=t,a.resource.push(s);var o=d+"/"+t;return e["delete"](o,s,{headers:{"Content-Type":"multipart/form-data"},body:a}).then(n,l)}function r(){return c.length>0}function l(e){throw e}var c=[],d="/api/v2/mysql/_table/queries",u={getQueries:a,postQuery:s,flushAll:o,deleteRec:i};return u}angular.module("app").factory("query",e),e.$inject=["$http","$q","$rootScope"]}(),function(){"use strict";function e(e,t,n){function a(){console.log("views page Loaded!")}var s=this;s.title="views",s.content=t.content,a()}angular.module("app").controller("views",e),e.$inject=["$location","$rootScope","$state"]}(),function(){"use strict";function e(e,t,n,a){function s(){a.getQueries().then(function(e){i.queries=e,console.log("Queries Loaded!")})}function o(){for(var e=0;e<i.queries.length;e++)a.deleteRec(i.queries[e].id)}var i=this;i.title="queries",i.clearDb=o,s()}angular.module("app").controller("queries",e),e.$inject=["$location","$rootScope","$state","query"]}(),function(){"use strict";function e(e,t,n){function a(){console.log("flags page Loaded!")}var s=this;s.title="flags",a()}angular.module("app").controller("flags",e),e.$inject=["$location","$rootScope","$state"]}(),function(){"use strict";function e(e,t,n){function a(){console.log("admin page Loaded!")}function s(){n.go("queries")}function o(){n.go("views")}function i(){n.go("flags")}function r(){n.go("addRank")}function l(){n.go("content")}var c=this;c.title="admin",c.selKeywords="active",c.selViews="",c.selFlags="",c.selRankings="",c.goBack=l,c.keywords=s,c.views=o,c.flags=i,c.addRank=r,a()}angular.module("app").controller("admin",e),e.$inject=["$location","$rootScope","$state"]}(),function(){"use strict";function e(e,t,n,a,s,o){function i(){console.log("addRank page Loaded!")}function r(){d.title=c.rankTitle,d.tags=c.tags,d.keywords=c.keywords,d.type=c.type,d.question=c.question,d.views=0,d.answers=0,(null==d.title||void 0==d.title||d.title.length<10)&&(u=!1),(null==d.question||void 0==d.question||d.question.length<10)&&(m=!1),"Person"!=d.type&&"Establishment"!=d.type&&"Short-Phrase"!=d.type&&"Event"!=d.type&&"Organization"!=d.type&&"Place"!=d.type&&"Activity"!=d.type&&(g=!1)}function l(){r(),u&&g&&m?s.addTable(d):o.getDialog(u?m?"rankType":"rankQuestion":"rankTitle")}var c=this;c.title="addRank";var d={},u=!0,g=!0,m=!0;c.addRanking=l,c.typeList=["Person","Establishment","Place","Activity","Short-Phrase","Organization","Event"],i()}angular.module("app").controller("addRank",e),e.$inject=["$location","$rootScope","$state","$stateParams","table","dialog"]}(),function(){"use strict";function e(e,t){var n=[{name:"login",url:"/login",templateUrl:"app/login/partials/login.html",controller:"login as vm"},{name:"register",url:"/register",templateUrl:"app/login/partials/register.html",controller:"register as  vm"}];$(n).each(function(){e.state(this)})}var t=angular.module("login");t.config(["$stateProvider","$urlRouterProvider",e])}(),function(){"use strict";function e(e,t){var n=[{name:"customer",url:"/customer",views:{"@":{templateUrl:"app/customer/Partials/customer.html",controller:"customer as vm"},"navbar@customer":{templateUrl:"app/layout/Partials/navbar.html",controller:"navbar as vm"}},resolve:{answers:["answer",function(e){return e.getAnswers().then(function(e){return e})}]}},{name:"mainphoto",parent:"customer",url:"/mainphoto",templateUrl:"app/customer/Partials/mainphoto.html",controller:"mainphoto as vm"},{name:"specials",parent:"customer",url:"/specials",templateUrl:"app/customer/Partials/specials.html",controller:"specials as vm"},{name:"editspecial",parent:"customer",url:"/editspecial",templateUrl:"app/customer/Partials/editspecial.html",controller:"editspecial as vm"},{name:"photogallery",parent:"customer",url:"/photogallery",templateUrl:"app/customer/Partials/photogallery.html",controller:"photogallery as vm"}];$(n).each(function(){e.state(this)})}var t=angular.module("app");t.config(["$stateProvider","$urlRouterProvider",e])}(),function(){"use strict";function e(e,t){var n=[{name:"admin",url:"/admin",views:{"@":{templateUrl:"app/admin/Partials/admin.html",controller:"admin as vm"},"navbar@admin":{templateUrl:"app/layout/Partials/navbar.html",controller:"navbar as vm"}}},{name:"queries",parent:"admin",url:"/queries",templateUrl:"app/admin/Partials/queries.html",controller:"queries as vm"},{name:"views",parent:"admin",url:"/views",templateUrl:"app/admin/Partials/views.html",controller:"views as vm"},{name:"flags",parent:"admin",url:"/flags",templateUrl:"app/admin/Partials/flags.html",controller:"flags as vm"},{name:"addRank",parent:"admin",url:"/addRank",templateUrl:"app/admin/Partials/addRank.html",controller:"addRank as vm"}];$(n).each(function(){e.state(this)})}var t=angular.module("app");t.config(["$stateProvider","$urlRouterProvider",e])}();var openModal=function(e,t){$(e).modal({backdrop:!t||1!=t.backdrop&&0!=t.backdrop?"static":t.backdrop,keyboard:t&&t.keyboard?t.keyboard:"false",show:"true"})},closeModal=function(e,t){$(e).modal("hide"),t&&t()};!function(){"user strict";angular.module("app").constant("INSTANCE_URL","http://bitnami-dreamfactory-df88.westus.cloudapp.azure.com").constant("APP_API_KEY","7e9a54a80a6ae850bc38ff768d75e143e75c273d1f7e2f265648020bf8c42a3b").constant("DEBUG_MODE",!0)}(),function(){"use strict";function e(e,t){t.otherwise("/content");var n=[{name:"layout","abstract":!0,url:"",views:{"@":{templateUrl:"app/layout/Partials/layout.html",controller:"layout as vm"},"navbar@layout":{templateUrl:"app/layout/Partials/navbar.html",controller:"navbar as vm"}}},{name:"content",parent:"layout",url:"/content",views:{"@layout":{templateUrl:"app/content/partials/content.html",controller:"content as vm"}},resolve:{answers:["answer",function(e){return e.getAnswers().then(function(e){return e})}],rankings:["table",function(e){return e.getTables().then(function(e){return e})}],specials:["special",function(e){return e.getSpecials().then(function(e){return e})}]}},{name:"rankSummary",parent:"content",url:"/rankSummary/:index",templateUrl:"app/rank/Partials/RankSummary.html",controller:"rankSummary as vm",resolve:{mrecs:["matchrec",function(e){return e.GetMatchTable().then(function(e){return e})}],edits:["edit",function(e){return e.getEdits().then(function(e){return e})}],useractivities:["useractivity",function(e){return e.getAllUserActivity().then(function(e){return e})}],catansrecs:["catans",function(e){return e.getAllcatans().then(function(e){return e})}]}},{name:"editRanking",parent:"content",url:"/editRanking/:index",templateUrl:"app/rank/Partials/editRanking.html",controller:"editRanking as vm",resolve:{rankings:["table",function(e){return e.getTables().then(function(e){return e})}]}},{name:"addAnswer",parent:"content",url:"/addAnswer",templateUrl:"app/answer/Partials/addAnswer.html",controller:"addAnswer as vm"},{name:"editAnswer",parent:"content",url:"/editAnswer/:index",templateUrl:"app/answer/Partials/editAnswer.html",controller:"editAnswer as vm",resolve:{answers:["answer",function(e){return e.getAnswers().then(function(e){return e})}],edits:["edit",function(e){return e.getEdits().then(function(e){return e})}]}},{name:"answerDetail",parent:"content",url:"/answerDetail/:index",templateUrl:"app/answer/Partials/answerDetail.html",controller:"answerDetail as vm",resolve:{answers:["answer",function(e){return e.getAnswers().then(function(e){return e})}]}},{name:"match",parent:"content",url:"/match",templateUrl:"app/rank/Partials/match.html",controller:"match as vm",resolve:{answers:["answer",function(e){return e.getAnswers().then(function(e){return e})}]}},{name:"about",url:"/about",views:{"@":{templateUrl:"app/layout/Partials/about.html",controller:"about as vm"},"navbar@about":{templateUrl:"app/layout/Partials/navbar.html",controller:"navbar as vm"}}}];$(n).each(function(){e.state(this)})}var t=angular.module("app");t.config(["$stateProvider","$urlRouterProvider",e])}(),function(){"use strict";function e(e){e.interceptors.push("httpInterceptor")}var t=angular.module("app");t.config(e),e.$inject=["$httpProvider"]}(),function(){"use strict";function e(e,t,n,a){t.defaults.headers.common["X-Dreamfactory-API-Key"]=a,t.defaults.headers.common["X-DreamFactory-Session-Token"]=e.session_token}angular.module("app").run(e),e.$inject=["$cookies","$http","$rootScope","APP_API_KEY"]}(),angular.module("app").run(["$templateCache",function(e){e.put("app/admin/Partials/addRank.html",'<br><div class="row"><div class="col-sm-1"></div><div class="col-sm-10"><h4>Add Ranking</h4><label><strong>Title:</strong></label> <input class="form-control" ng-model="vm.rankTitle" type="text" placeholder="{{vm.rankTitle}}"> <label><strong>Question:</strong></label> <input class="form-control" ng-model="vm.question" type="text" placeholder="{{vm.question}}"> <label><strong>Tags:</strong></label> <input class="form-control" ng-model="vm.tags" type="text" placeholder="{{vm.tags}}"> <label><strong>Keywords:</strong></label> <input class="form-control" ng-model="vm.keywords" type="text" placeholder="{{vm.keywords}}"> <label><strong>Type:</strong></label> <input class="form-control" ng-model="vm.type" bs-typeahead="" type="text" placeholder="{{vm.type}}" bs-options="c for c in vm.typeList"><br><div class="form-group text-right"><button type="button" class="btn btn-primary" ng-click="vm.addRanking()">Add</button></div></div><div class="col-sm-1"></div></div>'),e.put("app/admin/Partials/admin.html",'<div ui-view="navbar"></div><br><div class="text-center"><div class="btn-group col-sm-6 col-md-6"><button class="btn btn-success {{vm.selKeywords}}" ng-click="vm.keywords()">Searched-Keyword</button> <button class="btn btn-primary {{vm.selViews}}" ng-click="vm.views()">Ranking-Answers Views</button> <button class="btn btn-danger {{vm.selFlags}}" ng-click="vm.flags()">Answer Flags</button> <button class="btn btn-primary {{vm.selAddRanking}}" ng-click="vm.addRank()">Add Ranking</button></div></div><br><br><div ui-view=""></div><br><br><footer class="footer"><div class="container"><p class="text-muted">Rank-X is property of Rank-X LLC. San Diego, CA - 2016</p></div></footer>'),e.put("app/admin/Partials/flags.html",'<h1>Flags</h1><div class="row"><div class="col-sm-2"></div><div class="col-sm-8"><table class="table table-hover cursor"><tbody><thead><tr><th>Category</th><th>Answer</th><th>Flag</th></tr></thead><tbody><tr><td>Which are best breweries in San Diego?</td><td>Brewery A</td><td>Duplicated</td></tr><tr><td>What is best thing to say to a woman?</td><td>You are fat</td><td>Offensive</td></tr><tr><td>Best beaches to go with the family</td><td>Pacific Beach</td><td>Duplicated</td></tr></tbody></tbody></table></div><div class="col-sm-2"></div></div>'),e.put("app/admin/Partials/queries.html",'<h1>Queries</h1><br><a ng-click="vm.clearDb()" class="btn btn-danger">Clear Database</a><br><div class="row"><div class="col-sm-2"></div><div class="col-sm-8"><table class="table table-hover cursor"><tbody><thead><tr><th>User Input</th><th>Num. Results</th></tr></thead><tbody><tr ng-repeat="x in vm.queries | orderBy: \'-results\'"><td>{{x.query}}</td><td>{{x.results}}</td></tr></tbody></tbody></table></div><div class="col-sm-2"></div></div>'),e.put("app/admin/Partials/views.html",'<h1>Views</h1><div class="row"><div class="col-sm-2"></div><div class="col-sm-8"><table class="table table-hover cursor"><tbody><thead><tr><th>Ranking</th><th>Views</th></tr></thead><tbody><tr ng-repeat="x in vm.content | orderBy: \'-views\'"><td>{{x.title}}</td><td>{{x.views}}</td></tr></tbody></tbody></table></div><div class="col-sm-2"></div></div>'),e.put("app/answer/Partials/addAnswer.html",'<div class="container"><div class="well-sm"><h3 class="sub-header">{{vm.ranking}} <span class="nomargin"><button type="button" class="btn btn-default pull-right" style="vertical-align:middle;" ng-click="vm.closeRank()"><span class="glyphicon glyphicon-remove" style="padding-top:0px;padding-bottom:0px;" aria-hidden="true"></span></button></span></h3></div></div><div class="row"><h4>Add a new answer</h4></div><div class="text-right"><p class="hiw" ng-click="vm.showHowItWorksDialog()"><u>How it works?</u></p></div><br><div class="row"><div class="col-sm-12 col-md-5"><div class="" ng-show="{{vm.type != \'Short-Phrase\'}}"><a href="{{vm.imageURL}}" class="thumbnail"><img src="{{vm.imageURL}}" alt="{{image.errorLoading}}" style="width:100%; max-height:300px"></a></div><div class="" ng-show="{{vm.type == \'Short-Phrase\'}}"><div class="container-answer" style="width:100%; max-height:300px;"></div><p>Background Image</p></div><div class="form-group text-right"><button type="submit" class="btn btn-primary {{vm.searchDisabled}}" ng-click="vm.callSearchImage()" ng-show="{{vm.type != \'Short-Phrase\'}}">{{vm.imageCommand}}</button> <button type="submit" class="btn btn-primary" ng-click="vm.viewPrev()" ng-disabled="vm.numLinks === 0" style="display:{{vm.imagefunctions}}">&laquo</button> <button type="submit" class="btn btn-primary" ng-click="vm.viewNext()" ng-disabled="vm.numLinks === 0" style="display:{{vm.imagefunctions}}">&raquo</button> <a style="display:{{vm.imagefunctions}}">{{vm.linkIdx+1}} of {{vm.numLinks}}</a></div></div><form class="form-horizontal col-sm-10 col-md-6" role="form" name="answerForm"><div class="form-group" ng-repeat="x in vm.fields"><label class="col-sm-4 col-md-4 control-label capitalize">{{x.isrequired ? \'**\':\'\'}}{{x.label}}:</label><div class="col-sm-8 col-md-8"><input class="form-control" ng-model="x.val" bs-options="{{x.opts}}" bs-typeahead="" type="{{x.textstyle}}" bs-typeahead-on-select="vm.onSelect(x.val)" placeholder="{{x.label}}" ng-hide="{{x.name==\'addinfo\'}}"><textarea class="form-control" ng-model="x.val" placeholder="{{x.label}}" ng-show="{{x.name==\'addinfo\'}}" rows="3"></textarea></div></div><div class="row form-group"><div class="text-right"><button ng-click="vm.rankSummary()" class="btn btn-danger">Cancel</button><button type="submit" class="btn btn-success" ng-click="vm.callAddAnswer()">Add</button></div></div></form></div>'),e.put("app/answer/Partials/answerDetail.html",'<div class="container"><div class="well-sm"><h3 class="sub-header">{{vm.ranking}} <span class="nomargin"><button type="button" class="btn btn-default pull-right" style="vertical-align:middle;" ng-click="vm.closeRank()"><span class="glyphicon glyphicon-remove" style="padding-top:0px;padding-bottom:0px;" aria-hidden="true"></span></button></span></h3></div></div><div class="row"><div><h3><span ng-repeat="f in vm.fields" ng-show="{{vm.type != \'Short-Phrase\'}}">{{(f.name == "name" && vm.answer.name) ? vm.answer.name : ""}}</span></h3><strong>{{(vm.answer.location) ? \'Address:\' : ""}}</strong> {{(vm.answer.location) ? vm.answer.location : ""}}<br style="display:{{(vm.answer.location) ? \'inline\' : \'none\'}}"><strong>{{(vm.answer.cityarea) ? \'Neighboorhood:\' : ""}}</strong> {{(vm.answer.cityarea) ? vm.answer.cityarea : ""}}<br style="display:{{(vm.answer.cityarea) ? \'inline\' : \'none\'}}"><small class="text-muted">&nbsp;&nbsp;&nbsp{{vm.answer.views}}&nbspviews</small></div><br style="display:{{vm.answer.addinfo ? \'inline\':\'none\'}}"><div class="col-md-6 col-lg-6"><p style="display:{{vm.type == \'Short-Phrase\' ? \'none\':\'inline\'}}">{{vm.answer.addinfo}}</p><br style="display:{{vm.answer.addinfo ? \'inline\':\'none\'}}"><img class="displayed" src="{{vm.answer.imageurl}}" alt="Moustiers Sainte Marie" style="width:100%;height:300px" ng-click="vm.showUrl()" ng-show="{{vm.type != \'Short-Phrase\'}}"><div class="container-answer" style="width:100%; max-height:300px;" ng-show="{{vm.type == \'Short-Phrase\'}}"><br><h2 style="text-align:center"><strong>{{vm.answer.name}}</strong></h2><br><h4 style="text-align:center">{{vm.answer.addinfo}}</h4></div><br><br><p>Vote up if you support this answer in this ranking. Vote down if this answer is weak and does not belong in this ranking.</p><div class="row" id="likerow"><label style="width:10%" class="col-md-1 col-lg-1"><font size=""></font></label> <img style="width:20%" class="img-circle col-md-1 col-lg-1 cursor" src="../../../assets/images/{{vm.answer.thumbUp}}" ng-click="vm.UpVote()"> <label style="width:20%" class="col-md-1 col-lg-1"><font size="5">{{vm.catans.upV}}</font></label> <img style="width:20%" class="img-circle col-md-1 col-lg-1 cursor" src="../../../assets/images/{{vm.answer.thumbDn}}" ng-click="vm.DownVote()"> <label style="width:20%" class="col-md-1 col-lg-1"><font size="5">{{vm.catans.downV}}</font></label> <label style="width:10%" class="col-md-1 col-lg-1"><font size=""></font></label></div><br><button type="button" class="btn btn-primary btn-block" ng-click="vm.editAnswer()">Edit {{vm.numEdits > 0? "("+vm.numEdits+")" : ""}}</button><br><a ng-click="vm.goBack()" class="btn btn-success">Back</a><div class="btn-group"><button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown">Flag<span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li><a id="action-x" ng-click="vm.flagAnswer(1)">Flag Offensive</a></li><li><a id="action-y" ng-click="vm.flagAnswer(2)">Flag Duplicated</a></li></ul></div><a ng-click="vm.deleteAnswer()" class="btn btn-danger" style="display:{{vm.deleteButton}}">Delete</a><br><br></div><div class="col-md-6 col-lg-6"><div ng-repeat="x in vm.specialsList"><div ng-bind-html="x.html" style="{{x.style}}"><br></div></div><table class="table table-hover cursor" id="mytable"><tbody><thead><tr><th>Pct (%)</th><th>vs. Opponent</th><th>Pct (%)</th><th>GP</th></tr></thead><tbody><tr ng-repeat="x in vm.relativetable | orderBy:\'-Rank\'" ng-click="vm.refresh(x.id)"><td align="middle">{{x.PctF}}</td><td align="middle">{{x.vsName}}</td><td align="middle">{{x.PctC}}</td><td align="middle">{{x.GP}}</td></tr></tbody></tbody></table><p class="text-left" ng-show="vm.otherRanksExist"><strong>{{vm.answer.name}}</strong> is also feautured in the following ranks:</p><br><div ng-repeat="r in vm.otherRanks"><p ng-click="vm.rankSel(r)">{{r.title}}</p></div></div></div><br>'),e.put("app/answer/Partials/editAnswer.html",'<div class="container"><div class="well-sm"><h3 class="sub-header">{{vm.ranking}} <span class="nomargin"><button type="button" class="btn btn-default pull-right" style="vertical-align:middle;" ng-click="vm.closeRank()"><span class="glyphicon glyphicon-remove" style="padding-top:0px;padding-bottom:0px;" aria-hidden="true"></span></button></span></h3></div></div><div class="row"><div class="col-sm-6"><h3>Edit Answer Profile</h3></div><div class="col-sm-6 text-right"><p class="hiw" ng-click="vm.showHowItWorksDialog()"><u>How it Works</u></p></div></div><br><div class="row"><div class="col-sm-12 col-md-6"><div class=""><img class="displayed-uc" src="{{vm.imageURL}}" alt="{{image.errorLoading}}" style="width:100%; max-height:300px" ng-show="{{vm.type != \'Short-Phrase\'}}"></div><div class="container-answer" style="width:100%; max-height:300px;" ng-show="{{vm.type == \'Short-Phrase\'}}"><br><h2 style="text-align:center"><strong>{{vm.answer.name}}</strong></h2><br><h4 style="text-align:center">{{vm.answer.addinfo}}</h4></div><br><button type="submit" class="btn btn-primary" ng-click="vm.editImage()">{{vm.imageCommand}}</button> <button type="submit" class="btn btn-primary" ng-click="vm.viewPrev()" style="display:{{vm.imagefunctions}}">&laquo</button> <button type="submit" class="btn btn-primary" ng-click="vm.viewNext()" style="display:{{vm.imagefunctions}}">&raquo</button> <a style="display:{{vm.imagefunctions}}">{{vm.linkIdx+1}} of {{vm.numLinks}}</a> <button type="submit" class="btn btn-success" ng-click="vm.selectImage()" style="display:{{vm.imagefunctions}}">Select</button></div><form class="form-horizontal col-sm-12 col-md-6" role="form" name="answerForm"><div class="form-group" ng-repeat="x in vm.fields"><label class="control-label capitalize">{{x.label}}:</label><div class="input-group" style="display:{{x.field!=\'addinfo\' ? \'inline\':\'none\'}}"><input class="form-control" ng-model="x.val" bs-options="{{x.opts}}" bs-typeahead="" type="text" placeholder="{{x.cval}}"> <span class="input-group-btn text-right"><button class="btn btn-primary" type="button" ng-click="vm.editField(x)">Edit</button></span></div><div class="input-group" style="display:{{x.field==\'addinfo\' ? \'inline\':\'none\'}}"><textarea class="form-control" ng-model="x.val" placeholder="{{x.cval}}" rows="5"></textarea> <span class="input-group-btn text-right"><button class="btn btn-primary" type="button" ng-click="vm.editField(x)">Edit</button></span></div></div></form></div><br><div class="well well-light-edit" ng-repeat="x in vm.edits"><p><strong>{{x.username}}</strong> has edited the <strong class="capitalize"><em>{{x.field}}</em></strong> of <strong><em>{{x.name}}</em></strong> to <strong><em>{{x.nval}}</em></strong>.</p><img src="{{x.imageURL}}" "="" class="displayed" style="height:150px;display:{{x.display}}"><div class="row form-group"><div class="text-center"><label>{{x.upV}}</label> <label></label> <button class="btn btn-primary {{x.agree}}" ng-click="vm.editAgree(x, $index)">Agree</button> <button type="submit" class="btn btn-primary {{x.disagree}}" ng-click="vm.editDisagree(x, $index)">Disagree</button> <label></label> <label>{{x.downV}}</label></div></div></div><div class="text-center"><a ng-click="vm.answerDetail()" class="btn btn-success">Back</a></div><br>'),e.put("app/content/partials/content.html",'<div class="input-group" style="width:100%"><div class="text-center" style="display:{{vm.isAdmin ? \'inline\':\'none\'}}"><div class="btn-group col-sm-6 col-md-6"><button class="btn btn-primary {{vm.selEditRank}}" ng-click="vm.editRank()">Edit Mode</button> <button class="btn btn-primary {{vm.selViewRank}}" ng-click="vm.viewRank()">View Mode</button></div><button class="btn btn-danger" ng-click="vm.applyRule()">apply Rule</button></div><br style="display:{{vm.isAdmin ? \'inline\':\'none\'}}"><br style="display:{{vm.isAdmin ? \'inline\':\'none\'}}"><br style="display:{{vm.isAdmin ? \'inline\':\'none\'}}"><input class="form-control" ng-model="vm.val" type="text" placeholder="Search San Diego" ng-change="vm.switchArray()"></div><div class="container"><div ng-repeat="x in vm.resultsT"><h4 ng-click="vm.rankSelT(x, $index)">{{x.title}} <small class="text-muted">&nbsp;&nbsp;&nbsp;&nbsp;{{x.answers}}&nbspanswers-{{x.views}}&nbspviews</small></h4></div></div><div class="span22" ng-show="vm.showR"><div ui-view=""></div></div><div class="container"><div ng-repeat="x in vm.resultsB"><h4 ng-click="vm.rankSelB(x, $index)">{{x.title}} <small class="text-muted">&nbsp;&nbsp;&nbsp;&nbsp;{{x.answers}}&nbspanswers-{{x.views}}&nbspviews</small></h4></div></div>'),e.put("app/customer/Partials/customer.html",'<div ui-view="navbar"></div><br><h2>Select business you wish to manage</h2><div ng-repeat="x in vm.answers"><label><input type="radio" name="businessradio" ng-click="vm.selAnswer(x)">&nbsp;&nbsp;{{x.name}}, {{x.location}}, {{x.cityarea}}</label></div><br><div class="text-center"><div class="btn-group col-sm-6 col-md-6"><button class="btn btn-success {{vm.loadMainPhoto}}" ng-click="vm.loadMainPhoto()">Main Photo</button> <button class="btn btn-primary {{vm.loadSpecials}}" ng-click="vm.loadSpecials()">Specials</button> <button class="btn btn-danger {{vm.loadPhotoGallery}}" ng-click="vm.loadPhotoGallery()">Photo Gallery</button></div></div><br><br><div ui-view=""></div><br><br><footer class="footer"><div class="container"><p class="text-muted">Rank-X is property of Rank-X LLC. San Diego, CA - 2016</p></div></footer>'),e.put("app/customer/Partials/editspecial.html",'<h1>{{ vm.isEdit ? \'Edit Special\':\'Add Special\'}}</h1><br><div class="well"><div class="row"><div class="col-sm-4 col-md-4"><p class="text-right">Specials Title:</p></div><div class="col-sm-4 col-md-4"><input class="form-control" ng-model="vm.sp.stitle" type="text" placeholder="Special Banner" ng-change="vm.displayCharLength()" maxlength="25" style="background-color:{{vm.sp.bc}};color:{{vm.sp.fc}}"></div><div class="col-sm-4 col-md-4"><p class="text-left">{{vm.char}} chars left</p></div></div><br><div class="row"><div class="col-sm-6 col-md-4"><p class="text-right">Background Color</p></div><div class="col-sm-1 col-md-1"><color-picker ng-model="vm.sp.bc" color-picker-swatch="true" color-picker-swatch-pos="\'left\'" color-picker-swatch-bootstrap="true" color-picker-swatch-only="true"></color-picker></div><div class="col-sm-6 col-md-1"><p class="text-right">Font Color</p></div><div class="col-sm-1 col-md-1"><color-picker ng-model="vm.sp.fc" color-picker-swatch="true" color-picker-swatch-pos="\'left\'" color-picker-swatch-bootstrap="true" color-picker-swatch-only="true"></color-picker></div></div><h4>Schedule</h4><div class="btn-group col-sm-6 col-md-6"><button class="btn btn-primary {{vm.sp.freq == \'onetime\'? \'active\':\'\'}}" ng-click="vm.frequencySel(1)">One-Time</button> <button class="btn btn-primary {{vm.sp.freq == \'weekly\'? \'active\':\'\'}}" ng-click="vm.frequencySel(2)">Weekly</button></div><br><br><br><div class="row"><div class="col-sm-2 col-md-2 col-lg-1" style="display:{{vm.onetime ? \'inline\':\'none\'}}"><p class="text-right">Start date:</p></div><div class="col-sm-2 col-md-2 col-lg-1" style="display:{{vm.onetime ? \'inline\':\'none\'}}"><datepicker date-format="EEE MMM d y" date-year-title="selected title------"><input ng-model="vm.sp.sdate" type="text"></datepicker></div><div class="col-sm-2 col-md-2 col-lg-1" style="display:{{vm.onetime ? \'inline\':\'none\'}}"><p class="text-right">Start time:</p></div><div class="col-sm-2 col-md-2 col-lg-1" style="display:{{vm.onetime ? \'inline\':\'none\'}}"><select ng-model="vm.sp.stime" ng-options="x for x in vm.timeDD"><option value="">{{vm.sp.stime}}</option></select></div><div class="col-sm-2 col-md-2 col-lg-1" style="display:{{vm.onetime ? \'inline\':\'none\'}}"><p class="text-right">End date:</p></div><div class="col-sm-2 col-md-2 col-lg-1" style="display:{{vm.onetime ? \'inline\':\'none\'}}"><datepicker date-format="EEE MMM d y" date-year-title="selected title------"><input ng-model="vm.sp.edate" type="text"></datepicker></div><div class="col-sm-2 col-md-2 col-lg-1" style="display:{{vm.onetime ? \'inline\':\'none\'}}"><p class="text-right">End time:</p></div><div class="col-sm-2 col-md-2 col-lg-1" style="display:{{vm.onetime ? \'inline\':\'none\'}}"><select ng-model="vm.sp.etime" ng-options="x for x in vm.timeDD"><option value="">{{vm.sp.etime}}</option></select></div></div><div class="row"><div class="col-sm-12 col-md-4" style="display:{{vm.weekly ? \'inline\':\'none\'}}"><label class="checkbox-inline"><input type="checkbox" ng-model="vm.sp.mon" value="">Mon</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.sp.tue" value="">Tue</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.sp.wed" value="">Wed</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.sp.thu" value="">Thu</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.sp.fri" value="">Fri</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.sp.sat" value="">Sat</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.sp.sun" value="">Sun</label></div><div class="col-sm-2 col-md-2 col-lg-1" style="display:{{vm.weekly ? \'inline\':\'none\'}}"><p class="text-right">Start time:</p></div><div class="col-sm-2 col-md-2 col-lg-1" style="display:{{vm.weekly ? \'inline\':\'none\'}}"><select ng-model="vm.sp.stime2" ng-options="x for x in vm.timeDD"><option value="">{{vm.sp.stime2}}</option></select></div><div class="col-sm-2 col-md-2 col-lg-1" style="display:{{vm.weekly ? \'inline\':\'none\'}}"><p class="text-right">End time:</p></div><div class="col-sm-2 col-md-2 col-lg-1" style="display:{{vm.weekly ? \'inline\':\'none\'}}"><select ng-model="vm.sp.etime2" ng-options="x for x in vm.timeDD"><option value="">{{vm.sp.etime2}}</option></select></div></div><br><div class="row"><div class="col-sm-0 col-md-3 col-lg-3"></div><div class="container col-sm-12 col-md-6 col-lg-6"><p>Event Details</p><textarea class="form-control" ng-model="vm.sp.details" placeholder="{{x.label}}" rows="4" style="background-color:{{vm.sp.bc}};color:{{vm.sp.fc}};width:100%"></textarea></div><div class="col-sm-0 col-md-3 col-lg-3"></div><br></div><br><div class="form-group text-center"><button type="button" class="btn btn-success" ng-click="vm.goBack()">Back</button> <button type="button" class="btn btn-primary" ng-click="vm.showPreview()">Preview</button> <button type="button" class="btn btn-danger" ng-click="vm.deleteSpecial()" style="display:{{vm.isEdit ? \'inline\':\'none\'}}">Delete</button></div></div>'),e.put("app/customer/Partials/mainphoto.html","<h1>Main Photo</h1>"),e.put("app/customer/Partials/photogallery.html","<h1>Photo Gallery</h1>"),e.put("app/customer/Partials/specials.html",'<h1>Specials</h1><label>{{vm.specialsList.length > 0? \'Choose a special to Edit\':\'There are no specials registered to this answer\'}}</label><div ng-repeat="x in vm.specialsList"><label><input type="radio" name="specialradio" ng-click="vm.selSpecial(x)">&nbsp;&nbsp;{{x.stitle}}, {{x.freq}}</label></div><br><button ng-click="vm.addSpecial()" class="btn btn-primary">Add Special</button>'),e.put("app/layout/Partials/about.html",'<div ui-view="navbar"></div><div class="container"><div class="jumbotron"><br><div class="row"><div class="col-sm-0 col-md-2 col-lg-3"></div><div class="col-sm-12 col-md-8 col-lg-6"><img src="../../../assets/images/rankxlogo.png" class="displayed-uc" alt="Cinque Terre" style="width:100%;max-height:200px"></div><div class="col-sm-0 col-md-2 col-lg-3"></div></div><br><br><p>Rank-X collects users preferences to generate truly collective rankings on all things that are important to you.</p><br></div><div class="well"><div class="form-group text-left"><p>San Diego, CA - 2016</p><p>Contact: contact@rank-x.com</p></div></div><br><div class="form-group text-center"><button type="button" class="btn btn-primary" ng-click="vm.goBack()">Back</button></div></div><footer class="footer"><div class="container"><p class="text-muted">Rank-X is property of Rank-X LLC. San Diego, CA - 2016</p></div></footer>'),e.put("app/layout/Partials/layout.html",'<div ui-view="navbar"></div><div class="container"><div id="veil" ng-show="vm.isLoading"></div><div id="feedLoading" ng-show="vm.isLoading">Loading...</div><div class="container-fluid" ng-hide="vm.isLoading"><br><br><div class="row"><div class="col-sm-0 col-md-1 col-lg-1"></div><div class="col-sm-12 col-md-10 col-lg-10"><img src="../../../assets/images/rankxlogosd.png" title="{{selectedCity.name}}" alt="{{selectedCity.name}}" style="width:100%;max-height:250px"></div><div class="col-sm-0 col-md-1 col-lg-1"></div></div><br><div ui-view=""></div><br></div></div><br><footer class="footer"><div class="container"><p class="text-muted">Rank-X is property of Rank-X LLC. San Diego, CA - 2016</p></div></footer>'),e.put("app/layout/Partials/navbar.html",'<nav class="navbar navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#">RANK-X</a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right" ng-show="vm.user"><li><a href=""><i class="fa fa-user"></i> Welcome {{vm.user.first_name}}</a></li></ul><ul class="nav navbar-nav navbar-right"><li ng-show="!vm.isLoggedIn"><a href="#/login">Login</a></li><li ng-show="vm.isLoggedIn"><a href="" ng-click="vm.logout()">Logout</a></li></ul><ul class="nav navbar-nav navbar-right"><li><a href="" ng-click="vm.gotoAbout()">About</a></li><li><a href="" ng-click="vm.gotoAdmin()">Admin</a></li><li><a href="" ng-click="vm.gotoCustomer()">Customer</a></li><li><a href="" ng-click="vm.openCitySelection()"><i style="color: #FFF;font-size: 20px" class="fa fa-map-marker"></i> {{selectedCity.name || \'Select City\'}}</a></li></ul></div></div></nav>'),
e.put("app/login/partials/login.html",'<div class="panel panel-primary signin-card"><div class="panel-heading"><h1 class="text-center">Rank - Futbol</h1></div><div class="panel-body"><form ng-submit="vm.submit()"><div class="form-group text-center"><button type="button" class="btn btn-primary form-control" ng-click="vm.redirectForFacebook()"><i class="fa fa-facebook"></i> Login</button></div><br><p class="hiw" ng-click="vm.whyFacebookDialog()"><u>{{"whyFacebook" | translate}}</u></p></form></div></div>'),e.put("app/login/partials/register.html",'<div class="panel panel-primary signin-card"><div class="panel-heading"><h1 class="text-center">Register</h1></div><div class="panel-body"><form name="registerForm"><div class="form-group"><label>First Name</label> <input type="text" name="firstName" class="form-control" ng-model="vm.firstName"></div><div class="form-group"><label>Last Name</label> <input type="text" name="lastName" class="form-control" ng-model="vm.lastName"></div><div class="form-group"><label>Email</label> <input type="email" class="form-control" ng-model="vm.username"></div><div class="form-group"><label>Password</label> <input type="password" name="password" class="form-control" ng-model="vm.password"></div><div class="form-group"><label>Confirm Password</label> <input type="password" name="confirm" class="form-control" ng-model="vm.confirm"></div><div class="form-group text-right"><button type="submit" class="btn btn-primary" ng-click="vm.signIn()">Sign In</button> <button type="button" class="btn btn-primary" ng-click="vm.register()">Register</button></div></form></div></div>'),e.put("app/rank/Partials/RankChat.html",'<div class="container"><div class="row"><div class="col-md-6"><h1 class="page-heading">This is a test</h1></div></div></div>'),e.put("app/rank/Partials/RankSummary.html",'<div class="container"><div class="well-sm"><h3 class="sub-header">{{vm.ranking}} <span class="nomargin"><button type="button" class="btn btn-default pull-right" style="vertical-align:middle;" ng-click="vm.closeRank()"><span class="glyphicon glyphicon-remove" style="padding-top:0px;padding-bottom:0px;" aria-hidden="true"></span></button></span></h3></div></div><div class="text-center"><a href="http://twitter.com/home?status=" title="Share in Twitter" target="_blank" class="btn btn-twitter"><i class="fa fa-twitter"></i></a><a href="https://www.facebook.com/sharer/sharer.php" title="Share in Facebook" target="_blank" class="btn btn-facebook"><i class="fa fa-facebook">acebook</i></a><a href="https://plus.google.com/share?url=" title="Share in Google+" target="_blank" class="btn btn-googleplus"><i class="fa fa-google-plus"></i></a></div><div class="row"><div class="btn-group col-sm-6 col-md-6"><button class="btn btn-primary {{vm.selOverall}}" ng-click="vm.rankOverall()">Overall</button> <button class="btn btn-primary {{vm.selPersonal}}" ng-click="vm.rankPersonal()">Personal</button></div><div class="btn-group text-right col-sm-6 col-md-6"><h4>Contributors: <b style="color:blue;"><i>{{vm.numContributors}}</i></b></h4></div></div><div class="text-center"><button ng-click="vm.goRank()" class="btn btn-success">Go Rank</button></div><br><table class="table table-hover cursor"><tbody><thead><tr><th>Rank</th><th class="capitalize" ng-repeat="h in vm.fields | filter:(h.isrequired=true)">{{h.label}}</th><th ng-show="{{vm.type == \'Establishment\'}}">Distance</th><th ng-show="{{vm.type == \'Establishment\'}}">Specials</th></tr></thead><tbody><tr ng-repeat="x in vm.answers | orderBy: \'-Rank\'" ng-click="vm.answerDetail(x.id)"><td>{{$index+1}}</td><td ng-repeat="h in vm.fields | filter:(h.isrequired=true)">{{ x[h.name]}}</td><td ng-show="{{vm.type == \'Establishment\'}}">0.5</td><td ng-show="{{vm.type == \'Establishment\'}}" class="{{x.style}}">{{x.specials}}</td></tr></tbody></tbody></table><div class="row"><div class="col-sm-1"><a class="btn btn-primary" ng-click="vm.addAnswer()">+</a></div><div class="col-sm-11" style="display:{{vm.addInfoMsgAck == false ? \'inline\':\'none\'}}"><div class="alert alert-warning" style="padding-top: 5px;padding-bottom: 5px;"><a class="close" data-dismiss="alert" aria-label="close" ng-click="vm.closeAddInfoMsg()">&times;</a> <span class="glyphicon glyphicon-arrow-left"></span><strong>&nbsp;&nbsp;Are we missing one?</strong>&nbsp;&nbsp;Use the \'+\' button to add a new answer.</div></div></div><br><br>'),e.put("app/rank/Partials/editRanking.html",'<div class="container"><div class="well-sm"><h3 class="sub-header">{{vm.ranking}} <span class="nomargin"><button type="button" class="btn btn-default pull-right" style="vertical-align:middle;" ng-click="vm.closeRank()"><span class="glyphicon glyphicon-remove" style="padding-top:0px;padding-bottom:0px;" aria-hidden="true"></span></button></span></h3></div></div><h4>Edit Ranking</h4><br><label><strong>Title:</strong></label> <input class="form-control" ng-model="vm.rankTitle" type="text" placeholder="{{vm.rankTitle}}"> <label><strong>Question:</strong></label> <input class="form-control" ng-model="vm.question" type="text" placeholder="{{vm.question}}"> <label><strong>Tags:</strong></label> <input class="form-control" ng-model="vm.tags" type="text" placeholder="{{vm.tags}}"> <label><strong>Keywords:</strong></label> <input class="form-control" ng-model="vm.keywords" type="text" placeholder="{{vm.keywords}}"> <label><strong>Type:</strong></label> <input class="form-control" ng-model="vm.type" bs-typeahead="" type="text" placeholder="{{vm.type}}" bs-options="c for c in vm.typeList"><br><div class="form-group text-right"><button type="button" class="btn btn-primary" ng-click="vm.goEdit()">Edit</button> <button type="button" class="btn btn-danger" ng-click="vm.goDelete()">Delete</button></div><br>'),e.put("app/rank/Partials/match.html",'<div class="container"><div class="well-sm"><h3 class="sub-header">{{vm.ranking}} <span class="nomargin"><button type="button" class="btn btn-default pull-right" style="vertical-align:middle;" ng-click="vm.closeRank()"><span class="glyphicon glyphicon-remove" style="padding-top:0px;padding-bottom:0px;" aria-hidden="true"></span></button></span></h3></div></div><h3>{{vm.table.question}}</h3><div class="form-group text-center"><div class="well well-dark">Match <strong>{{vm.GP + 1}}</strong> of <strong>{{vm.Tot}}</strong></div></div><div class="row"><div class="col-xs-6 col-md-6 col-lg-6"><div class="well well-light" ng-click="vm.selectAnswer(1)" ng-show="{{vm.type != \'Short-Phrase\'}}"><span ng-repeat="f in vm.fields | filter:(f.isrequired=true)">{{(f.name == "name" && vm.answer1.name) ? vm.answer1.name : ""}} {{(f.name == "cityarea" && vm.answer1.cityarea) ? " - "+ vm.answer1.cityarea : ""}}</span></div><img class="displayed" src="{{vm.answer1.imageurl}}" ng-click="vm.selectAnswer(1)" style="width:100%;max-height:300px" ng-show="{{vm.type != \'Short-Phrase\'}}"><div class="container-answer" style="width:100%; max-height:300px;" ng-click="vm.selectAnswer(1)" ng-show="{{vm.type == \'Short-Phrase\'}}"><br><h2 style="text-align:center"><strong>{{vm.answer1.name}}</strong></h2><br><h4 style="text-align:center">{{vm.answer1.addinfo}}</h4></div></div><div class="col-xs-6 col-md-6 col-lg-6"><div class="well well-light" ng-click="vm.selectAnswer(2)" ng-show="{{vm.type != \'Short-Phrase\'}}"><span ng-repeat="f in vm.fields | filter:(f.isrequired=true)">{{(f.name == "name" && vm.answer2.name) ? vm.answer2.name : ""}} {{(f.name == "cityarea" && vm.answer2.cityarea) ? " - "+ vm.answer2.cityarea : ""}}</span></div><img class="displayed" src="{{vm.answer2.imageurl}}" ng-click="vm.selectAnswer(2)" style="width:100%;max-height:300px" ng-show="{{vm.type != \'Short-Phrase\'}}"><div class="container-answer" style="width:100%; max-height:300px;" ng-click="vm.selectAnswer(2)" ng-show="{{vm.type == \'Short-Phrase\'}}"><br><h2 style="text-align:center"><strong>{{vm.answer2.name}}</strong></h2><br><h4 style="text-align:center">{{vm.answer2.addinfo}}</h4></div></div></div><br><div class="row"><div class="form-group text-left col-xs-6 col-md-6 col-lg-6"><button ng-click="vm.answerDetail(1)" type="button" class="btn btn-success">Details</button></div><div class="form-group text-right col-xs-6 col-md-6 col-lg-6"><button ng-click="vm.answerDetail(2)" type="button" class="btn btn-success">Details</button></div></div><div class="form-group text-center"><button ng-click="vm.skipMatch()" type="button" class="btn btn-default">I don\'t know, Skip</button> <button ng-click="vm.rankSummary()" type="button" class="btn btn-danger">Stop</button></div><br>')}]);