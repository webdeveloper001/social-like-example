angular.module("app").run(["$templateCache",function($templateCache){$templateCache.put("app/admin/Partials/admin.html",'<div ui-view="navbar"></div><br><div ng-if="!vm.dataready"><h2>Please wait, loading all admin data...</h2></div><div ng-if="vm.dataready"><div class="text-center" ng-if="vm.isAdmin"><div class="btn-group"><button class="btn btn-default {{vm.selKeywords}}" ng-click="vm.keywords()">Searched-Keyword</button> <button class="btn btn-default {{vm.selViews}}" ng-click="vm.views()">Ranking-Answers Views</button> <button class="btn btn-default {{vm.selFlags}}" ng-click="vm.flags()">Answer Flags</button> <button class="btn btn-default {{vm.selAddRanking}}" ng-click="vm.addRank()">Add Ranking</button> <button class="btn btn-default {{vm.selDbMaint}}" ng-click="vm.dbMaint()">dB Maint</button> <button class="btn btn-default {{vm.selQuery}}" ng-click="vm.dbQuery()">Query</button> <button class="btn btn-default {{vm.selSibLocs}}" ng-click="vm.sibLocs()">Sibbling Locations</button> <button class="btn btn-default {{vm.selFoodRanks}}" ng-click="vm.foodranks()">Food Ranks</button> <button class="btn btn-default {{vm.selPayment}}" ng-click="vm.payment()">Payment</button> <button class="btn btn-default {{vm.selPlan}}" ng-click="vm.plan()">Plan</button> <button class="btn btn-default" ng-click="vm.bizAdmin()">Business</button> <button class="btn btn-default" ng-click="vm.cleanDB()">Clean DB</button> <button class="btn btn-default" ng-click="vm.modImages()">Moderate Images</button> <button class="btn btn-default" ng-click="vm.staticPages()">Static Pages</button> <button class="btn btn-default {{vm.selLocations}}" ng-click="vm.golocations()">Locations</button> <button class="btn btn-default {{vm.selsitemap}}" ng-click="vm.gositemap()">Sitemap</button> <button class="btn btn-danger" ng-click="vm.applyRule()">Apply Rule</button></div></div><div ng-if="vm.dataAdmin"><button class="btn btn-default {{vm.selQuery}}" ng-click="vm.dbQuery()">Query</button> <button class="btn btn-default {{vm.selSibLocs}}" ng-click="vm.sibLocs()">Sibbling Locations</button></div><div ng-if="vm.modAdmin"><button class="btn btn-default" ng-click="vm.modImages()">Moderate Images</button> <button class="btn btn-default" ng-click="vm.staticPages()">Static Pages</button></div></div><br><br><div ui-view=""></div><br><br>'),$templateCache.put("app/answer/Partials2/addAnswer.html",'<div class="well-rank" ng-if="vm.nsm" style="margin:0px;"><h2 class="sub-header">{{vm.ranking}} <span class="nomargin"><button type="button" class="glyphicon glyphicon-remove pull-right" style="margin:0px;padding:0px;border:0px;background-color:#006dcc;color:#002699;font-size:medium;" ng-click="vm.closeRank()"></button></span></h2></div><div class="well-rank" ng-if="vm.sm" style="margin:0px;"><h3 class="sub-header">{{vm.ranking}} <span class="nomargin"><button type="button" class="glyphicon glyphicon-remove pull-right" style="margin:0px;padding:0px;border:0px;background-color:#006dcc;color:#002699;font-size:medium;" ng-click="vm.closeRank()"></button></span></h3></div><div class="row" style="margin:0px;"><h4>&nbsp&nbspAdd a new <span ng-if="vm.type == \'Establishment\'"><em>Establishment</em> to this list.</span> <span ng-if="vm.type == \'Organization\'"><em>Organization or Company</em> to this list.</span> <span ng-if="vm.type == \'Person\'"><em>Person</em> to this list.</span> <span ng-if="vm.type == \'PersonCust\'"><em>Professional</em> to this list.</span> <span ng-if="vm.type == \'Place\'"><em>Place</em> to this list.</span> <span ng-if="vm.type == \'Short-Phrase\'"><em>Answer</em> to this list.</span> <span ng-if="vm.type == \'Thing\'"><em>Item</em> to this list.</span> <span ng-if="vm.type == \'Event\'"><em>Event</em> to this list.</span> <span ng-if="vm.type == \'Simple\'"><em>Item</em> to this list.</span></h4></div><div class="text-right"><p class="hiw" ng-click="vm.showHowItWorksDialog()"><u>How it works?</u></p></div><br><div class="row" style="margin:0px;"><form class="form-horizontal col-sm-12 col-md-7" role="form" name="answerForm"><div class="form-group" ng-repeat="x in vm.fields"><label class="control-label capitalize" ng-if="!x.onlybyowner" style="padding-left:10px">{{x.isrequired ? \'**\':\'\'}}{{x.label}}:</label> <input class="form-control" ng-model="x.val" bs-options="{{x.opts}}" bs-typeahead="" type="{{x.textstyle}}" ng-change="vm.onSelect(x)" placeholder="{{x.label}}" ng-hide="{{x.name==\'addinfo\'}}" ng-if="!x.onlybyowner" style="width:94%;margin-left:10px;margin-right:10px;"><textarea class="form-control" ng-model="x.val" placeholder="{{x.label}}" ng-model-options="{debounce: 2500}" ng-show="{{x.name==\'addinfo\'}}" rows="3" ng-if="!x.onlybyowner" id="textarea2" style="width:94%;margin-left:10px;margin-right:10px;"></textarea></div><div class="text-right" ng-if="vm.type == \'Person\'"><button ng-click="vm.getWiki()" class="btn btn-primary" style="background-color:#595959;border-color:black">Get from Wikipedia</button></div></form><div class="col-sm-12 col-md-5" ng-if="!vm.userIsOwner"><div class="" ng-show="{{vm.type != \'Short-Phrase\'}}"><img ng-src="{{vm.imageURL}}" alt="{{image.errorLoading}}" style="width:100%; max-height:300px"> <img ng-src="../../../assets/images/powered_by_google_on_white.png" ng-if="vm.type!=\'PersonCust\'"></div><div class="" ng-show="{{vm.type == \'Short-Phrase\'}}"><div class="container-answer" style="width:100%;height:auto" ng-if="vm.type == \'Short-Phrase\'"><br><h2 style="text-align:center"><strong>{{vm.fields[0].val}}</strong></h2><br><h4 style="text-align:center">{{vm.fields[1].val}}</h4></div></div><div ng-if="vm.type != \'PersonCust\'"><div class="form-group text-right"><button type="submit" class="btn btn-primary {{vm.searchDisabled}}" ng-click="vm.callSearchImage()" ng-show="{{vm.type != \'Short-Phrase\'}}">{{vm.imageCommand}}</button> <button type="submit" class="btn btn-primary" ng-click="vm.viewPrev()" ng-disabled="vm.numLinks === 0" ng-attr-style="display:{{vm.imagefunctions}}">&laquo</button> <button type="submit" class="btn btn-primary" ng-click="vm.viewNext()" ng-disabled="vm.numLinks === 0" ng-attr-style="display:{{vm.imagefunctions}}">&raquo</button> <a ng-attr-style="display:{{vm.imagefunctions}}">{{vm.linkIdx+1}} of {{vm.numLinks}}</a></div><label class="checkbox-inline" ng-show="{{vm.type != \'Short-Phrase\'}}"><input type="checkbox" ng-change="vm.onNoGoodImages(vm.ngi)" ng-model="vm.ngi">No good images were found</label></div><br></div><div class="col-sm-12 col-md-5" ng-if="vm.userIsOwner"><img ng-src="{{vm.imageURL}}" alt="{{image.errorLoading}}" style="width:100%; max-height:300px"><div ng-attr-style="display:{{vm.userIsOwner ? \'inline\':\'none\'}}"><blob-upload></blob-upload></div><br ng-if="vm.sm"></div></div><div class="col-sm-12 col-md-7" style="padding-bottom:10px"><label>Ranks (select all that apply):</label><div ng-if="!vm.nhrdy"><i>Please enter a valid neighborhood</i></div><ul class="list-group" ng-if="vm.nhrdy"><li class="list-group-item" ng-repeat="x in vm.addToRanks" ng-click="vm.selRank(x,$index)" style="color:{{x.sel?\'black\':\'lightgrey\'}};cursor:pointer;"><i ng-if="x.sel" class="fa fa-check"></i>&nbsp{{x.title}}</li></ul><div ng-if="vm.addRanksEnable" style="padding-top:10px"><div class="text-left"><button class="btn btn-primary" ng-if="!vm.addctsactive" ng-click="vm.addCatans()">Add More Ranks</button></div><div class="input-group" ng-if="vm.addctsactive"><input type="text" class="form-control" ng-model="vm.addctsval" bs-options="c for c in vm.addctsopts" bs-typeahead=""> <span class="input-group-btn text-right"><button class="btn btn-success" type="button" ng-click="vm.addcts()">Add</button></span></div></div></div><div class="col-sm-12 col-md-12 form-group" style="margin:0px;"><div class="text-center"><button ng-click="vm.rankSummary()" class="btn btn-danger">Cancel</button><button type="submit" class="btn btn-success" ng-click="vm.callAddAnswer()">Add Answer</button></div></div><br class="hidden-md hidden-lg hidden-xl"><br class="hidden-md hidden-lg hidden-xl"><br class="hidden-md hidden-lg hidden-xl">'),$templateCache.put("app/answer/Partials2/addEvent.html",'<div class="well-rank" ng-if="vm.nsm" style="margin:0px;"><h2 class="sub-header">{{vm.ranking}} <span class="nomargin"><button type="button" class="glyphicon glyphicon-remove pull-right" style="margin:0px;padding:0px;border:0px;background-color:#006dcc;color:#002699;font-size:medium;" ng-click="vm.closeRank()"></button></span></h2></div><div class="well-rank" ng-if="vm.sm" style="margin:0px;"><h3 class="sub-header">{{vm.ranking}} <span class="nomargin"><button type="button" class="glyphicon glyphicon-remove pull-right" style="margin:0px;padding:0px;border:0px;background-color:#006dcc;color:#002699;font-size:medium;" ng-click="vm.closeRank()"></button></span></h3></div><div class="row" style="margin:0px;"><h4>{{ vm.isEdit ? \'Edit Event\':\'Add Event\'}}</h4></div><div class="text-right"><p class="hiw" ng-click="vm.showHowItWorksDialog()"><u>How it works?</u></p></div><br><div class="row" style="margin:0px;"><div class="col-xs-6 col-sm-4 col-md-4"><p class="text-right">** Event Title:</p></div><div class="col-xs-12 col-sm-4 col-md-4"><input class="form-control" ng-model="vm.ev.name" type="text" placeholder="Event Title" ng-change="vm.displayCharLength()" maxlength="45" ng-attr-style="background-color:{{vm.ev.bc}};color:{{vm.ev.fc}}"></div><div class="col-xs-8 hidden-sm hidden-md hidden-lg hidden-xl"></div><div class="col-xs-6 col-sm-4 col-md-4"><p class="text-left">{{vm.char}} chars left</p></div></div><br ng-if="!vm.sm"><div ng-if="!vm.sm"><div class="row" style="margin:0px;"><div class="hidden-xs col-sm-2 col-md-2 col-lg-2"></div><div class="col-xs-6 col-sm-2 col-md-2 col-lg-2"><p class="text-right">Background Color</p></div><div class="col-xs-6 col-sm-2 col-md-2 col-lg-2"><color-picker ng-model="vm.ev.bc" color-picker-swatch="true" color-picker-swatch-pos="\'left\'" color-picker-swatch-bootstrap="true" color-picker-swatch-only="true"></color-picker></div><div class="col-xs-6 col-sm-2 col-md-2 col-lg-2"><p class="text-right">Font Color</p></div><div class="col-xs-6 col-sm-2 col-md-2 col-lg-2"><color-picker ng-model="vm.ev.fc" color-picker-swatch="true" color-picker-swatch-pos="\'left\'" color-picker-swatch-bootstrap="true" color-picker-swatch-only="true"></color-picker></div><div class="hidden-xs col-sm-2 col-md-2 col-lg-2"></div></div></div><br ng-if="!vm.sm"><br><p class="text-left">Frequency</p><div class="btn-group col-sm-6 col-md-6"><button class="btn btn-primary {{vm.ev.freq == \'onetime\'? \'active\':\'\'}}" ng-click="vm.frequencySel(1)">One-Time</button> <button class="btn btn-primary {{vm.ev.freq == \'weekly\'? \'active\':\'\'}}" ng-click="vm.frequencySel(2)">Weekly</button></div><br><br><div class="row" ng-if="vm.onetime" style="margin:0px;"><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><div ng-attr-style="display:{{vm.onetime ? \'inline\':\'none\'}}"><p class="{{vm.sm ? \'text-left\':\'text-right\'}}">Start date:</p></div></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><div ng-attr-style="display:{{vm.onetime ? \'inline\':\'none\'}}"><datepicker date-format="EEE MMM d y" date-year-title="selected title------"><input ng-model="vm.ev.sdate" type="text"></datepicker></div></div></div><div class="row" ng-if="vm.onetime"><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><div ng-attr-style="display:{{vm.onetime ? \'inline\':\'none\'}}"><p class="{{vm.sm ? \'text-left\':\'text-right\'}}">Start time:</p></div></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><div ng-attr-style="display:{{vm.onetime ? \'inline\':\'none\'}}"><select ng-model="vm.ev.stime" ng-options="x for x in vm.timeDD"><option value="">{{vm.sp.stime}}</option></select></div></div></div><div class="row" ng-if="vm.onetime" style="margin:0px;"><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><div ng-attr-style="display:{{vm.onetime ? \'inline\':\'none\'}}"><p class="{{vm.sm ? \'text-left\':\'text-right\'}}">End date:</p></div></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3" ng-attr-style="display:{{vm.onetime ? \'inline\':\'none\'}}"><datepicker date-format="EEE MMM d y" date-year-title="selected title------"><input ng-model="vm.ev.edate" type="text"></datepicker></div></div><div class="row" ng-if="vm.onetime" style="margin:0px;"><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3" ng-attr-style="display:{{vm.onetime ? \'inline\':\'none\'}}"><p class="{{vm.sm ? \'text-left\':\'text-right\'}}">End time:</p></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3" ng-attr-style="display:{{vm.onetime ? \'inline\':\'none\'}}"><select ng-model="vm.ev.etime" ng-options="x for x in vm.timeDD"><option value="">{{vm.sp.etime}}</option></select></div></div><div class="row" ng-if="vm.weekly" style="margin:0px;"><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><div ng-attr-style="display:{{vm.weekly ? \'inline\':\'none\'}}"><p class="{{vm.sm ? \'text-left\':\'text-right\'}}">Start date:</p></div></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><div ng-attr-style="display:{{vm.weekly ? \'inline\':\'none\'}}"><datepicker date-format="EEE MMM d y" date-year-title="selected title------"><input ng-model="vm.ev.sdate" type="text"></datepicker></div></div></div><div class="row" ng-if="vm.weekly" style="margin:0px;"><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><div ng-attr-style="display:{{vm.weekly ? \'inline\':\'none\'}}"><p class="{{vm.sm ? \'text-left\':\'text-right\'}}">End date:</p></div></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3" ng-attr-style="display:{{vm.weekly ? \'inline\':\'none\'}}"><datepicker date-format="EEE MMM d y" date-year-title="selected title------"><input ng-model="vm.ev.edate" type="text"></datepicker></div></div><div class="row" ng-if="vm.weekly" style="margin:0px;"><div class="text-center"><div class="col-xs-12 col-sm-12 col-md-12" ng-attr-style="display:{{vm.weekly ? \'inline\':\'none\'}}"><label class="checkbox-inline"><input type="checkbox" ng-model="vm.ev.mon" value="">Mon</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.ev.tue" value="">Tue</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.ev.wed" value="">Wed</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.ev.thu" value="">Thu</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.ev.fri" value="">Fri</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.ev.sat" value="">Sat</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.ev.sun" value="">Sun</label></div></div></div><br><div class="row" ng-if="vm.weekly" style="margin:0px;"><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"><div ng-attr-style="display:{{vm.weekly ? \'inline\':\'none\'}}"><p class="text-right">Start time:</p></div></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"><div ng-attr-style="display:{{vm.weekly ? \'inline\':\'none\'}}"><select ng-model="vm.ev.stime2" ng-options="x for x in vm.timeDD"><option value="">{{vm.ev.stime2}}</option></select></div></div></div><div class="row" ng-if="vm.weekly" style="margin:0px;"><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"><div ng-attr-style="display:{{vm.weekly ? \'inline\':\'none\'}}"><p class="text-right">End time:</p></div></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"><div ng-attr-style="display:{{vm.weekly ? \'inline\':\'none\'}}"><select ng-model="vm.ev.etime2" ng-options="x for x in vm.timeDD"><option value="">{{vm.ev.etime2}}</option></select></div></div></div><div class="row" style="margin:0px;"><form class="form-horizontal col-xs-12 col-sm-12 col-md-6" role="form" name="answerForm"><div class="form-group" style="padding:5px"><label class="control-label">Venue / Location:</label> <input class="form-control" ng-model="vm.ev.eventloc" bs-typeahead="" bs-options="c for c in vm.locations" type="text" placeholder="{{vm.ev.eventloc.str}}" ng-change="vm.onSelect()"></div><div class="form-group" style="padding:5px"><label class="control-label">Address:</label> <input class="form-control" ng-model="vm.ev.location" type="text" placeholder="{{vm.ev.location}}"></div><div class="form-group" style="padding:5px"><label class="control-label">Neighborhood:</label> <input class="form-control" ng-model="vm.ev.cityarea" bs-typeahead="" bs-options="c for c in vm.neighborhoods" ng-change="vm.onSelectNh()" type="text" placeholder="{{vm.ev.cityarea}}"></div><div class="form-group" style="padding:5px"><label class="control-label">Phone Number:</label> <input class="form-control" ng-model="vm.ev.phone" type="text" placeholder="{{vm.ev.phone}}"></div><div class="form-group" style="padding:5px"><label class="control-label">Event Website:</label> <input class="form-control" ng-model="vm.ev.website" type="text" placeholder="{{vm.ev.website}}"></div><div class="form-group" style="padding:5px"><label class="control-label">Additional Info:</label> <textarea class="form-control" ng-model="vm.ev.addinfo" placeholder="{{vm.ev.addinfo}}" rows="4" ng-attr-style="background-color:{{vm.ev.bc}};color:{{vm.ev.fc}};width:100%"></textarea></div></form><div class="col-xs-12 col-sm-12 col-md-6"><div class="" ng-show="{{vm.type != \'Short-Phrase\'}}"><img src="{{vm.imageURL}}" alt="{{image.errorLoading}}" style="width:100%; max-height:300px"> <img src="../../../assets/images/powered_by_google_on_white.png"></div><div class="form-group text-right"><button type="submit" class="btn btn-primary {{vm.searchDisabled}}" ng-click="vm.callSearchImage()" ng-show="{{vm.type != \'Short-Phrase\'}}">{{vm.imageCommand}}</button> <button type="submit" class="btn btn-primary" ng-click="vm.viewPrev()" ng-disabled="vm.numLinks === 0" ng-attr-style="display:{{vm.imagefunctions}}">&laquo</button> <button type="submit" class="btn btn-primary" ng-click="vm.viewNext()" ng-disabled="vm.numLinks === 0" ng-attr-style="display:{{vm.imagefunctions}}">&raquo</button> <a ng-attr-style="display:{{vm.imagefunctions}}">{{vm.linkIdx+1}} of {{vm.numLinks}}</a></div><label class="checkbox-inline"><input type="checkbox" ng-change="vm.onNoGoodImages(vm.ngi)" ng-model="vm.ngi" ng-show="{{vm.type != \'Short-Phrase\'}}">No good images were found</label></div></div><br><div class="radio"><label><input type="radio" ng-model="vm.nobind" name="optradio" checked="true">Do not bind event to my account, let anyone make changes.</label></div><div class="radio"><label><input type="radio" ng-model="vm.bind" name="optradio">Bind this event to my account, only I can make changes.</label></div><br><div class="row" style="margin:0px;"><div class="form-group text-center"><button type="button" class="btn btn-success" ng-click="vm.goBack()">Back</button> <button type="button" class="btn btn-primary" ng-click="vm.showPreview()">Preview</button> <button type="button" class="btn btn-danger" ng-click="vm.deleteSpecial()" ng-attr-style="display:{{vm.isEdit ? \'inline\':\'none\'}}">Delete</button></div></div>'),$templateCache.put("app/answer/Partials2/answerRanksManager.html",'<h2>Custom Ranks Manager</h2><br><p class="text-left">You have purchased <strong>{{vm.ranksqty}}</strong> ranks that are currently active.</p><table class="table"><tbody><thead style="border-style:none;"><tr><th>Name</th><th></th><th></th></tr></thead><tr ng-repeat="x in vm.ranks" style="cursor:pointer;"><td ng-if="x.used" style="width:80%">{{x.title}}</td><td ng-if="!x.used" style="width:80%;color:#808080"><i>Empty</i></td><td ng-if="x.used" style="width:10%"><button class="btn btn-primary" ng-click="vm.editRank($index)">Edit</button></td><td ng-if="x.used" style="width:10%"><button class="btn btn-danger" ng-click="vm.deleteRank($index)">Delete</button></td><td ng-if="!x.used" style="width:10%"><button class="btn btn-success" ng-click="vm.addRank()">Add</button></td></tr></tbody></table><p class="text-left">Custom ranks are a great way to engage your audience with your products and services.</p><div class="text-center"><button class="btn btn-success">Purchase additional Ranks</button><div class="text-right"><button class="btn btn-default" ng-click="vm.goBack()">Back</button></div></div>'),$templateCache.put("app/answer/Partials2/editAnswer.html",'<div class="well-answer" ng-if="vm.nsm"><h2 class="sub-header">{{vm.answer.name}} <span class="nomargin"><button type="button" class="glyphicon glyphicon-remove pull-right" style="margin:0px;padding:0px;border:0px;background-color:#b3b3b3;color:#4d4d4d;font-size:medium;" ng-click="vm.closeRank()"></button></span></h2></div><div class="well-answer" ng-if="vm.sm"><h3 class="sub-header">{{vm.answer.name}} <span class="nomargin"><button type="button" class="glyphicon glyphicon-remove pull-right" style="margin:0px;padding:0px;border:0px;background-color:#b3b3b3;color:#4d4d4d;font-size:medium;" ng-click="vm.closeRank()"></button></span></h3></div><div class="row" style="margin:0px"><div class="col-sm-6"><h3>Edit Answer Profile</h3></div><div class="col-sm-6 text-right"><p class="hiw" ng-click="vm.showHowItWorksDialog()"><u>How it Works</u></p></div></div><br><div class="row" style="margin:0px"><div class="col-sm-12 col-md-7"><form class="form-horizontal" role="form" name="answerForm" ng-repeat="x in vm.fields"><div ng-attr-style="display:{{x.field!=\'addinfo\' ? \'inline\':\'none\'}}" ng-hide="{{x.onlybyowner && !vm.userIsOwner}}"><label class="control-label capitalize">{{x.label}}:</label><div class="input-group"><input type="text" class="form-control" ng-model="x.val" bs-options="{{x.opts}}" bs-typeahead="" placeholder="{{x.cval}}" ng-change="vm.onSelect(x)"> <span class="input-group-btn text-right"><button class="btn btn-primary" type="button" ng-click="vm.editField(x)">Edit</button></span></div></div><div class="input-group" ng-attr-style="display:{{x.field==\'addinfo\' ? \'inline\':\'none\'}}" ng-hide="{{!vm.access && (vm.type == \'PersonCust\')}}"><label class="control-label capitalize">{{x.label}}:</label> <textarea id="textarea1" class="form-control" ng-model="x.val" placeholder="{{x.cval}}" rows="5" ng-model-options="{debounce: 2500}">\n            </textarea><br><br><span class="input-group-btn text-right"><button ng-click="vm.getWiki()" class="btn btn-primary" style="background-color:#595959;border-color:gray;margin-right:10px" ng-if="vm.type == \'Person\'">Get from Wikipedia</button> <button class="btn btn-primary" type="button" ng-click="vm.editField(x)">Edit</button></span></div></form></div><br><div class="col-sm-12 col-md-5"><div class="" ng-if="vm.type!=\'Short-Phrase\'"><img class="displayed-uc" ng-src="{{vm.imageURL}}" alt="{{image.errorLoading}}" ng-attr-style="width:100%; max-height:300px" ng-show="{{vm.type != \'Short-Phrase\'}}"> <img ng-src="../../../assets/images/powered_by_google_on_white.png" ng-if="vm.type!=\'PersonCust\' && !vm.userIsOwner"></div><div class="container-answer" ng-attr-style="width:100%; max-height:300px;" ng-if="vm.type == \'Short-Phrase\'"><br><h2 style="text-align:center"><strong>{{vm.answer.name}}</strong></h2><br><h4 style="text-align:center">{{vm.answer.addinfo}}</h4></div><br><div ng-if="vm.userIsOwner" ng-attr-style="display:{{vm.userIsOwner ? \'inline\':\'none\'}}"><blob-upload></blob-upload></div><div ng-attr-style="display:{{vm.userIsOwner ? \'none\':\'inline\'}}" ng-if="vm.type!=\'PersonCust\'"><button type="submit" class="btn btn-primary" ng-click="vm.editImage()">{{vm.imageCommand}}</button> <button type="submit" class="btn btn-primary" ng-click="vm.viewPrev()" ng-attr-style="display:{{vm.imagefunctions}}">&laquo</button> <button type="submit" class="btn btn-primary" ng-click="vm.viewNext()" ng-attr-style="display:{{vm.imagefunctions}}">&raquo</button> <a ng-attr-style="display:{{vm.imagefunctions}}">{{vm.linkIdx+1}} of {{vm.numLinks}}</a> <button type="submit" class="btn btn-success" ng-click="vm.selectImage()" ng-attr-style="display:{{vm.imagefunctions}}">Select</button></div><br><label class="checkbox-inline" ng-show="{{vm.type != \'Short-Phrase\'}}"><input type="checkbox" ng-change="vm.onNoGoodImages(vm.ngi)" ng-model="vm.ngi">No good images were found</label></div></div><div class="row"><div class="col-sm-12 col-md-7" style="padding-top:10px"><label>Ranks:</label><ul class="list-group"><li class="list-group-item" ng-repeat="x in vm.answerRanks" style="cursor:pointer;">{{x.title}} <i ng-if="$index>0" class="glyphicon glyphicon-remove pull-right" ng-click="vm.remRank(x)"></i></li></ul><div ng-if="true" style="padding-top:10px"><div class="text-left"><button class="btn btn-primary" ng-if="!vm.addctsactive" ng-click="vm.addCatans()">Add More Ranks</button></div><div class="input-group" ng-if="vm.addctsactive"><input type="text" class="form-control" ng-model="vm.addctsval" bs-options="c for c in vm.addctsopts" bs-typeahead=""> <span class="input-group-btn text-right"><button class="btn btn-success" type="button" ng-click="vm.addcts()">Add</button></span></div></div></div></div><br><div class="well well-light-edit" ng-repeat="x in vm.edits"><div ng-if="x.field != \'addinfo\'"><p><strong>{{x.username}}</strong> has edited the <strong class="capitalize"><em>{{x.field}}</em></strong> of <strong><em>{{x.name}}</em></strong> to <strong><em>{{x.nval}}</em></strong>.</p></div><div ng-if="x.field == \'addinfo\'"><p><strong>{{x.username}}</strong> has edited the information of <strong><em>{{x.name}}</em></strong> to:<br><br>{{x.nval}}.</p></div><img ng-src="{{x.imageURL}}" class="displayed" ng-attr-style="height:150px;display:{{x.display}}"><div class="row form-group"><div class="text-center"><label>{{x.upV}}</label> <label></label> <button class="btn btn-primary {{x.agree}}" ng-click="vm.editAgree(x, $index)">Agree</button> <button type="submit" class="btn btn-primary {{x.disagree}}" ng-click="vm.editDisagree(x, $index)">Disagree</button> <label></label> <label>{{x.downV}}</label></div></div></div><div ng-if="vm.sm && vm.userIsOwner && vm.type == \'Establishment\'"><div class="text-center"><label>Service Hours</label></div><br><div ng-repeat="x in vm.openhours"><div class="container-hours"><div class="row"><div class="col-xs-6 col-sm-6 col-md-2"><p>{{x.day}}:</p></div><div class="col-xs-6 col-sm-6 col-md-2"><select ng-model="x.opn" ng-change="vm.hoursChanged()" ng-options="n for n in vm.openOptions"></select></div></div><div class="row"><div class="col-xs-2 col-sm-2 col-md-2" ng-attr-style="display:{{x.opn==\'OPEN\' ? \'inline\': \'none\'}}"><p class="text-right">From:</p></div><div class="col-xs-4 col-sm-4 col-md-2" ng-attr-style="display:{{x.opn==\'OPEN\' ? \'inline\': \'none\'}}"><select ng-model="x.st" ng-change="vm.hoursChanged()" ng-options="t for t in vm.timeDD"></select></div><div class="col-xs-2 col-sm-2 col-md-2" ng-attr-style="display:{{x.opn==\'OPEN\' ? \'inline\': \'none\'}}"><p class="text-right">To:</p></div><div class="col-xs-4 col-sm-4 col-md-2" ng-attr-style="display:{{x.opn==\'OPEN\' ? \'inline\': \'none\'}}"><select ng-model="x.ct" ng-change="vm.hoursChanged()" ng-options="t for t in vm.timeDD"></select></div></div></div><br></div></div><div ng-if="vm.nsm && vm.userIsOwner && vm.type == \'Establishment\'"><div class="container" style="background-color:#e6e6e6;padding-right:50px;padding-left:10px;padding-top:10px;padding-bottom:0px;"><div class="text-center"><label>Service Hours</label></div><br><div class="container" ng-repeat="x in vm.openhours"><div class="row"><div class="col-xs-2 col-sm-2 col-md-2"><p>{{x.day}}:</p></div><div class="col-xs-2 col-sm-2 col-md-2"><select ng-model="x.opn" ng-change="vm.hoursChanged()" ng-options="n for n in vm.openOptions"></select></div><div class="col-xs-2 col-sm-2 col-md-2" ng-attr-style="display:{{x.opn==\'OPEN\' ? \'inline\': \'none\'}}"><p class="text-right">From:</p></div><div class="col-xs-2 col-sm-2 col-md-2" ng-attr-style="display:{{x.opn==\'OPEN\' ? \'inline\': \'none\'}}"><select ng-model="x.st" ng-change="vm.hoursChanged()" ng-options="t for t in vm.timeDD"></select></div><div class="col-xs-2 col-sm-2 col-md-2" ng-attr-style="display:{{x.opn==\'OPEN\' ? \'inline\': \'none\'}}"><p class="text-right">To:</p></div><div class="col-xs-2 col-sm-2 col-md-2" ng-attr-style="display:{{x.opn==\'OPEN\' ? \'inline\': \'none\'}}"><select ng-model="x.ct" ng-change="vm.hoursChanged()" ng-options="t for t in vm.timeDD"></select></div></div><br></div></div></div><div class="text-right" ng-if="vm.userIsOwner && vm.type == \'Establishment\'"><a ng-click="vm.updateHours()" class="btn btn-primary {{vm.updateHoursEn}}">Update Hours</a></div><br><div class="text-center"><a ng-click="vm.answerDetail()" class="btn btn-success">Back</a></div><br>'),$templateCache.put("app/customer/Partials/customer.html",'<div ui-view="navbar"></div><br><h2>Select business you wish to manage</h2><div ng-repeat="x in vm.answers"><label><input type="radio" name="businessradio" ng-click="vm.selAnswer(x)">&nbsp;&nbsp;{{x.name}}, {{x.location}}, {{x.cityarea}}</label></div><br><div class="text-center"><div class="btn-group col-sm-6 col-md-6"><button class="btn btn-success {{vm.loadMainPhoto}}" ng-click="vm.loadMainPhoto()">Main Photo</button> <button class="btn btn-primary {{vm.loadSpecials}}" ng-click="vm.loadSpecials()">Specials</button> <button class="btn btn-danger {{vm.loadPhotoGallery}}" ng-click="vm.loadPhotoGallery()">Photo Gallery</button></div></div><br><br><div ui-view=""></div><br><br><footer class="footer"><div class="container"><p class="text-muted">Rank-X is property of Rank-X LLC. San Diego, CA - 2016</p></div></footer>'),
$templateCache.put("app/customer/Partials/editspecial.html",'<div class="container"><div class="well-sm"><h3 class="sub-header">{{vm.header}} <span class="nomargin"><button type="button" class="btn btn-default pull-right" style="vertical-align:middle;" ng-click="vm.closeRank()"><span class="glyphicon glyphicon-remove" style="padding-top:0px;padding-bottom:0px;" aria-hidden="true"></span></button></span></h3></div></div><h3>{{ vm.isEdit ? \'Edit Special\':\'Add Special\'}}</h3><br><div class="well"><div class="row"><div class="col-xs-6 col-sm-4 col-md-4"><p class="text-right">Specials Title:</p></div><div class="col-xs-12 col-sm-4 col-md-4"><input class="form-control" ng-model="vm.sp.stitle" type="text" placeholder="Special Banner" ng-change="vm.displayCharLength()" maxlength="25" ng-attr-style="background-color:{{vm.sp.bc}};color:{{vm.sp.fc}}"></div><div class="col-xs-8 hidden-sm hidden-md hidden-lg hidden-xl"></div><div class="col-xs-6 col-sm-4 col-md-4"><p class="text-left">{{vm.char}} chars left</p></div></div><br><div class="row"><div class="hidden-xs col-sm-2 col-md-2 col-lg-2"></div><div class="col-xs-6 col-sm-2 col-md-2 col-lg-2"><p class="text-right">Background Color</p></div><div class="col-xs-6 col-sm-2 col-md-2 col-lg-2"><color-picker ng-model="vm.sp.bc" color-picker-swatch="true" color-picker-swatch-pos="\'left\'" color-picker-swatch-bootstrap="true" color-picker-swatch-only="true"></color-picker></div><div class="col-xs-6 col-sm-2 col-md-2 col-lg-2"><p class="text-right">Font Color</p></div><div class="col-xs-6 col-sm-2 col-md-2 col-lg-2"><color-picker ng-model="vm.sp.fc" color-picker-swatch="true" color-picker-swatch-pos="\'left\'" color-picker-swatch-bootstrap="true" color-picker-swatch-only="true"></color-picker></div><div class="hidden-xs col-sm-2 col-md-2 col-lg-2"></div></div><p class="text-left">Frequency</p><div class="btn-group col-sm-6 col-md-6"><button class="btn btn-primary {{vm.sp.freq == \'onetime\'? \'active\':\'\'}}" ng-click="vm.frequencySel(1)">One-Time</button> <button class="btn btn-primary {{vm.sp.freq == \'weekly\'? \'active\':\'\'}}" ng-click="vm.frequencySel(2)">Weekly</button></div><br><br><br><div class="row"><div class="col-xs-6 col-sm-3 col-md-3 col-lg-3"><div ng-if="vm.onetime"><p class="text-right">Start date:</p></div></div><div class="col-xs-6 col-sm-3 col-md-3 col-lg-3"><div ng-if="vm.onetime"><datepicker date-format="EEE MMM d y" date-year-title="selected title------"><input ng-model="vm.sp.sdate" type="text"></datepicker></div></div></div><div class="row"><div class="col-xs-6 col-sm-3 col-md-3 col-lg-3"><div ng-if="vm.onetime"><p class="text-right">Start time:</p></div></div><div class="col-xs-6 col-sm-3 col-md-3 col-lg-3"><div ng-if="vm.onetime"><select ng-model="vm.sp.stime" ng-options="x for x in vm.timeDD"><option value="">{{vm.sp.stime}}</option></select></div></div></div><div class="row"><div class="col-xs-6 col-sm-3 col-md-3 col-lg-3"><div ng-if="vm.onetime"><p class="text-right">End date:</p></div></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3" ng-if="vm.onetime"><datepicker date-format="EEE MMM d y" date-year-title="selected title------"><input ng-model="vm.sp.edate" type="text"></datepicker></div></div><div class="row"><div class="col-xs-6 col-sm-3 col-md-3 col-lg-3" ng-if="vm.onetime"><p class="text-right">End time:</p></div><div class="col-xs-6 col-sm-3 col-md-3 col-lg-3" ng-if="vm.onetime"><select ng-model="vm.sp.etime" ng-options="x for x in vm.timeDD"><option value="">{{vm.sp.etime}}</option></select></div></div><div class="row"><div class="text-center"><div class="col-xs-12 col-sm-12 col-md-12" ng-if="vm.weekly"><label class="checkbox-inline"><input type="checkbox" ng-model="vm.sp.mon" value="">Mon</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.sp.tue" value="">Tue</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.sp.wed" value="">Wed</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.sp.thu" value="">Thu</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.sp.fri" value="">Fri</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.sp.sat" value="">Sat</label> <label class="checkbox-inline"><input type="checkbox" ng-model="vm.sp.sun" value="">Sun</label></div></div></div><br><div class="row"><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"><div ng-if="vm.weekly"><p class="text-right">Start time:</p></div></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"><div ng-if="vm.weekly"><select ng-model="vm.sp.stime2" ng-options="x for x in vm.timeDD"><option value="">{{vm.sp.stime2}}</option></select></div></div></div><div class="row"><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"><div ng-if="vm.weekly"><p class="text-right">End time:</p></div></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"><div ng-if="vm.weekly"><select ng-model="vm.sp.etime2" ng-options="x for x in vm.timeDD"><option value="">{{vm.sp.etime2}}</option></select></div></div></div><br><div class="row"><div class="col-sm-0 col-md-3 col-lg-3"></div><div class="container col-sm-12 col-md-6 col-lg-6"><p>Event Details</p><textarea class="form-control" ng-model="vm.sp.details" placeholder="{{x.label}}" rows="4" ng-attr-style="background-color:{{vm.sp.bc}};color:{{vm.sp.fc}};width:100%"></textarea></div><div class="col-sm-0 col-md-3 col-lg-3"></div><br></div><div class="row"><div class="col-sm-0 col-md-3 col-lg-3"></div><div class="container col-sm-12 col-md-6 col-lg-6"><div class=""><p>Event Image</p><img src="{{vm.imageURL}}" alt="{{image.errorLoading}}" style="width:100%; max-height:300px"><div ng-if="vm.userIsOwner"><blob-upload></blob-upload></div></div></div><div class="col-sm-0 col-md-3 col-lg-3"></div><br></div><br><div class="form-group text-center"><button type="button" class="btn btn-success" ng-click="vm.goBack()">Back</button> <button type="button" class="btn btn-primary" ng-click="vm.showPreview()">Preview</button> <button type="button" class="btn btn-danger" ng-click="vm.deleteSpecial()" ng-attr-style="display:{{vm.isEdit ? \'inline\':\'none\'}}">Delete</button></div></div>'),$templateCache.put("app/customer/Partials/editvrows.html",'<div class="container"><div class="well-sm"><h3 class="sub-header">{{vm.header}} <span class="nomargin"><button type="button" class="btn btn-default pull-right" style="vertical-align:middle;" ng-click="vm.closeRank()"><span class="glyphicon glyphicon-remove" style="padding-top:0px;padding-bottom:0px;" aria-hidden="true"></span></button></span></h3></div></div><div ng-repeat="x in vm.vrows track by $index"><div ng-attr-style="display:{{x.shdr ? \'inline\':\'none\'}}"><br></div><div class="row"><div ng-attr-style="display:{{x.shdr ? \'inline\':\'none\'}}"><div class="col-xs-10" style="background-color:gray;color:white;"><p>{{x.gtitle}}</p></div><div class="col-xs-2"><button type="button" class="btn btn-default" ng-click="vm.editVRowGroupDiag(x)"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button></div></div></div><div ng-attr-style="display:{{x.title != \'-\' ? \'inline\':\'none\'}}"><div class="row"><div class="col-xs-10" style="background-color:#d9d9d9;padding-top:2px;padding-bottom:2px;">{{x.title}}</div><div class="col-xs-2"><div class="btn-group"><button type="button" class="btn btn-default" ng-click="vm.deleteVRowDiag(x)"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button></div></div></div></div><div ng-attr-style="display:{{x.saddr ? \'inline\':\'none\'}}"><div class="row"><div class="col-xs-10"><div class="text-right"><button type="button" class="btn btn-default" ng-click="vm.addVRowDiag(x)">Add Vote Row</button></div></div><div class="col-xs-2"></div></div></div></div><br><div class="text-left"><button type="button" class="btn btn-default" ng-click="vm.addVRowGroupDiag()">Add Group</button></div><div class="text-right"><button type="button" class="btn btn-success" ng-click="vm.closeRank()">Go Back</button></div>'),$templateCache.put("app/customer/Partials/mainphoto.html","<h1>Main Photo</h1>"),$templateCache.put("app/customer/Partials/photogallery.html","<h1>Photo Gallery</h1>"),$templateCache.put("app/customer/Partials/specials.html",'<div id="veil" ng-hide="vm.dataReady"></div><div id="feedLoading" ng-hide="vm.dataReady"><div style="text-align: center" ng-if="!vm.dataReady"><div><img src="/assets/images/loading.gif" class="img" style="width:50px;height:50px"></div><p style="font-size:large">loading specials...</p></div></div><div ng-if="vm.dataReady"><h2>Specials Manager</h2><br><p class="text-left">You have purchased premium membership for this Establishment. You can add up to 7 specials and promotions.</p><table class="table"><tbody><thead style="border-style:none;"><tr><th>Special</th><th></th><th></th></tr></thead><tr ng-repeat="x in vm.specialsList" style="cursor:pointer;"><td ng-if="x.used" style="width:80%">{{x.stitle}}</td><td ng-if="!x.used" style="width:80%;color:#808080"><i>Empty</i></td><td ng-if="x.used" style="width:10%"><button class="btn btn-primary" ng-click="vm.selSpecial(x)">Edit</button></td><td ng-if="x.used" style="width:10%"><button class="btn btn-danger" ng-click="vm.deleteSpecial(x)">Delete</button></td><td ng-if="!x.used" style="width:10%"><button class="btn btn-success" ng-click="vm.addSpecial()">Add</button></td></tr></tbody></table><p class="text-left">Specials are a great way to let people know all the great offers you have at any time.</p><div class="text-right"><button class="btn btn-default" ng-click="vm.goBack()">Back</button></div></div>'),$templateCache.put("app/layout/Partials2/about.html",'<div class="container"><div class="jumbotron"><br><div class="row"><div class="col-sm-0 col-md-2 col-lg-3"></div><div class="col-sm-12 col-md-8 col-lg-6"><img src="{{vm.logoimage}}" class="displayed-uc" alt="Cinque Terre" ng-attr-style="width:100%;height:{{vm.sm ? \'100px\':\'200px\'}}"></div><div class="col-sm-0 col-md-2 col-lg-3"></div></div><br><br><p>Rank-X collects users preferences to generate truly collective rankings on all things about your city.</p><br></div><div class="well"><div class="form-group text-left"><p>San Diego, CA - 2018</p><p>Contact: contact@rank-x.com</p></div></div><br><div class="form-group text-center"><button type="button" class="btn btn-primary" ng-click="vm.goBack()">Back</button></div></div>'),$templateCache.put("app/layout/Partials2/city-selection.html",""),
$templateCache.put("app/layout/Partials2/customertos.html",'<style>\n    #ppBody {\n        font-size: 11pt;\n        width: 100%;\n        margin: 0 auto;\n        text-align: justify;\n    }\n    \n    #ppHeader {\n        font-family: verdana;\n        font-size: 21pt;\n        width: 100%;\n        margin: 0 auto;\n    }\n    \n    .ppConsistencies {\n        display: none;\n    }\n\n\n    #ppBody > ol > li {\n        margin-bottom: 30px;\n    }\n    \n    #ppBody > ol > li > ul > li{\n        margin-bottom: 20px;\n    }\n\n    #ppBody > ol > li > ul > li > ol >li{\n        margin-bottom: 10px;\n    }\n</style><div class="container"><br><div class="text-right"><button class="btn btn-default" ng-click="vm.goBack()">Back</button></div><div id="ppHeader"><span><img src="/assets/images/logo_sq.png" style="width:80px"></span> Rank-X Terms of Use</div><div id="ppBody">These terms of service constitute a legally binding agreement (the “Agreement”) between you and Rank-X, LLC (“Rank-X” “we,” “us” or “our”) governing your use of the Rank-X application, website, and technology platform (collectively, the “Rank-X Platform”). PLEASE BE ADVISED: THIS AGREEMENT CONTAINS PROVISIONS THAT GOVERN HOW CLAIMS YOU AND RANK-X HAVE AGAINST EACH OTHER CAN BE BROUGHT (SEE SECTION 16 BELOW). THESE PROVISIONS WILL, WITH LIMITED EXCEPTION, REQUIRE YOU TO SUBMIT CLAIMS YOU HAVE AGAINST RANK-X TO BINDING AND FINAL ARBITRATION ON AN INDIVIDUAL BASIS, NOT AS A PLAINTIFF OR CLASS MEMBER IN ANY CLASS, GROUP OR REPRESENTATIVE ACTION OR PROCEEDING. AS A DRIVER, YOU HAVE AN OPPORTUNITY TO OPT OUT OF ARBITRATION WITH RESPECT TO CERTAIN CLAIMS AS PROVIDED IN SECTION 17. By entering into to this Agreement, you expressly acknowledge that you understand this Agreement (including the dispute resolution and arbitration provisions Section 16) and accept all of its terms. IF YOU DO NOT AGREE TO BE BOUND BY THE TERMS AND CONDITIONS OF THIS AGREEMENT, YOU MAY NOT USE OR ACCESS THE RANK-X PLATFORM.<ol><li><b>The Rank-X Platform</b> The Rank-X Platform provides an online platform that creates lists, rankings, and forums about businesses, activities, locations, and venues (Collectively “Businesses”). The lists, rankings, and forums within the Rank-X Platform are generated by persons who use the site (“Users”) to rank and comment on Businesses they have experienced. The Rank-X Platform also allows persons to promote Rank-X to various Businesses (“Promoters”) in exchange for a commission-based percentage of the revenue generated by Businesses who the Promoter successfully signs up for Rank-X’s Premium Membership. Each individual Promoter will be assigned a unique alphanumeric code (“Code”). Each Business that signs up for Rank-X’s Premium Membership will use the Code assigned to the Promoter that contacted them to gain access to Rank-X’s Premium Membership benefits. When a Business uses this Code, the Business will be given sixty (60) days of free access to the Premium Membership. If a Business, after the 60-day free period expires, chooses to continue accessing Rank-X’s Premium Membership benefits, it will do so by using the Promoter’s Code to sign up for continued Premium Membership benefits at the specified cost.</li><li><b>Modification to the Agreement</b> In the event Rank-X modifies the terms and conditions of this Agreement, such modifications shall be binding on you only upon your acceptance of the modified Agreement. Rank-X reserves the right to modify any information referenced in the hyperlinks from this Agreement from time to time, and such modifications shall become effective upon posting. Continued use of the Rank-X Platform or Services after any such changes shall constitute your consent to such changes. Unless material changes are made to the arbitration provisions herein, you agree that modification of this Agreement does not create a renewed opportunity to opt out of arbitration (if applicable).</li><li><b>Eligibility</b> The Rank-X Platform may only be used by individuals and businesses who can form legally binding contracts under applicable law. The Rank-X Platform is not available to children (persons under the age of 18) or Premium Members who have had their Premium Member account temporarily or permanently deactivated. By becoming a Premium Member of Rank-X’s Platform, you represent and warrant that you are at least 18 years old and that you have the right, authority and capacity to enter into and abide by the terms and conditions of this Agreement. You may not allow other persons to use your Business’s Rank-X account, and you agree that you are the sole authorized user of your account.</li><li><b>Costs and Fees</b> If you are a business, you may obtain the benefits of Rank-X’s Premium Membership by paying the specified monthly membership fee. Rank-X’s Premium Membership fees are set out in Section 4(b) below.<ol type="a"><li><b>Costs and Fees</b> A Business may sign up for and purchase Rank-X’s Premium Membership in order to utilize the various benefits of doing so. “Premium Membership” for purposes of this agreement refers to a Business’s ability to promote the Business’s menu, specials, and activities, which drives additional online traffic to the Business’s profile, in exchange for a monthly Premium Membership fee. Rank-X reserves the right to change the pricing schedule for Premium Memberships at any time in our discretion based upon local market factors, and we will provide you with notice if our prices do change.</li><li><b>Membership Fees and Payment Schedule.</b> Rank-X’s Premium Membership costs vary depending on the industry and business type that the business is associated with, as set out in Section 4(c) below. Additionally, Businesses may purchase custom rankings at the price of $45.00 per month. Rank-X charges Businesses once per month for Premium Membership benefits, which will continue to be accessible by Businesses until and unless this Agreement has been materially breached or terminated with or without cause.</li><li><b>Premium Membership Fee Schedule.</b> Premium Membership pricing is determined by the industry and size of the Business (“Business Class”) purchasing the Premium Membership. For example, a large, national, and well known company or brand will pay a higher monthly Premium Membership fee than a small “mom and pop” café or retail shop. A Business that fits within more than one Business Class will pay the higher Premium Membership fee. Thus, for example, if a Business fits within the “Small Business Enterprise” Business Class as well as the “Restaurants and Bars” Business Class, the Business will pay the “Restaurants and Bars” Business Class rate because that rate is higher than the “Small Business Enterprise” Business Class.<ol type="i"><li><b>The Premium Membership Pricing of Each Business Class is as Follows:</b><ol><li>Enterprise (“ENT”) – Large National Brands (e.g., AT&T, Verizon, Starbucks, etc.)</li><li>Large Business (“LBZ”) – Large Companies (e.g., Car Dealerships, etc.)</li><li>Restaurants and Bars (“REB”) – Food and Beverage Industry (e.g., Diners, Bars, Clubs, etc.)</li><li>Medium Size Business (“MBZ”) – Mid-Sized Companies (e.g., Auto Repair Shops, Sporting Supplies, etc.)</li><li>Small Business Establishment (“SBZ”) – Small Businesses (e.g., Hair Salons, Flower Shops, Computer Repair Shops, Crossfit Gyms, etc.)</li><li>Personal Business/Sole Proprietorship (“PER”) – (e.g., Personal Trainers, Yoga Instructors, Music Teachers, Mobile Auto-Repair, etc.)</li></ol></li><li><b>Which Business Class a Business falls into is determined with the sole and absolute discretion of Rank-X. The Business Class that a Business falls into can be changed at any time if it is determined by Rank-X that the Business has changed in such a way that warrants a change in Business Class.</b></li></ol></li></ol></li></ol><li><b>Communications</b> By becoming a Premium Member, you agree to receive communications from us, including via e-mail, text message, calls, and push notifications. You agree that texts, calls or prerecorded messages may be generated by automatic telephone dialing systems. Communications from Rank-X, its affiliated companies and/or Drivers, may include but are not limited to: operational communications concerning your Premium Member account or use of the Rank-X Platform or Services, updates concerning new and existing features on the Rank-X Platform, communications concerning promotions run by us or our third-party partners, and news concerning Rank-X and industry developments. Standard text messaging charges applied by your cell phone carrier will apply to text messages we send.<br>IF YOU WISH TO OPT OUT OF PROMOTIONAL EMAILS, YOU CAN UNSUBSCRIBE FROM OUR PROMOTIONAL EMAIL LIST BY FOLLOWING THE UNSUBSCRIBE OPTIONS IN THE PROMOTIONAL EMAIL ITSELF. YOU ACKNOWLEDGE THAT YOU ARE NOT REQUIRED TO CONSENT TO RECEIVE PROMOTIONAL TEXTS OR CALLS AS A CONDITION OF USING THE PLATFORM OR THE SERVICES. IF YOU WISH TO OPT OUT OF ALL TEXTS OR CALLS FROM (INCLUDING OPERATIONAL OR TRANSACTIONAL TEXTS OR CALLS), YOU CAN NOTIFY US VIA EMAIL, HOWEVER YOU ACKNOWLEDGE THAT OPTING OUT OF RECEIVING ALL TEXTS MAY IMPACT YOUR USE OF THE Rank-X PLATFORM OR THE SERVICES.</li><li><b>Your Information</b> Your Information is any information you provide, publish or post to or through the Rank-X Platform (including any profile information you provide) or send to other Users or Premium Members (including via in-application feedback, any email feature, or through any -related Facebook, Twitter or other social media posting) (your “Information”). You consent to us using your Information to create a Premium Member account that will allow you to use the Platform and participate in the Services. Our collection and use of personal information in connection with the Rank-X Platform and Services is as provided in Rank-X’s Privacy Policy located at www.Rank-X.com/privacy. You are solely responsible for your Information and your interactions with other members of the public, and we act only as a passive conduit for your online posting of your Information. You agree to provide and maintain accurate, current and complete information and that we and other members of the public may rely on your Information as accurate, current and complete. To enable Rank-X to use your Information, you grant to us a non-exclusive, worldwide, perpetual, irrevocable, royalty-free, transferable, sub-licensable (through multiple tiers) right and license to exercise the copyright, publicity, and database rights you have in your Information, and to use, copy, perform, display and distribute such Information to prepare derivative works, or incorporate into other works, such Information, in any media now known or not currently known. Rank-X does not assert any ownership over your Information; rather, as between you and Rank-X, subject to the rights granted to us in this Agreement, you retain full ownership of all of your Information and any intellectual property rights or other proprietary rights associated with your Information.<br>You may be able to create or log-in to your Rank-X Premium Member account through online accounts you may have with third party social networking sites (each such account, an "SNS Account"). By connecting to Rank-X through an SNS Account, you understand that Rank-X may access, store, and make available any SNS Account content according to the permission settings of your SNS Account (e.g., friends, mutual friends, contacts or following/followed lists (the “SNS Content”)). You understand that SNS Content may be available on and through the Rank-X Platform to other Users. Unless otherwise specified in this Agreement, all SNS Content, if any, shall be considered to be your Information.</li><li><b>Promotions and Referral Programs</b> Rank-X, at its sole discretion, may make available promotions with different features to any Premium Members or prospective Premium Members. These promotions, unless made to you, shall have no bearing whatsoever on your Agreement or relationship with Rank-X. Rank-X reserves the right to withhold or deduct credits or benefits obtained through a promotion in the event that Rank-X determines or believes that the redemption of the promotion or receipt of the credit or benefit was in error, fraudulent, illegal, or in violation of the applicable promotion terms or this Agreement.</li><li><b>Restricted Activities</b><ol type="a">With respect to your use of the Rank-X Platform and your participation in the Premium Membership, you agree that you will not:<li>impersonate any person, business, or government entity;</li><li>stalk, threaten, or otherwise harass any person or entity, or carry any weapons;</li><li>violate any law, statute, rule, permit, ordinance or regulation;</li><li>interfere with or disrupt the Services or the Rank-X Platform or the servers or networks connected to the Rank-X Platform;</li><li>post Information or interact on the Rank-X Platform or Services in a manner which is false, inaccurate, misleading (directly or by omission or failure to update information), defamatory, libelous, abusive, obscene, profane, offensive, sexually oriented, threatening, harassing, or illegal;</li><li>use the Rank-X Platform in any way that infringes any third party’s rights, including but not limited to: intellectual property rights, copyright, patent, trademark, trade secret or other proprietary rights or rights of publicity or privacy;</li><li>post, email or otherwise transmit any malicious code, files or programs designed to interrupt, damage, destroy or limit the functionality of any computer software or hardware or telecommunications equipment or surreptitiously intercept or expropriate any system, data or personal information;</li><li>forge headers or otherwise manipulate identifiers in order to disguise the origin of any information transmitted through the Rank-X Platform;</li><li>“frame” or “mirror” any part of the Rank-X Platform, without our prior written authorization or use meta tags or code or other devices containing any reference to us in order to direct any person to any other web site for any purpose; or</li><li>modify, adapt, translate, reverse engineer, decipher, decompile or otherwise disassemble any portion of the Rank-X Platform or any software used on or for the Rank-X Platform;</li><li>rent, lease, lend, sell, redistribute, license or sublicense the Rank-X Platform or access to any portion of the Rank-X Platform;</li><li>use any robot, spider, site search/retrieval application, or other manual or automatic device or process to retrieve, index, scrape, “data mine”, or in any way reproduce or circumvent the navigational structure or presentation of the Rank-X Platform or its contents;</li><li>link directly or indirectly to any other web sites;</li><li>transfer or sell your Premium Member account, password and/or identification to any other party</li><li>discriminate against or harass anyone on the basis of race, national origin, religion, gender, gender identity, physical or mental disability, medical condition, marital status, age or sexual orientation, or</li><li>cause any third party to engage in the restricted activities above.</li></ol></li><li><b>Intellectual Property</b> All intellectual property rights in the Rank-X Platform shall be owned by Rank-X absolutely and in their entirety. These rights include and are not limited to database rights, copyright, design rights (whether registered or unregistered), trademarks (whether registered or unregistered) and other similar rights wherever existing in the world together with the right to apply for protection of the same. All other trademarks, logos, service marks, company or product names set forth in the Rank-X Platform are the property of their respective owners. You acknowledge and agree that any questions, comments, suggestions, ideas, feedback or other information (“Submissions”) provided by you to us are non-confidential and shall become the sole property of Rank-X. Rank-X shall own exclusive rights, including all intellectual property rights, and shall be entitled to the unrestricted use and dissemination of these Submissions for any purpose, commercial or otherwise, without acknowledgment or compensation to you.<br>Rank-X and other Rank-X logos, designs, graphics, icons, scripts and service names are registered trademarks, trademarks or trade dress of Rank-X in the United States and/or other countries (collectively, the “Rank-X Marks”). If you provide Services as a Premium Member, Rank-X grants to you, during the term of this Agreement, and subject to your compliance with the terms and conditions of this Agreement, a limited, revocable, non-exclusive license to display and use the Rank-X Marks solely in connection with providing the Services through the Rank-X Platform (“License”). The License is non-transferable and non-assignable, and you shall not grant to any third party any right, permission, license or sublicense with respect to any of the rights granted hereunder without Rank-X’s prior written permission, which it may withhold in its sole discretion. The Rank-X Marks may not be used in any manner that is likely to cause confusion.<br>You acknowledge that Rank-X is the owner and licensor of the Rank-X Marks, including all goodwill associated therewith, and that your use of the Rank-X Marks will confer no additional interest in or ownership of the Rank-X Marks in you but rather inures to the benefit of Rank-X. You agree to use the Rank-X Marks strictly in accordance with Rank-X’s Terms and Conditions and any other guidelines as may be provided to you and revised from time to time, and to immediately cease any use that Rank-X determines to nonconforming or otherwise unacceptable.<br>You agree that you will not: (1) create any materials that incorporate the Rank-X Marks or any derivatives of the Rank-X Marks other than as expressly approved by Rank-X in writing; (2) use the Rank-X Marks in any way that tends to impair their validity as proprietary trademarks, service marks, trade names or trade dress, or use the Rank-X Marks other than in accordance with the terms, conditions and restrictions herein; (3) take any other action that would jeopardize or impair Rank-X’s rights as owner of the Rank-X Marks or the legality and/or enforceability of the Rank-X Marks, including, without limitation, challenging or opposing Rank-X’s ownership in the Rank-X Marks; (4) apply for trademark registration or renewal of trademark registration of any of the Rank-X Marks, any derivative of the Rank-X Marks, any combination of the Rank-X Marks and any other name, or any trademark, service mark, trade name, symbol or word which is similar to the Rank-X Marks; (5) use the Rank-X Marks on or in connection with any product, service or activity that is in violation of any law, statute, government regulation or standard.<br>Violation of any provision of this License may result in immediate termination of the License, in Rank-X’s sole discretion. If you create any materials bearing the Rank-X Marks (in violation of this Agreement or otherwise), you agree that upon their creation Rank-X exclusively owns all right, title and interest in and to such materials, including without limitation any modifications to the Rank-X Marks or derivative works based on the Rank-X Marks. You further agree to assign any interest or right you may have in such materials to Rank-X, and to provide information and execute any documents as reasonably requested by Rank-X to enable Rank-X to formalize such assignment.<br>Rank-X respects the intellectual property of others, and expects Premium Members to do the same. If you believe, in good faith, that any materials on the Rank-X Platform or Services infringe upon your copyrights, please contact us via email.<br></li><li><b>Disclaimers</b> The following disclaimers are made on behalf of Rank-X, our affiliates, subsidiaries, parents, successors and assigns, and each of our respective officers, directors, employees, agents, and shareholders.<br>The Rank-X Platform is provided on an “as is” basis and without any warranty or condition, express, implied or statutory. We do not guarantee and do not promise any specific results from use of the Rank-X Platform and/or the Services, including the ability to provide or receive Services at any given location or time. We specifically disclaim any implied warranties of title, merchantability, fitness for a particular purpose and non-infringement. Some states do not allow the disclaimer of implied warranties, so the foregoing disclaimer may not apply to you.<br>We do not warrant that your use of the Rank-X Platform or Services will be accurate, complete, reliable, current, secure, uninterrupted, always available, or error- free, or will meet your requirements, that any defects in the Rank-X Platform will be corrected, or that the Rank-X Platform is free of viruses or other harmful components. We disclaim liability for, and no warranty is made with respect to, connectivity and availability of the Rank-X Platform or Services.<br>We cannot guarantee that each User of the Rank-X Platform is who he or she claims to be. Please use common sense when using the Rank-X Platform and Services. Please note that there are also risks of dealing with underage persons or people acting under false pretense, and we do not accept responsibility or liability for any content, communication or other use or access of the Rank-X Platform by persons under the age of 18 in violation of this Agreement.<br>Rank-X is not responsible for the conduct, whether online or offline, of any User of the Rank-X Platform or Services. You are solely responsible for your interactions with other Users.<br>Rank-X expressly disclaims any liability arising from the unauthorized use of your Premium Member account. Should you suspect that any unauthorized party may be using your Premium Member account or you suspect any other breach of security, you agree to notify us immediately.<br>Please carefully select the type of information that you post on the Rank-X Platform or through the Services or release to others. We disclaim all liability, regardless of the form of action, for the acts or omissions of other Users (including unauthorized users, or “hackers”).<br>Opinions, advice, statements, offers, or other information or content concerning Rank-X or made available through the Rank-X Platform, but not directly by us, are those of their respective authors, and should not necessarily be relied upon. Such authors are solely responsible for such content. Under no circumstances will we be responsible for any loss or damage resulting from your reliance on information or other content posted by third parties, whether on the Rank-X Platform or otherwise. We reserve the right, but we have no obligation, to monitor the materials posted on the Rank-X Platform and remove any such material that in our sole opinion violates, or is alleged to violate, the law or this agreement or which might be offensive, illegal, or that might violate the rights, harm, or threaten the safety of Users or others.<br>This paragraph applies to any version of the Rank-X Platform that you acquire from the Apple App Store. This Agreement is entered into between you and Rank-X. Apple, Inc. (“Apple”) is not a party to this Agreement and shall have no obligations with respect to the Rank-X Platform. Rank-X, not Apple, is solely responsible for the Rank-X Platform and the content thereof as set forth hereunder. However, Apple and Apple’s subsidiaries may be third party beneficiaries of this Agreement. Upon your acceptance of this Agreement, Apple shall have the right (and will be deemed to have accepted the right) to enforce this Agreement against you as a third party beneficiary thereof. This Agreement incorporates by reference Apple’s Licensed Application End User License Agreement, for purposes of which, you are “the end-user.” In the event of a conflict in the terms of the Licensed Application End User License Agreement and this Agreement, the terms of this Agreement shall control.</li><li><b>Indemnity</b> You will defend, indemnify, and hold Rank-X including our affiliates, subsidiaries, parents, successors and assigns, and each of our respective officers, directors, employees, agents, or shareholders harmless from any claims, actions, suits, losses, costs, liabilities and expenses (including reasonable attorneys’ fees) relating to or arising out of your use of the Rank-X Platform and participation in the Services, including: (1) your breach of this Agreement or the documents it incorporates by reference; (2) your violation of any law or the rights of a third party, including, without limitation, Drivers, Riders, other motorists, and pedestrians, as a result of your own interaction with such third party; (3) any allegation that any materials that you submit to us or transmit through the Rank-X Platform or to us infringe or otherwise violate the copyright, trademark, trade secret or other intellectual property or other rights of any third party; (4) your ownership, use or operation of a motor vehicle or passenger vehicle, including your provision of Services as a Driver; and/or (5) any other activities in connection with the Services. This indemnity shall be applicable without regard to the negligence of any party, including any indemnified person.</li><li><b>Limitation of Liability</b> IN NO EVENT WILL RANK-X, INCLUDING OUR AFFILIATES, SUBSIDIARIES, PARENTS, SUCCESSORS AND ASSIGNS, AND EACH OF OUR RESPECTIVE OFFICERS, DIRECTORS, EMPLOYEES, AGENTS, OR SHAREHOLDERS (COLLECTIVELY “RANK-X” FOR PURPOSES OF THIS SECTION), BE LIABLE TO YOU FOR ANY INCIDENTAL, SPECIAL, EXEMPLARY, PUNITIVE, CONSEQUENTIAL, OR INDIRECT DAMAGES (INCLUDING, BUT NOT LIMITED TO, DAMAGES FOR DELETION, CORRUPTION, LOSS OF DATA, LOSS OF PROGRAMS, FAILURE TO STORE ANY INFORMATION OR OTHER CONTENT MAINTAINED OR TRANSMITTED BY THE RANK-X PLATFORM, SERVICE INTERRUPTIONS, OR FOR THE COST OF PROCUREMENT OF SUBSTITUTE SERVICES) ARISING OUT OF OR IN CONNECTION WITH THE RANK-X PLATFORM, THE SERVICES, OR THIS AGREEMENT, HOWEVER ARISING INCLUDING NEGLIGENCE, EVEN IF WE OR OUR AGENTS OR REPRESENTATIVES KNOW OR HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. THE RANK-X PLATFORM MAY BE USED BY YOU TO REQUEST AND SCHEDULE TRANSPORTATION, GOODS, OR OTHER SERVICES WITH THIRD PARTY PROVIDERS, BUT YOU AGREE THAT RANK-X HAS NO RESPONSIBILITY OR LIABILITY TO YOU RELATED TO ANY TRANSPORTATION, GOODS OR OTHER SERVICES PROVIDED TO YOU BY THIRD PARTY PROVIDERS OTHER THAN AS EXPRESSLY SET FORTH IN Their TERMS. CERTAIN JURISDICTIONS MAY NOT ALLOW THE EXCLUSION OR LIMITATION OF CERTAIN DAMAGES. IF THESE LAWS APPLY TO YOU, SOME OR ALL OF THE ABOVE DISCLAIMERS, EXCLUSIONS OR LIMITATIONS MAY NOT APPLY TO YOU, AND YOU MAY HAVE ADDITIONAL RIGHTS.</li><li><b>Term and Termination</b> This Agreement is effective upon your creation of a Premium Member account. This Agreement may be terminated: a) by Premium Member, without cause, upon seven (7) days’ prior written notice to Rank-X; or b) by either Party immediately, without notice, upon the other Party’s material breach of this Agreement, including but not limited to any breach of Section 8 or breach of Section 9 of this Agreement. In addition, Rank-X may terminate this Agreement or deactivate your User account immediately in the event: (1) you no longer qualify to provide Services or to operate the approved vehicle under applicable law, rule, permit, ordinance or regulation; (2) you fall below Rank-X’s star rating or cancellation threshold; (3) Rank-X has the good faith belief that such action is necessary to protect the safety of the Rank-X community or third parties, provided that in the event of a deactivation pursuant to (1)-(3) above, you will be given notice of the potential or actual deactivation and an opportunity to attempt to cure the issue to Rank-X’s reasonable satisfaction prior to Rank-X permanently terminating the Agreement. For all other breaches of this Agreement, you will be provided notice and an opportunity to cure the breach. If the breach is cured in a timely manner and to Rank-X’s satisfaction, this Agreement will not be permanently terminated. Sections 2, 4, 6, 9 (with respect to the license), 10-12, 14-16 shall survive any termination or expiration of this Agreement.</li><li><b>Confidentiality</b> You agree not to use any technical, financial, strategic and other proprietary and confidential information relating to Rank-X’s business, operations and properties, including Premium Member information (“Confidential Information”) disclosed to you by Rank-X for your own use or for any purpose other than as contemplated herein. You shall not disclose or permit disclosure of any Confidential Information to third parties. You agree to take all reasonable measures to protect the secrecy of and avoid disclosure or use of Confidential Information of Rank-X in order to prevent it from falling into the public domain. Notwithstanding the above, you shall not have liability to Rank-X with regard to any Confidential Information which you can prove: was in the public domain at the time it was disclosed by Rank-X or has entered the public domain through no fault of yours; was known to you, without restriction, at the time of disclosure, as demonstrated by files in existence at the time of disclosure; is disclosed with the prior written approval of Rank-X; becomes known to you, without restriction, from a source other than Rank-X without breach of this Agreement by you and otherwise not in violation of Rank-X’s rights; or is disclosed pursuant to the order or requirement of a court, administrative agency, or other governmental body; provided, however, that You shall provide prompt notice of such court order or requirement to Rank-X to enable Rank-X to seek a protective order or otherwise prevent or restrict such disclosure.</li><li><b>General</b> Except as provided in Section 16, this Agreement shall be governed by the laws of the State of California without regard to choice of law principles. This choice of law provision is only intended to specify the use of California law to interpret this Agreement and is not intended to create any other substantive right to non-Californians to assert claims under California law whether by statute, common law, or otherwise. If any provision of this Agreement is or becomes invalid or non-binding, the parties shall remain bound by all other provisions hereof. In that event, the parties shall replace the invalid or non- binding provision with provisions that are valid and binding and that have, to the greatest extent possible, a similar effect as the invalid or non-binding provision, given the contents and purpose of this Agreement. You agree that this Agreement and all incorporated agreements may be automatically assigned by Rank-X, in our sole discretion by providing notice to you. Except as explicitly stated otherwise, any notices to Rank-X shall be given by certified mail, postage prepaid and return receipt requested to Rank-X. Any notices to you shall be provided to you through the Rank-X Platform or given to you via the email address or physical you provide to Rank-X during the registration process. Headings are for reference purposes only and in no way define, limit, construe or describe the scope or extent of such section. A party’s failure to act with respect to a breach by the other party does not constitute a waiver of the party’s right to act with respect to subsequent or similar breaches. This Agreement sets forth the entire understanding and agreement between you and Rank-X with respect to the subject matter hereof and supersedes all previous understandings and agreements between the parties, whether oral or written.</li><li><b>Dispute Resolution and Arbitration Agreement</b><ol type="a"><li><b>Agreement to Binding Arbitration Between You and Rank-X.</b> YOU AND RANK-X MUTUALLY AGREE TO WAIVE OUR RESPECTIVE RIGHTS TO RESOLUTION OF DISPUTES IN A COURT OF LAW BY A JUDGE OR JURY AND AGREE TO RESOLVE ANY DISPUTE BY ARBITRATION, as set forth below. This agreement to arbitrate (“Arbitration Agreement”) is governed by the Federal Arbitration Act and survives after the Agreement terminates or your relationship with Rank-X ends. ANY ARBITRATION UNDER THIS AGREEMENT WILL TAKE PLACE ON AN INDIVIDUAL BASIS; CLASS ARBITRATIONS AND CLASS ACTIONS ARE NOT PERMITTED. Except as expressly provided below, this Arbitration Agreement applies to all Claims (defined below) between you and Rank-X, including our affiliates, subsidiaries, parents, successors and assigns, and each of our respective officers, directors, employees, agents, or shareholders.<br>Except as expressly provided below, ALL DISPUTES AND CLAIMS BETWEEN US (EACH A “CLAIM” AND COLLECTIVELY, “CLAIMS”) SHALL BE EXCLUSIVELY RESOLVED BY BINDING ARBITRATION SOLELY BETWEEN YOU AND RANK-X. These Claims include, but are not limited to, any dispute, claim or controversy, whether based on past, present, or future events, arising out of or relating to: this Agreement and prior versions thereof (including the breach, termination, enforcement, interpretation or validity thereof), the Rank-X Platform, the Services, any other goods or services made available through the Rank-X Platform, your relationship with Rank-X, the threatened or actual suspension, deactivation or termination of your Premium Member Account or this Agreement, payments made by you or any payments made or allegedly owed to you, any promotions or offers made by Rank-X, any city, county, state or federal wage-hour law, trade secrets, unfair competition, compensation, breaks and rest periods, expense reimbursement, wrongful termination, discrimination, harassment, retaliation, fraud, defamation, emotional distress, breach of any express or implied contract or covenant, claims arising under federal or state consumer protection laws; claims arising under antitrust laws, claims arising under the Telephone Consumer Protection Act and Fair Credit Reporting Act; and claims arising under the Uniform Trade Secrets Act, Civil Rights Act of 1964, Americans With Disabilities Act, Age Discrimination in Employment Act, Older Workers Benefit Protection Act, Family Medical Leave Act, Fair Labor Standards Act, Employee Retirement Income Security Act (except for individual claims for employee benefits under any benefit plan sponsored by Rank-X and covered by the Employee Retirement Income Security Act of 1974 or funded by insurance), and state statutes, if any, addressing the same or similar subject matters, and all other federal and state statutory and common law claims. All disputes concerning the arbitrability of a Claim (including disputes about the scope, applicability, enforceability, revocability or validity of the Arbitration Agreement) shall be decided by the arbitrator, except as expressly provided below.<br>BY AGREEING TO ARBITRATION, YOU UNDERSTAND THAT YOU AND RANK-X ARE WAIVING THE RIGHT TO SUE IN COURT OR HAVE A JURY TRIAL FOR ALL CLAIMS, EXCEPT AS EXPRESSLY OTHERWISE PROVIDED IN THIS ARBITRATION AGREEMENT. This Arbitration Agreement is intended to require arbitration of every claim or dispute that can lawfully be arbitrated, except for those claims and disputes which by the terms of this Arbitration Agreement are expressly excluded from the requirement to arbitrate.</li><li><b>Prohibition of Class Actions and Non-Individualized Relief.</b> YOU UNDERSTAND AND AGREE THAT YOU AND RANK-X MAY EACH BRING CLAIMS IN ARBITRATION AGAINST THE OTHER ONLY IN AN INDIVIDUAL CAPACITY AND NOT ON A CLASS, COLLECTIVE ACTION, OR REPRESENTATIVE BASIS (“CLASS ACTION WAIVER”). YOU UNDERSTAND AND AGREE THAT YOU AND RANK-X BOTH ARE WAIVING THE RIGHT TO PURSUE OR HAVE A DISPUTE RESOLVED AS A PLAINTIFF OR CLASS MEMBER IN ANY PURPORTED CLASS, COLLECTIVE OR REPRESENTATIVE PROCEEDING. NOTWITHSTANDING THE FOREGOING, THIS SUBSECTION (B) SHALL NOT APPLY TO REPRESENTATIVE PRIVATE ATTORNEYS GENERAL ACT CLAIMS BROUGHT AGAINST RANK-X, WHICH ARE ADDRESSED SEPARATELY IN SECTION 17(C).<br>The arbitrator shall have no authority to consider or resolve any Claim or issue any relief on any basis other than an individual basis. The arbitrator shall have no authority to consider or resolve any Claim or issue any relief on a class, collective, or representative basis.<br>Notwithstanding any other provision of this Agreement, the Arbitration Agreement or the AAA Rules, disputes regarding the scope, applicability, enforceability, revocability or validity of the Class Action Waiver may be resolved only by a civil court of competent jurisdiction and not by an arbitrator. In any case in which: (1) the dispute is filed as a class, collective, or representative action and (2) there is a final judicial determination that the Class Action Waiver is unenforceable as to any Claims, the class, collective, and/or representative action on such Claims must be litigated in a civil court of competent jurisdiction, but the Class Action Waiver shall be enforced in arbitration on an individual basis as to all other Claims to the fullest extent possible.</li><li><b>Representative PAGA Waiver.</b> Notwithstanding any other provision of this Agreement or the Arbitration Agreement, to the fullest extent permitted by law: (1) you and Rank-X agree not to bring a representative action on behalf of others under the Private Attorneys General Act of 2004 (“PAGA”), California Labor Code § 2698 et seq., in any court or in arbitration, and (2) for any claim brought on a private attorney general basis, including under the California PAGA, both you and Rank-X agree that any such dispute shall be resolved in arbitration on an individual basis only (i.e., to resolve whether you have personally been aggrieved or subject to any violations of law), and that such an action may not be used to resolve the claims or rights of other individuals in a single or collective proceeding (i.e., to resolve whether other individuals have been aggrieved or subject to any violations of law) (collectively, “representative PAGA Waiver”). Notwithstanding any other provision of this Agreement, the Arbitration Agreement or the AAA Rules, disputes regarding the scope, applicability, enforceability, revocability or validity of this representative PAGA Waiver may be resolved only by a civil court of competent jurisdiction and not by an arbitrator. If any provision of this representative PAGA Waiver is found to be unenforceable or unlawful for any reason: (i) the unenforceable provision shall be severed from this Agreement; (ii) severance of the unenforceable provision shall have no impact whatsoever on the Arbitration Agreement or the requirement that any remaining Claims be arbitrated on an individual basis pursuant to the Arbitration Agreement; and (iii) any such representative PAGA or other representative private attorneys general act claims must be litigated in a civil court of competent jurisdiction and not in arbitration. To the extent that there are any Claims to be litigated in a civil court of competent jurisdiction because a civil court of competent jurisdiction determines that the representative PAGA Waiver is unenforceable with respect to those Claims, the Parties agree that litigation of those Claims shall be stayed pending the outcome of any individual Claims in arbitration.</li><li><b>Rules Governing the Arbitration.</b> Any arbitration conducted pursuant to this Arbitration Agreement shall be administered by the American Arbitration Association (“AAA”) pursuant to its Consumer Arbitration Rules that are in effect at the time the arbitration is initiated, as modified by the terms set forth in this Agreement. Copies of these rules can be obtained at the AAA’s website (www.adr.org) (the “AAA Rules”) or by calling the AAA at 1-800-778-7879. Notwithstanding the foregoing, if requested by you and if proper based on the facts and circumstances of the Claims presented, the arbitrator shall have the discretion to select a different set of AAA Rules, but in no event shall the arbitrator consolidate more than one person’s Claims, or otherwise preside over any form of representative, collective, or class proceeding.<br>As part of the arbitration, both you and Rank-X will have the opportunity for reasonable discovery of non-privileged information that is relevant to the Claim. The arbitrator may award any individualized remedies that would be available in court. The arbitrator may award declaratory or injunctive relief only in favor of the individual party seeking relief and only to the extent necessary to provide relief warranted by that party\'s individual claims. The arbitrator will provide a reasoned written statement of the arbitrator’s decision which shall explain the award given and the findings and conclusions on which the decision is based.<br>The arbitrator will decide the substance of all claims in accordance with applicable law, and will honor all claims of privilege recognized by law. The arbitrator shall not be bound by rulings in prior arbitrations involving different Riders or Drivers, but is bound by rulings in prior arbitrations involving the same Rider or Driver to the extent required by applicable law. The arbitrator’s award shall be final and binding and judgment on the award rendered by the arbitrator may be entered in any court having jurisdiction thereof, provided that any award may be challenged in a court of competent jurisdiction.</li><li><b>Arbitration Fees and Awards.</b> The payment of filing and arbitration fees will be governed by the relevant AAA Rules subject to the following modifications:<ol type="i"><li>If you initiate arbitration under this Arbitration Agreement after participating in the optional Negotiation process described in subsection (k) below and are otherwise required to pay a filing fee under the relevant AAA Rules, Rank-X agrees that, unless your claim is for $5,000 or more, your share of the filing and arbitration fees is limited to $50, and that, after you submit proof of payment of the filing fee to Rank-X, Rank-X will promptly reimburse you for all but $50 of the filing fee. If, however, the arbitrator finds that either the substance of your claim or the relief sought in the claim is frivolous or brought for an improper purpose (as measured by the standards set forth in Federal Rule of Civil Procedure 11(b)), then the payment of all such fees will be governed by the AAA Rules.</li><li>Rank-X initiates arbitration under this Arbitration Agreement, Rank-X will pay all AAA filing and arbitration fees.</li><li>With respect to any Claims brought by Rank-X against a Premium Member, or for Claims brought by a Premium Member against Rank-X that: (A) arise out of, or relate to, Rank-X’s actual deactivation of a Premium Member’s account or a threat by Rank-X to deactivate a Premium Member’s account; or (C) arise out of, or relate to, Rank-X’s actual termination of a Premium Member’s Agreement with Rank-X under the termination provisions of this Agreement, or a threat by Rank-X to terminate a Premium Member’s Agreement, Rank-X shall pay all costs unique to arbitration (as compared to the costs of adjudicating the same claims before a court), including the regular and customary arbitration fees and expenses (to the extent not paid by Rank-X pursuant to the fee provisions above). However, if you are the party initiating the Premium Member Claim, you shall be responsible for contributing up to an amount equal to the filing fee that would be paid to initiate the claim in the court of general jurisdiction in the state in which you provide Services to Businesses, unless a lower fee amount would be owed by you pursuant to the AAA Rules, applicable law, or subsection (e)(1) above. Any dispute as to whether a cost is unique to arbitration shall be resolved by the arbitrator.</li><li>Except as provided in Federal Rule of Civil Procedure 68 or any state equivalents, each party shall pay its own attorneys’ fees and pay any costs that are not unique to the arbitration (i.e., costs that each party would incur if the claim(s) were litigated in a court such as costs to subpoena witnesses and/or documents, take depositions and purchase deposition transcripts, copy documents, etc.).</li><li>At the end of any arbitration, the arbitrator may award reasonable fees and costs or any portion thereof to you if you prevail, to the extent authorized by applicable law.<br>vi. If the arbitrator issues you an award that is greater than the value of Rank-X’s last written settlement offer made after you participated in good faith in the optional Negotiation process described in subsection (j) below, then Rank-X will pay you the amount of the award or U.S. $1,000, whichever is greater.</li></ol></li><li><b>Location and Manner of Arbitration.</b> Unless you and Rank-X agree otherwise, any arbitration hearings between Rank-X and a Premium Member will take place in the county of Rank-X’s Principal Office, and any arbitration hearings between Rank-X and a Premium Member will take place in the county in which Rank-X maintains its Principal Office. If AAA arbitration is unavailable in such county, the arbitration hearings will take place in the nearest available location for a AAA arbitration. If your Claim is for $10,000 or less, Rank-X agrees that you may choose whether the arbitration will be conducted solely on the basis of documents submitted to the arbitrator, through a telephonic hearing, or by an in-person hearing as determined by the AAA Rules. If your Claim exceeds $10,000, the right to a hearing will be determined by the AAA Rules.</li><li><b>Exceptions to Arbitration.</b> This Arbitration Agreement shall not require arbitration of the following types of claims: (1) small claims actions brought on an individual basis that are within the scope of such small claims court’s jurisdiction; (2) a representative action brought on behalf of others under PAGA or other private attorneys general acts, to the extent the representative PAGA Waiver in Section 17(c) of such action is deemed unenforceable by a court of competent jurisdiction; (3) claims for workers’ compensation, state disability insurance and unemployment insurance benefits; and (4) claims that may not be subject to arbitration as a matter of law.<br>Nothing in this Arbitration Agreement prevents you from making a report to or filing a claim or charge with the Equal Employment Opportunity Commission, U.S. Department of Labor, Securities Exchange Commission, National Labor Relations Board, or Office of Federal Contract Compliance Programs, or similar local, state or federal agency, and nothing in this Arbitration Agreement shall be deemed to preclude or excuse a party from bringing an administrative claim before any agency in order to fulfill the party\'s obligation to exhaust administrative remedies before making a claim in arbitration, however you knowingly and voluntarily waive the right to seek or recover money damages of any type pursuant to any administrative complaint and instead may seek such relief only through arbitration under this Agreement. Nothing in this Agreement or Arbitration Agreement prevents your participation in an investigation by a government agency of any report, claim or charge otherwise covered by this Arbitration Provision.</li><li><b>Severability.</b> In addition to the severability provisions in subsections (c) above, in the event that any portion of this Arbitration Agreement is deemed illegal or unenforceable, such provision shall be severed and the remainder of the Arbitration Agreement shall be given full force and effect.</li></ol></li><div class="innerText">Rank-X welcomes your questions or comments regarding this Statement of Privacy. If you believe that Rank-X has not adhered to this Statement, please contact Rank-X at:<br></div><br><div class="innerText">Rank-X, LLC</div><div class="innerText">1650 Adams Av.</div><div class="innerText">San Diego, California, 92116</div><br><div class="innerText">Email Address:</div><div class="innerText">contact@rank-x.com</div><br><div class="innerText">Telephone number:</div><div class="innerText"><br>Effective as of May 31, 2017</div><div class="text-right"><button class="btn btn-default" ng-click="vm.goBack()">Back</button></div><br></div></div>'),
$templateCache.put("app/layout/Partials2/favs.html",'<ul class="nav nav-tabs"><li class="active"><a data-toggle="tab" href="#myfavs">My Favorites</a></li><li><a data-toggle="tab" href="#myfriends">My Friends</a></li></ul><div class="tab-content"><div id="myfavs" class="tab-pane fade in active"><div ng-controller="myfavs as vm"><h3>My Favorites</h3><table class="table" ng-if="vm.answerExist2"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;">{{vm.headline2}}</th><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.mylifestyleans | limitTo:vm.maxRes2" ng-click="vm.answerDetail(2,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(2)" ng-if="vm.cb2gt5">&lt;&lt;{{vm.btext2}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist1"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;">{{vm.headline1}}</th><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myfoodans | limitTo:vm.maxRes1" ng-click="vm.answerDetail(1,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(1)" ng-if="vm.cb1gt5">&lt;&lt;{{vm.btext1}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist3"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;">{{vm.headline3}}</th><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myservicesans | limitTo:vm.maxRes3" ng-click="vm.answerDetail(3,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(3)" ng-if="vm.cb3gt5">&lt;&lt;{{vm.btext3}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist4"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;">{{vm.headline4}}</th><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myhealthans | limitTo:vm.maxRes4" ng-click="vm.answerDetail(4,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(4)" ng-if="vm.cb4gt5">&lt;&lt;{{vm.btext4}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist5"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;">{{vm.headline5}}</th><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.mybeautyans | limitTo:vm.maxRes5" ng-click="vm.answerDetail(5,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(5)" ng-if="vm.cb5gt5">&lt;&lt;{{vm.btext5}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist6"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;">{{vm.headline6}}</th><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.mysocialans | limitTo:vm.maxRes6" ng-click="vm.answerDetail(6,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(6)" ng-if="vm.cb6gt5">&lt;&lt;{{vm.btext6}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist7"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;">{{vm.headline7}}</th><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myfamilyans | limitTo:vm.maxRes7" ng-click="vm.answerDetail(7,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(7)" ng-if="vm.cb7gt5">&lt;&lt;{{vm.btext7}}&gt;&gt;</p><div ng-if="vm.noAns"><br><p>You have not endorsed any Establishments yet. Places that you endorse will show up here so you can have quick access to all their specials and promotions.</p></div><div class="text-right" role="group"><button type="button" ng-click="vm.goBack()" class="btn btn-default">Back</button></div></div></div><div id="myfriends" class="tab-pane fade"><div ng-controller="myfriends as vm"><h3>My Friends\' Favorites</h3><table class="table" ng-if="vm.answerExist2"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;">{{vm.headline2}}</th><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.lifestyleans | limitTo:vm.maxRes2 track by $index" style="cursor:pointer;"><td style="width:50%;line-height: 35px" ng-click="vm.answerDetail(2,x)">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td><td><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs | limitTo:1" ng-click="vm.showAllFriendsList(x.userObjs, x.name)" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div></td><td style="line-height: 35px"><div ng-show="x.userObjs.length > 1" style="display: inline"><span class="badge btn-primary" ng-click="vm.showAllFriendsList(x.userObjs, x.name)">{{x.userObjs.length}}</span></div></td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(2)" ng-if="vm.cb2gt5">&lt;&lt;{{vm.btext2}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist1"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;">{{vm.headline1}}</th><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.foodans | limitTo:vm.maxRes1 track by $index" style="cursor:pointer;"><td style="width:50%;line-height: 35px" ng-click="vm.answerDetail(1,x)">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td><td><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs | limitTo:1" ng-click="vm.showAllFriendsList(x.userObjs, x.name)" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div></td><td style="line-height: 35px"><div ng-show="x.userObjs.length > 1" style="display: inline"><span class="badge btn-primary" ng-click="vm.showAllFriendsList(x.userObjs, x.name)">{{x.userObjs.length}}</span></div></td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(1)" ng-if="vm.cb1gt5">&lt;&lt;{{vm.btext1}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist3"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;">{{vm.headline3}}</th><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.servicesans | limitTo:vm.maxRes3 track by $index" style="cursor:pointer;"><td style="width:50%;line-height: 35px" ng-click="vm.answerDetail(3,x)">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td><td><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs | limitTo:1" ng-click="vm.showAllFriendsList(x.userObjs, x.name)" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div></td><td style="line-height: 35px"><div ng-show="x.userObjs.length > 1" style="display: inline"><span class="badge btn-primary" ng-click="vm.showAllFriendsList(x.userObjs, x.name)">{{x.userObjs.length}}</span></div></td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(3)" ng-if="vm.cb3gt5">&lt;&lt;{{vm.btext3}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist4"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;">{{vm.headline4}}</th><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.healthans | limitTo:vm.maxRes4 track by $index" style="cursor:pointer;"><td style="width:50%;line-height: 35px" ng-click="vm.answerDetail(4,x)">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td><td><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs | limitTo:1" ng-click="vm.showAllFriendsList(x.userObjs, x.name)" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div></td><td style="line-height: 35px"><div ng-show="x.userObjs.length > 1" style="display: inline"><span class="badge btn-primary" ng-click="vm.showAllFriendsList(x.userObjs, x.name)">{{x.userObjs.length}}</span></div></td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(4)" ng-if="vm.cb4gt5">&lt;&lt;{{vm.btext4}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist5"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;">{{vm.headline5}}</th><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.beautyans | limitTo:vm.maxRes5 track by $index" style="cursor:pointer;"><td style="width:50%;line-height: 35px" ng-click="vm.answerDetail(5,x)">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td><td><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs | limitTo:1" ng-click="vm.showAllFriendsList(x.userObjs, x.name)" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div></td><td style="line-height: 35px"><div ng-show="x.userObjs.length > 1" style="display: inline"><span class="badge btn-primary" ng-click="vm.showAllFriendsList(x.userObjs, x.name)">{{x.userObjs.length}}</span></div></td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(5)" ng-if="vm.cb5gt5">&lt;&lt;{{vm.btext5}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist6"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;">{{vm.headline6}}</th><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.socialans | limitTo:vm.maxRes6" style="cursor:pointer;"><td style="width:50%;line-height: 35px" ng-click="vm.answerDetail(6,x)">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td><td><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs | limitTo:1" ng-click="vm.showAllFriendsList(x.userObjs, x.name)" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div></td><td style="line-height: 35px"><div ng-show="x.userObjs.length > 1" style="display: inline"><span class="badge btn-primary" ng-click="vm.showAllFriendsList(x.userObjs, x.name)">{{x.userObjs.length}}</span></div></td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(6)" ng-if="vm.cb6gt5">&lt;&lt;{{vm.btext6}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist7"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;">{{vm.headline7}}</th><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.familyans | limitTo:vm.maxRes7" style="cursor:pointer;"><td style="width:50%;line-height: 35px" ng-click="vm.answerDetail(7,x)">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td><td><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs | limitTo:1" ng-click="vm.showAllFriendsList(x.userObjs, x.name)" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div></td><td style="line-height: 35px"><div ng-show="x.userObjs.length > 1" style="display: inline"><span class="badge btn-primary" ng-click="vm.showAllFriendsList(x.userObjs, x.name)">{{x.userObjs.length}}</span></div></td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(7)" ng-if="vm.cb7gt5">&lt;&lt;{{vm.btext7}}&gt;&gt;</p><div ng-if="vm.noAns"><br><p>You have not endorsed any Establishments yet. Places that you endorse will show up here so you can have quick access to all their specials and promotions.</p></div><div class="text-right" role="group"><button type="button" ng-click="vm.goBack()" class="btn btn-default">Back</button></div></div></div></div>'),$templateCache.put("app/layout/Partials2/feedback.html",'<div class="row"><div class="col-lg-6"><content-block type="rxfeedback" dynamic="false"></content-block></div><div class="col-lg-6"><content-block type="rxsuggestion" dynamic="false"></content-block></div></div>'),$templateCache.put("app/layout/Partials2/feeds.html",'<userfeed-block show-all="true" class="show-all"></userfeed-block>'),
$templateCache.put("app/layout/Partials2/mybusiness.html",'<div ui-view="navbar"></div><div id="veil" ng-hide="vm.dataReady"></div><div id="feedLoading" ng-hide="vm.dataReady"><div style="text-align: center" ng-if="!vm.dataReady"><div><img src="/assets/images/loading.gif" class="img" style="width:50px;height:50px"></div><p style="font-size:large">loading your business accounts...</p></div></div><div id="feedLoading" ng-show="vm.purchase_progress"><div style="text-align: center" ng-if="vm.purchase_progress"><div><img src="/assets/images/loading.gif" class="img" style="width:50px;height:50px"></div><p style="font-size:large">Processing your payment information...</p></div></div><div id="feedLoading" ng-show="vm.edit_progress"><div style="text-align: center" ng-if="vm.edit_progress"><div><img src="/assets/images/loading.gif" class="img" style="width:50px;height:50px"></div><p style="font-size:large">Updating your account...</p></div></div><div id="feedLoading" ng-show="vm.cancel_progress"><div style="text-align: center" ng-if="vm.cancel_progress"><div><img src="/assets/images/loading.gif" class="img" style="width:50px;height:50px"></div><p style="font-size:large">Cancelling your subscrpitions...</p></div></div><div ng-if="vm.dataReady" ng-hide="vm.processInProgress"><div><h3 ng-if="vm.overview">My Business</h3><div ng-if="!vm.noAns&&vm.overview" id="mybiztable-container"><table class="table" id="mybiztable"><tbody><thead style="border-style:none;"><tr><th class="text-center">Name</th><th text-align="center" class="text-center">Premium Membership</th><th text-align="center" class="text-center">Custom Ranks</th><th></th><th></th></tr></thead><tr ng-repeat="x in vm.mybizs" style="cursor:pointer;"><td>{{x.name}}</td><td align="center" ng-attr-style="{{x.style}}">{{x.status}}</td><td align="center" ng-attr-style="{{x.style2}}">{{x.status2}}</td><td align="center"><a href="" ng-click="vm.gotomanage(x)">{{(x.isPremium || x.hasRanks) ? \'Manage\':\'Purchase Features\'}}</a></td><td align="center"><a href="" ng-click="vm.gotoanswer(x)">Go to Listing</a></td></tr></tbody></table><div ng-if="vm.mybizs.length == 0"><br><p>You have not bound your account to any business. If you are freelancer own or represent a business in this city, create a listing and bind your account so you can manage its account.</p></div></div><div ng-if="vm.manageview"><h3>{{vm.business.name}}</h3><h4 align="center" style="background-color:#b3b3b3;padding:5px">Contact Info</h4><div><p class="text-left" style="color:{{vm.fnok?\'black\':\'red\'}}"><strong>First Name:</strong>&nbsp{{vm.business.firstname}}</p><p class="text-left" style="color:{{vm.lnok?\'black\':\'red\'}}"><strong>Last Name:</strong>&nbsp{{vm.business.lastname}}</p><p class="text-left" style="color:{{vm.emok?\'black\':\'red\'}}"><strong>Email:</strong>&nbsp{{vm.business.email}}</p></div><div class="text-right" role="group"><button type="button" ng-click="vm.editContact()" class="btn btn-primary">Edit</button></div><h4 align="center" style="background-color:#b3b3b3;padding:5px">Business Info</h4><div><p class="text-left"><strong>Business Name:</strong>&nbsp{{vm.business.name}}</p><p class="text-left"><strong>Address:</strong>&nbsp{{vm.business.location}}</p><p class="text-left"><strong>Phone:</strong>&nbsp{{vm.business.phone}}</p><p class="text-left"><strong>Membership:</strong>&nbsp{{vm.business.status}}</p></div><div class="text-right"><a href="" ng-click="vm.unbind(vm.business.id)">Unbind this business from my account</a></div><h4 align="center" style="background-color:#b3b3b3;padding:5px" ng-if="vm.business.isPremium||vm.business.hasRanks">Subscriptions</h4><div class="text-right"><div ng-if="vm.business.isPremium||vm.business.hasRanks" style="padding-bottom:5px"><button type="button" class="btn btn-primary" ng-class="vm.showPaymentInfo?\'active\':\'\'" ng-click="vm.showPaymentInfoEditClicked()">{{vm.showPaymentInfo?\'Hide Payment Method\':\'Show Payment Method\'}}</button> <button type="button" class="btn btn-primary" ng-class="vm.showInvoices?\'active\':\'\'" ng-click="vm.showInvoicsClicked()">{{vm.showInvoices?\'Hide Invoices\':\'Show Invoices\'}}</button></div></div><div ng-if="vm.showPaymentInfo && !vm.business.loadingInvoices"><h3>Payment Information</h3><hr><div class="text-center"><span>Now you are billing with {{vm.business.customer.sources.data[0].brand}} Card <code> **** - **** - **** - {{vm.business.customer.sources.data[0].last4}} </code></span><br><button id="updateCardButton" name="updateCardButton" class="btn btn-primary" onclick="updateCardNumberButton()" style="margin-top:10px">Enter a New Card</button></div><form action="https://server.rank-x.com/StripeServer/changeSource" method="POST" data-remote="true" ng-submit="changeCardNumber()" id="updateCardNumberForm"><div style="display: none"><script src="https://checkout.stripe.com/checkout.js" class="stripe-button" data-key="pk_test_q9kbYzvzE6uMwZH9ZUjfK6Xq" data-email="{{vm.business.email}}" data-label="Update Card Details" data-name="Rank-X" data-description="Update Card Details" data-panel-label="Subscribe" data-image="/assets/images/rankx-logo-small-2-square.png" data-locale="auto" data-zip-code="true">\n            <\/script></div><input type="hidden" id="userId" name="userId" value="{{vm.business.user}}"> <input type="hidden" id="useraccntId" name="useraccntId" value="{{vm.business.accountid}}"> <input type="hidden" id="stripeId" name="stripeId" value="{{vm.business.stripeid}}"></form></div><div ng-if="vm.showInvoices && !vm.business.loadingInvoices"><h3>Invoices</h3><hr><table class="table"><thead style="border-style:none;"><tr><th style="width:25%" text-align="center">Date</th><th style="width:15%" text-align="center">SubTotal</th><th style="width:15%" text-align="center">Discount</th><th style="width:15%" text-align="center">Total</th><th style="width:20%" class="text-center">Status</th><th style="width:20%"></th></tr></thead><tbody><tr ng-repeat="invoice in vm.business.invoices"><td>{{invoice.date}}</td><td>{{invoice.subtotal/100 + \' \' + invoice.currency.toUpperCase()}}</td><td>{{invoice.discountMsg}}</td><td>{{invoice.total/100 + \' \' + invoice.currency.toUpperCase()}}</td><td>{{invoice.paid ? \'Paid\' : \'\'}}</td><td></td></tr></tbody></table><button class="btn btn-primary pull-right" ng-click="vm.hideInvoices()">Hide Invoices</button></div><div ng-if="vm.business.isPremium||vm.business.hasRanks"><h3>Subscriptions</h3><hr><table class="table"><tbody><thead style="border-style:none;"><tr><th style="width:45%" text-align="center">Subscription</th><th style="width:15%" text-align="center">Monthly Cost</th><th style="width:20%"></th><th style="width:20%"></th></tr></thead><tr ng-if="vm.business.isPremium" style="cursor:pointer;"><td style="width:45%">Premium Membership</td><td style="width:15%">${{vm.business.price}}</td><td style="width:20%"></td><td style="width:20%"><button class="btn btn-danger" style="width:100%" ng-click="vm.cancelPremium()">Cancel</button></td></tr><tr ng-if="vm.business.hasRanks" style="cursor:pointer;"><td style="width:45%">{{vm.business.ranksQty}} Custom Ranks</td><td style="width:15%">${{vm.business.ranksQty*vm.CUSTOM_RANK_PRICE}}</td><td style="width:20%"><button class="btn btn-primary" style="width:100%" ng-click="vm.editRanks()">Edit</button></td><td style="width:20%"><button class="btn btn-danger" style="width:100%" ng-click="vm.cancelAllRanks()">Cancel</button></td></tr><tr ng-if="vm.business.istrial" style="cursor:pointer;"><td style="width:45%">Free Trial</td><td style="width:15%">- ${{vm.business.ranksQty*vm.CUSTOM_RANK_PRICE + vm.business.price}}</td><td style="width:20%"></td><td style="width:20%"></td></tr><tr style="cursor:pointer;"><td style="width:45%">Total</td><td style="width:15%" ng-if="!vm.business.istrial">${{vm.business.ranksQty*vm.CUSTOM_RANK_PRICE + vm.business.price}}</td><td style="width:15%" ng-if="vm.business.istrial">$0</td><td style="width:20%"></td><td style="width:20%"><button class="btn btn-danger" style="width:100%" ng-click="vm.cancelAll()" ng-if="vm.business.hasranks&&vm.business.ispremium">Cancel All</button></td></tr></tbody></table><div ng-if="vm.business.lastPaymentAmount > 0">Thank you for your last payment of <strong>${{vm.business.lastPaymentAmount}}</strong> on <strong>{{vm.business.lastPaymentMade}}</strong>.<br></div><div ng-if="vm.business.nextPaymentAmount > 0">Your next payment will be for <strong>${{vm.business.nextPaymentAmount}}</strong> and it will be billed on <strong>{{vm.business.nextPaymentDue}}</strong><br></div><div ng-if="vm.business.istrial">You have <strong>{{vm.business.daysLeft}} days</strong> left on your free trial. It will expire on <strong>{{vm.business.discountEndDate}}</strong>.<br></div><br>For any questions about your billing, please write us at <strong>contact@rank-x.com</strong></div><div class="well" ng-if="!vm.business.isPremium"><h2 class="text-center">Upgrade to Premium</h2><h3 class="text-center">${{vm.business.price}} / month</h3><i class="fa fa-check"></i><strong>&nbspGet more exposure</strong> within San Diego<br><i class="fa fa-check"></i>&nbspLet people know all your <strong>specials, promotions and special events</strong><br><i class="fa fa-check"></i>&nbspOffer <strong>coupons and promotions</strong>real time.<br><i class="fa fa-check"></i><strong>&nbspDrive more traffic</strong> to your business profile<br><i class="fa fa-check"></i><strong>&nbspGet&nbsp</strong>more customers<br><div class="text-center"><a href="" ng-click="vm.showLearnMore(1)">Learn More</a></div><label class="checkbox-inline"><input type="checkbox" ng-model="vm.getPremium" value="">Get Premium Membership</label></div><div class="well" ng-if="!vm.business.hasRanks"><h2 class="text-center">Purchase Rankings</h2><h3 class="text-center">${{vm.CUSTOM_RANK_PRICE}} / month each</h3><i class="fa fa-check"></i>&nbspCreate <strong>unique rankings and lists</strong> for your own products and services<br><i class="fa fa-check"></i>&nbspUse for: <strong>menu items, recent projects, top-selling products, team members</strong> and more.<br><i class="fa fa-check"></i>&nbsp<strong>Put the spotlight</strong> on any area of your business<br><i class="fa fa-check"></i><strong>&nbspEngage the audience</strong> with the best of what you offer<br><i class="fa fa-check"></i><strong>&nbspGet feedback</strong> from your customers on your specific products or services<br><div class="text-center"><a href="" ng-click="vm.showLearnMore(2)">Learn More</a></div><div class="row"><div class="col-xs-12 col-sm-9 col-md-10 col-lg-10"><label class="checkbox-inline"><input type="checkbox" ng-model="vm.getRanks" value="">Purchase Ranks</label></div><div class="col-xs-12 col-sm-3 col-md-2 col-lg-2"><div class="input-group" ng-if="vm.getRanks"><span class="input-group-btn"><button class="btn btn-primary" ng-click="vm.minusQty()"><i class="fa fa-minus"></i></button></span> <input style="text-align:center" class="form-control" ng-model="vm.ranksQty" type="text" placeholder="vm.ranksQty"> <span class="input-group-btn"><button class="btn btn-primary" ng-click="vm.plusQty()"><i class="fa fa-plus"></i></button></span></div></div></div></div><div class="row" ng-if="vm.sell"><br><div class="col-xs-12 col-sm-12 col-md-2 col-lg-2"><label>Promo Code:</label></div><div class="col-xs-12 col-sm-12 col-md-10 col-lg-10"><div class="input-group"><input class="form-control" style="color:red;" ng-model="vm.promocode" type="text" placeholder="Enter code..."> <span class="input-group-btn"><button class="btn btn-default" ng-click="vm.checkcode()">Check Code</button></span></div></div></div><div class="text-center" ng-if="vm.sell"><br><p><i>{{vm.codeMsg}}</i></p></div><div class="text-center" ng-if="vm.sell"><br><button class="btn btn-success" ng-click="vm.goCheckout()" ng-class="(vm.getPremium || vm.getRanks) ? \'\' : \'disabled\'">Checkout</button></div></div><div ng-if="vm.checkout"><h3>Checkout</h3><br><p style="text-align:center">You are purchasing the following subscriptions for the business <strong>{{vm.business.name}}</strong>:</p><br><table class="table"><tbody><thead style="border-style:none;"><tr><th class="text-center">Name</th><th class="text-center">Quantity</th><th class="text-center">Total</th><th class="text-center"></th></tr></thead><tr ng-if="vm.getPremium"><td style="width:70%">Premium Membership</td><td style="width:15%" align="center">1</td><td style="width:15%" align="center">${{vm.business.price}}</td></tr><tr ng-if="vm.getRanks"><td style="width:70%">Custom Rankings</td><td style="width:15%" align="center">{{vm.ranksQty}}</td><td style="width:15%" align="center">${{vm.ranksQty*vm.CUSTOM_RANK_PRICE}}</td></tr><tr><td style="width:85%" colspan="2">Total</td><td style="width:15%" align="center">${{vm.total}}</td></tr></tbody></table><p ng-if="vm.codeOk">You have a valid code to try the above subscriptions free for 60 days. You will not be charged until the 60 day trial period expires. Afterwards your card will be charged <strong>${{vm.total}}</strong> monthly. You can log in to cancel or make modifications to your account at any time. If you experience any problems during checkout, please contact us at <strong>contact@rank-x.com</strong></p><p ng-if="!vm.codeOk">Your card will be charged <strong>${{vm.total}}</strong> monthly. You can log in to cancel or make modifications to your account at any time. If you experience any problems during checkout, please contact us at <strong>contact@rank-x.com</strong></p><label class="checkbox-inline"><input type="checkbox" ng-model="vm.acceptTOS" value="">I have read and understood the <a ng-click="vm.showTOSCustomersDlg()" target="_blank">Terms of Service</a></label><div class="text-center"><br><button id="checkoutButton" name="checkoutButton" class="btn btn-success" ng-class="vm.acceptTOS ? \'\' : \'disabled\'" onclick="clickStripeButton()" ng-click="vm.clickStripeCheckout()" ng-if="!(vm.business.isPremium == true || vm.business.hasRanks == true)">Pay with Card</button> <button id="checkoutButton" name="checkoutButton" class="btn btn-success" ng-class="vm.acceptTOS ? \'\' : \'disabled\'" ng-click="vm.addSubscription()" ng-if="vm.business.isPremium == true || vm.business.hasRanks == true">Add Subscription</button><br><div ng-show="!vm.showCurrentPlan"><form action="https://server.rank-x.com/StripeServer/charge" method="POST"><div style="display:none"><script src="https://checkout.stripe.com/checkout.js" class="stripe-button" data-key="pk_test_q9kbYzvzE6uMwZH9ZUjfK6Xq" data-email="{{vm.business.email}}" data-label="Pay with Card" data-name="Rank-X" data-description="Premium Membership Subscription" data-panel-label="Subscribe" data-image="/assets/images/rankx-logo-small-2-square.png" data-locale="auto" data-zip-code="true">\n            <\/script></div><input type="hidden" id="userEmail" name="userEmail" value="{{vm.business.email}}"> <input type="hidden" id="userName" name="userName" value="{{vm.business.firstname + \' \' + vm.business.lastname}}"> <input type="hidden" id="bizName" name="bizName" value="{{vm.business.name}}"> <input type="hidden" id="userId" name="userId" value="{{vm.business.user}}"> <input type="hidden" id="useraccntId" name="useraccntId" value="{{vm.business.accountid}}"> <input type="hidden" id="answerId" name="answerId" value="{{vm.business.id}}"> <input type="hidden" id="stripeId" name="stripeId" value="{{vm.business.stripeid}}"> <input type="hidden" id="getPremiumPlan" name="getPremiumPlan" value="{{vm.getPremium}}"> <input type="hidden" id="getCustomRanks" name="getCustomRanks" value="{{vm.getRanks}}"> <input type="hidden" id="ranksQuantity" name="ranksQuantity" value="{{vm.ranksQty}}"> <input type="hidden" id="couponValid" name="couponValid" value="{{vm.codeOk}}"> <input type="hidden" id="couponValid" name="promoCode" value="{{vm.promocode}}"> <input type="hidden" id="bizcat" name="bizcat" value="{{vm.business.bizcat}}"></form></div></div></div><div class="text-left" role="group"><br><button type="button" ng-click="vm.goBack()" class="btn btn-default">Back</button></div><br><br></div></div><script>\n        function eventFire(el, etype){\n          if (el.fireEvent) {\n            el.fireEvent(\'on\' + etype);\n          } else {\n            var evObj = document.createEvent(\'Events\');\n            evObj.initEvent(etype, true, false);\n            el.dispatchEvent(evObj);\n          }\n        }\n        function clickCancelPlanButton() {\n          showLoaderBriefDouble();\n          console.log("about to fire click event");\n          var resultOfEventFire = eventFire(document.getElementById(\'confirmCancelPlan\'), \'click\');\n          console.log("done firing click event, resultOfEventFire: " + resultOfEventFire);\n        }\n        function clickStripeButton() {\n          console.log("about to fire click event");\n          var resultOfEventFire = eventFire(document.getElementsByClassName(\'stripe-button-el\')[0], \'click\');\n\n          console.log("done firing click event, resultOfEventFire: " + resultOfEventFire);\n        }\n\n        function updateCardNumberButton() {\n          console.log("about to fire update stripe info event");\n\t\t  var resultOfEventFire = eventFire($(\'#updateCardNumberForm .stripe-button-el\')[0], \'click\');\n\n          console.log("done firing click event, resultOfEventFire: " + resultOfEventFire);\n        }\n\n\n\t\t// $(\'iframe.stripe_checkout_app\').ready(function(){\n\t\t// \tvar stripe_form_interval = setInterval(function(){\n\t\t// \t\tconsole.log(\'000000000000000000000000\')\n\t\t// \t\tif($(\'button[type="submit"]\').length != 0){\n\t\t// \t\t\tclearInterval(stripe_form_interval)\n\t\t// \t\t\t$(\'button[type="submit"]\').bind(\'cssClassChanged\',function(){\n\t\t// \t\t\t\talert(\'clearInterval(stripe_form_interval)\')\n\t\t\t\t\t\t\n\t\t// \t\t\t})\n\t\t// \t\t} \n\t\t// \t})\n\t\t// })\n        <\/script>'),$templateCache.put("app/layout/Partials2/myfavs.html",'<h3>My Favorites</h3><table class="table" ng-if="vm.answerExist2"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;">{{vm.headline2}}</th><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.mylifestyleans | limitTo:vm.maxRes2" ng-click="vm.answerDetail(2,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(2)" ng-if="vm.cb2gt5">&lt;&lt;{{vm.btext2}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist1"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;">{{vm.headline1}}</th><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myfoodans | limitTo:vm.maxRes1" ng-click="vm.answerDetail(1,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(1)" ng-if="vm.cb1gt5">&lt;&lt;{{vm.btext1}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist3"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;">{{vm.headline3}}</th><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myservicesans | limitTo:vm.maxRes3" ng-click="vm.answerDetail(3,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(3)" ng-if="vm.cb3gt5">&lt;&lt;{{vm.btext3}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist4"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;">{{vm.headline4}}</th><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myhealthans | limitTo:vm.maxRes4" ng-click="vm.answerDetail(4,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(4)" ng-if="vm.cb4gt5">&lt;&lt;{{vm.btext4}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist5"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;">{{vm.headline5}}</th><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.mybeautyans | limitTo:vm.maxRes5" ng-click="vm.answerDetail(5,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(5)" ng-if="vm.cb5gt5">&lt;&lt;{{vm.btext5}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist6"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;">{{vm.headline6}}</th><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.mysocialans | limitTo:vm.maxRes6" ng-click="vm.answerDetail(6,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(6)" ng-if="vm.cb5gt5">&lt;&lt;{{vm.btext6}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist7"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;">{{vm.headline7}}</th><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myfamilyans | limitTo:vm.maxRes7" ng-click="vm.answerDetail(7,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(7)" ng-if="vm.cb5gt5">&lt;&lt;{{vm.btext7}}&gt;&gt;</p><div ng-if="vm.noAns"><br><p>You have not endorsed any Establishments yet. Places that you endorse will show up here so you can have quick access to all their specials and promotions.</p></div><div class="text-right" role="group"><button type="button" ng-click="vm.goBack()" class="btn btn-default">Back</button></div>'),$templateCache.put("app/layout/Partials2/myfriends.html",'<h3>My Favorites</h3><table class="table" ng-if="vm.answerExist2"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;">{{vm.headline2}}</th><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.lifestyleans | limitTo:vm.maxRes2 track by $index" ng-click="vm.answerDetail(2,x)" style="cursor:pointer;"><td style="width:50%;"><div class="profile-avatar-wrapper media-left" align="middle" ng-repeat="userObj in x.userObjs" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div>{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(2)" ng-if="vm.cb2gt5">&lt;&lt;{{vm.btext2}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist1"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;">{{vm.headline1}}</th><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.foodans | limitTo:vm.maxRes1 track by $index" ng-click="vm.answerDetail(1,x)" style="cursor:pointer;"><td style="width:50%;"><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div>{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(1)" ng-if="vm.cb1gt5">&lt;&lt;{{vm.btext1}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist3"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;">{{vm.headline3}}</th><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.servicesans | limitTo:vm.maxRes3 track by $index" ng-click="vm.answerDetail(3,x)" style="cursor:pointer;"><td style="width:50%;"><div class="profile-avatar-wrapper media-left" align="middle" ng-repeat="userObj in x.userObjs" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div>{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(3)" ng-if="vm.cb3gt5">&lt;&lt;{{vm.btext3}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist4"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;">{{vm.headline4}}</th><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.healthans | limitTo:vm.maxRes4 track by $index" ng-click="vm.answerDetail(4,x)" style="cursor:pointer;"><td style="width:50%;"><div class="profile-avatar-wrapper media-left" align="middle" ng-repeat="userObj in x.userObjs" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div>{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(4)" ng-if="vm.cb4gt5">&lt;&lt;{{vm.btext4}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist5"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;">{{vm.headline5}}</th><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.beautyans | limitTo:vm.maxRes5 track by $index" ng-click="vm.answerDetail(5,x)" style="cursor:pointer;"><td style="width:50%;"><div class="profile-avatar-wrapper media-left" align="middle" ng-repeat="userObj in x.userObjs" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div>{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(5)" ng-if="vm.cb5gt5">&lt;&lt;{{vm.btext5}}&gt;&gt;</p><div ng-if="vm.noAns"><br><p>You have not endorsed any Establishments yet. Places that you endorse will show up here so you can have quick access to all their specials and promotions.</p></div><div class="text-right" role="group"><button type="button" ng-click="vm.goBack()" class="btn btn-default">Back</button></div>'),
$templateCache.put("app/layout/Partials2/privacypolicy.html",'<style>\n    #ppBody {\n        font-size: 11pt;\n        width: 100%;\n        margin: 0 auto;\n        text-align: justify;\n    }\n    \n    #ppHeader {\n        font-family: verdana;\n        font-size: 21pt;\n        width: 100%;\n        margin: 0 auto;\n    }\n    \n    .ppConsistencies {\n        display: none;\n    }\n</style><div class="container"><br><div class="text-right"><button class="btn btn-default" ng-click="vm.goBack()">Back</button></div><div id="ppHeader"><span><img src="/assets/images/logo_sq.png" style="width:80px"></span> Rank-X Privacy Policy</div><div id="ppBody"><div class="ppConsistencies"><div class="col-2"><div class="quick-links text-center">Information Collection</div></div><div class="col-2"><div class="quick-links text-center">Information Usage</div></div><div class="col-2"><div class="quick-links text-center">Information Protection</div></div><div class="col-2"><div class="quick-links text-center">Cookie Usage</div></div><div class="col-2"><div class="quick-links text-center">3rd Party Disclosure</div></div><div class="col-2"><div class="quick-links text-center">3rd Party Links</div></div><div class="col-2"></div></div><div style="clear:both;height:10px;"></div><div class="ppConsistencies"><div class="col-2"><div class="col-12 quick-links2 gen-text-center">Google AdSense</div></div><div class="col-2"><div class="col-12 quick-links2 gen-text-center">Fair Information Practices<div class="col-8 gen-text-left gen-xs-text-center" style="font-size:12px;position:relative;left:20px;">Fair information<br>Practices</div></div></div><div class="col-2"><div class="col-12 quick-links2 gen-text-center coppa-pad">COPPA</div></div><div class="col-2"><div class="col-12 quick-links2 quick4 gen-text-center caloppa-pad">CalOPPA</div></div><div class="col-2"><div class="quick-links2 gen-text-center">Our Contact Information<br></div></div></div><div style="clear:both;height:10px;"></div><div class="innerText">Protecting your private information is our priority. This Statement of Privacy applies to <a href="http://www.rank-x.com">http://www.rank-x.com</a> and Rank-X, LLC and governs data collection and usage. For the purposes of this Privacy Policy, unless otherwise noted, all references to Rank-X, LLC include http://www.rank-x.com and Rank-X. The Rank-X website is a Online Advertising and Marketing site. By using the Rank-X website, you consent to the data practices described in this statement.</div><br></div><span id="infoCo"></span><br><div class="grayText"><strong>Collection of your Personal Information</strong></div><br><div class="innerText">Rank-X may collect personally identifiable information, such as your:<ul style="list-style-type: none"><li>- Name</li><li>- Address</li><li>- E-mail Address</li></ul><br>Please keep in mind that if you directly disclose personally identifiable information or personally sensitive data through Rank-X\'s public message boards, this information may be collected and used by others.</div><div class="innerText">Rank-X encourages you to review the privacy statements of websites you choose to link to from Rank-X so that you can understand how those websites collect, use and share your information. Rank-X is not responsible for the privacy statements or other content on websites outside of the Rank-X website.</div><br><div class="grayText"><strong>Use of your Personal Information</strong></div><br><div class="innerText">Rank-X collects and uses your personal information to operate its website(s) and deliver the services you have requested.<br>Rank-X may also use your personally identifiable information to inform you of other products or services available from Rank-X and its affiliates. Rank-X may also contact you via surveys to conduct research about your opinion of current services or of potential new services that may be offered.<br>Rank-X does not sell, rent or lease its customer lists to third parties.<br>Rank-X may, from time to time, contact you on behalf of external business partners about a particular offering that may be of interest to you. In those cases, your unique personally identifiable information (e-mail, name, address, telephone number) is not transferred to the third party. Rank-X may share data with trusted partners to help perform statistical analysis, send you email or postal mail, provide customer support, or arrange for deliveries. All such third parties are prohibited from using your personal information except to provide these services to Rank-X, and they are required to maintain the confidentiality of your information.<br>Rank-X may keep track of the websites and pages our users visit within Rank-X, in order to determine what Rank-X services are the most popular. This data is used to deliver customized content and advertising within Rank-X to customers whose behavior indicates that they are interested in a particular subject area.<br>Rank-X will disclose your personal information, without notice, only if required to do so by law or in the good faith belief that such action is necessary to: (a) conform to the edicts of the law or comply with legal process served on Rank-X or the site; (b) protect and defend the rights or property of Rank-X; and, (c) act under exigent circumstances to protect the personal safety of users of Rank-X, or the public.<br></div><span id="infoUs"></span><br><div class="grayText"><strong>Automatically Collected Information</strong></div><br><div class="innerText">Information about your computer hardware and software may be automatically collected by Rank-X. This information can include: your IP address, browser type, domain names, access times and referring website addresses. This information is used for the operation of the service, to maintain quality of the service, and to provide general statistics regarding use of the Rank-X website.<br><br></div><div class="grayText"><strong>Use of Cookies</strong></div><div class="innerText">The Rank-X website may use "cookies" to help you personalize your online experience. A cookie is a text file that is placed on your hard disk by a web page server. Cookies cannot be used to run programs or deliver viruses to your computer. Cookies are uniquely assigned to you, and can only be read by a web server in the domain that issued the cookie to you.<br>One of the primary purposes of cookies is to provide a convenience feature to save you time. The purpose of a cookie is to tell the Web server that you have returned to a specific page. For example, if you personalize Rank-X pages, or register with Rank-X site or services, a cookie helps Rank-X to recall your specific information on subsequent visits. This simplifies the process of recording your personal information, such as billing addresses, shipping addresses, and so on. When you return to the same Rank-X website, the information you previously provided can be retrieved, so you can easily use the Rank-X features that you customized.<br>You have the ability to accept or decline cookies. Most Web browsers automatically accept cookies, but you can usually modify your browser setting to decline cookies if you prefer. If you choose to decline cookies, you may not be able to fully experience the interactive features of the Rank-X services or websites you visit.<br><br></div><div class="grayText"><strong>Security of your Personal Information</strong></div><br><div class="innerText">Rank-X secures your personal information from unauthorized access, use, or disclosure. Rank-X uses the following methods for this purpose:<br><ul style="list-style-type: none"><li>- SSL Protocol</li><li>- Malware Scanning</li></ul><br>When personal information (such as a credit card number) is transmitted to other websites, it is protected through the use of encryption, such as the Secure Sockets Layer (SSL) protocol.</div><br><div class="grayText"><strong>Children Under Thirteen</strong></div><br><div class="innerText">Rank-X does not knowingly collect personally identifiable information from children under the age of thirteen. If you are under the age of thirteen, you must ask your parent or guardian for permission to use this website.<br></div><br><div class="grayText"><strong>Disconnecting your Rank-X Account from Third Party Websites</strong></div><br><div class="innerText">You will be able to connect your Rank-X account to third party accounts. BY CONNECTING YOUR RANK-X ACCOUNT TO YOUR THIRD PARTY ACCOUNT, YOU ACKNOWLEDGE AND AGREE THAT YOU ARE CONSENTING TO THE CONTINUOUS RELEASE OF INFORMATION ABOUT YOU TO OTHERS (IN ACCORDANCE WITH YOUR PRIVACY SETTINGS ON THOSE THIRD PARTY SITES). IF YOU DO NOT WANT INFORMATION ABOUT YOU, INCLUDING PERSONALLY IDENTIFYING INFORMATION, TO BE SHARED INTHIS MANNER, DO NOT USE THE THIS FEATURE. You may disconnect your account from a third party account at any time. Users may learn how to disconnect their accounts from third-party websites by visiting their "My Account" page. Users may also contact us via email.<br></div><br><div class="grayText"><strong>Account Termination</strong></div><br><div class="innerText">We will remove your public posts from view and/or dissociate them from your account profile, but we may retain information about you for the purposes authorized under this Privacy Policy unless prohibited by law. For example, we may retain information to prevent, investigate, or identify possible wrongdoing in connection with the Service or to comply with legal obligations. Please note that businesses cannot remove their business listings, ratings, or reviews by closing their accounts.<br></div><br><div class="grayText"><strong>Opt-Out &amp; Unsubscribe</strong></div><br><div class="innerText">We respect your privacy and give you an opportunity to opt-out of receiving announcements of certain information. Users may opt-out of receiving any or all communications from Rank-X by contacting us here:<br><ul style="list-style-type: none"><li>- Web page: _________________</li><li>- Email: _________________</li><li>- Phone: _________________</li></ul><br></div><br><div class="grayText"><strong>California Residents: Your California Privacy Rights</strong></div><br><div class="innerText">Rank-X does not disclose your personal information to third parties for the purpose of directly marketing their services to you unless you first agree to such disclosure. If you have any questions regarding this policy, or would like to change your preferences, you may contact us at the address listed below.<br></div><br><div class="grayText"><strong>Changes to this Statement</strong></div><br><div class="innerText">Rank-X will occasionally update this Statement of Privacy to reflect company and customer feedback. Rank-X encourages you to periodically review this Statement to be informed of how Rank-X is protecting your information.<br></div><br><div class="grayText"><strong>Contact Information</strong></div><br><div class="innerText">Rank-X welcomes your questions or comments regarding this Statement of Privacy. If you believe that Rank-X has not adhered to this Statement, please contact Rank-X at:<br></div><br><div class="innerText">Rank-X, LLC</div><div class="innerText">1650 Adams Av.</div><div class="innerText">San Diego, California, 92116</div><br><div class="innerText">Email Address:</div><div class="innerText">contact@rank-x.com</div><br><div class="innerText">Telephone number:</div><div class="innerText"></div><br><div class="innerText"><br>Effective as of May 31, 2017</div><div class="text-right"><button class="btn btn-default" ng-click="vm.goBack()">Back</button></div><br></div>'),
$templateCache.put("app/layout/Partials2/promotertos.html",'<style>\n    #ppBody {\n        font-size: 13pt;\n        width: 100%;\n        margin: 0 auto;\n        text-align: justify;\n    }\n    #ppHeader {\n        font-family: verdana;\n        font-size: 21pt;\n        width: 100%;\n        margin: 0 auto;\n    }\n    \n    .ppConsistencies {\n        display: none;\n    }\n\n\n    #ppBody > ol > li {\n        margin-bottom: 30px;\n    }\n    \n    #ppBody > ol > li > ul > li{\n        margin-bottom: 20px;\n    }\n\n    #ppBody > ol > li > ul > li > ol >li{\n        margin-bottom: 10px;\n    }\n</style><div class="container"><br><div class="text-right"><button class="btn btn-default" ng-click="vm.goBack()">Back</button></div><div id="ppHeader"><span><img src="/assets/images/logo_sq.png" style="width:80px"></span> Rank-X Terms of Use</div><div id="ppBody">These terms of service constitute a legally binding agreement (the “Agreement”) between you and Rank-X, LLC (“Rank-X” “we,” “us” or “our”) governing your use of the Rank-X application, website, and technology platform (collectively, the “Rank-X Platform”). PLEASE BE ADVISED: THIS AGREEMENT CONTAINS PROVISIONS THAT GOVERN HOW CLAIMS YOU AND RANK-X HAVE AGAINST EACH OTHER CAN BE BROUGHT (SEE SECTION 16 BELOW). THESE PROVISIONS WILL, WITH LIMITED EXCEPTION, REQUIRE YOU TO SUBMIT CLAIMS YOU HAVE AGAINST RANK-X TO BINDING AND FINAL ARBITRATION ON AN INDIVIDUAL BASIS, NOT AS A PLAINTIFF OR CLASS MEMBER IN ANY CLASS, GROUP OR REPRESENTATIVE ACTION OR PROCEEDING. AS A DRIVER, YOU HAVE AN OPPORTUNITY TO OPT OUT OF ARBITRATION WITH RESPECT TO CERTAIN CLAIMS AS PROVIDED IN SECTION 17. By entering into to this Agreement, you expressly acknowledge that you understand this Agreement (including the dispute resolution and arbitration provisions Section 16) and accept all of its terms. IF YOU DO NOT AGREE TO BE BOUND BY THE TERMS AND CONDITIONS OF THIS AGREEMENT, YOU MAY NOT USE OR ACCESS THE RANK-X PLATFORM.<ol><li><b>The Rank-X Platform</b> The Rank-X Platform provides an online platform that creates lists, rankings, and forums about businesses, activities, locations, and venues (Collectively “Businesses”). The lists, rankings, and forums within the Rank-X Platform are generated by persons who use the site (“Users”) to rank and comment on Businesses they have experienced. The Rank-X Platform also allows persons to promote Rank-X to various Businesses (“Promoters”) in exchange for a commission-based percentage of the revenue generated by Businesses who the Promoter successfully signs up for Rank-X’s Premium Membership. Each individual Promoter will be assigned a unique alphanumeric code (“Code”). Each Business that signs up for Rank-X’s Premium Membership will use the Code assigned to the Promoter that contacted them to gain access to Rank-X’s Premium Membership benefits. When a Business uses this Code, the Business will be given sixty (60) days of free access to the Premium Membership. If a Business, after the 60-day free period expires, chooses to continue accessing Rank-X’s Premium Membership benefits, it will do so by using the Promoter’s Code to sign up for continued Premium Membership benefits at the specified cost.</li><li><b>Modification to the Agreement</b> In the event Rank-X modifies the terms and conditions of this Agreement, such modifications shall be binding on you only upon your acceptance of the modified Agreement. Rank-X reserves the right to modify any information referenced in the hyperlinks from this Agreement from time to time, and such modifications shall become effective upon posting. Continued use of the Rank-X Platform or Services after any such changes shall constitute your consent to such changes. Unless material changes are made to the arbitration provisions herein, you agree that modification of this Agreement does not create a renewed opportunity to opt out of arbitration (if applicable).</li><li><b>Eligibility</b> The Rank-X Platform may only be used by individuals and businesses who can form legally binding contracts under applicable law. The Rank-X Platform is not available to children (persons under the age of 18) or Premium Members who have had their Premium Member account temporarily or permanently deactivated. By becoming a Premium Member of Rank-X’s Platform, you represent and warrant that you are at least 18 years old and that you have the right, authority and capacity to enter into and abide by the terms and conditions of this Agreement. You may not allow other persons to use your Business’s Rank-X account, and you agree that you are the sole authorized user of your account.</li><li><b>Payments</b> If you are a Promoter, you will receive payment for your efforts in promoting after successfully signing Businesses up for Rank-X’s Premium Memberships (“Services”). All payments are subject to Rank-X Commission, discussed below. Rank-X will process all payments due to you through its third party payments processor. You acknowledge and agree that such amounts shall not include any interest and will be net of any amounts that we are required to withhold by law.<ol type="a"><li><b>a. Commission</b> In exchange for successfully signing Businesses up for Rank-X’s Premium Memberships, Rank-X agrees to pay the Promoter a commission based on the revenue generated by his or her Services. The amount of the applicable Commission is set out in Exhibit 1 herein, and will apply once you accept these Terms of Service. Rank-X reserves the right to change the applicable Commission at any time in Rank-X’s discretion based upon local market factors, and Rank-X will provide you with notice in the event of such change. Commission for each Account generated by Promoter shall continue unless and until this relationship is expressly terminated and/or the Business cancels its Premium Membership. Continued use of the Rank-X Platform after any such change in the Commission calculation shall constitute your consent to such change. The amount of monthly Commission paid by Rank-X to any individual Promoter shall not exceed $5,000.00 United States Dollars per month. Similarly, no individual Promoter may receive commission for more than one hundred (100) Businesses that they sign up for Rank-X’s Premium Memberships (“Accounts”).</li><li><b>Membership Fees and Payment Schedule.</b> Rank-X’s Premium Membership costs vary depending on the industry and business type that the business is associated with, as set out in Section 4(c) below. Additionally, Businesses may purchase custom rankings at the price of $45.00 per month. Rank-X charges Businesses once per month for Premium Membership benefits, which will continue to be accessible by Businesses until and unless this Agreement has been materially breached or terminated with or without cause.</li><li><b>Premium Memberships and Pricing</b> A Business may sign up for and purchase Rank-X’s Premium Membership in order to utilize the various benefits of doing so. “Premium Membership” for purposes of this agreement refers to a Business’s ability to promote the Business’s specials and activities, which drives additional online traffic to the Business’s profile, in exchange for a monthly Premium Membership fee. Rank-X reserves the right to change the pricing schedule for Premium Memberships at any time in our discretion based upon local market factors, and we will provide you with notice in the event of changes to the base Premium Membership fees that would result in a change in the applicable commission rate.</li><li><b>Payment Schedule.</b> Promoters shall be paid once per month (twelve times per year) for the cumulative commission earned in that month, based on the Commission Schedule, that is generated by the Accounts they have obtained for Rank-X.</li><li><b>No Other Payments.</b> No other fees and/or expenses will be paid to the Promoter, unless such fees and/or expenses have been approved in advance by the appropriate executive on behalf of the Recipient in writing. The Promoter shall be solely responsible for any and all taxes, Social Security contributions or payments, disability insurance, unemployment taxes, and other payroll type taxes applicable to such compensation. The Contractor has the right of control over the method of payment for services.</li></ol></li><li><b>Communications</b> By becoming a Premium Member, you agree to receive communications from us, including via e-mail, text message, calls, and push notifications. You agree that texts, calls or prerecorded messages may be generated by automatic telephone dialing systems. Communications from Rank-X, its affiliated companies and/or Drivers, may include but are not limited to: operational communications concerning your Premium Member account or use of the Rank-X Platform or Services, updates concerning new and existing features on the Rank-X Platform, communications concerning promotions run by us or our third-party partners, and news concerning Rank-X and industry developments. Standard text messaging charges applied by your cell phone carrier will apply to text messages we send.<br>IF YOU WISH TO OPT OUT OF PROMOTIONAL EMAILS, YOU CAN UNSUBSCRIBE FROM OUR PROMOTIONAL EMAIL LIST BY FOLLOWING THE UNSUBSCRIBE OPTIONS IN THE PROMOTIONAL EMAIL ITSELF. YOU ACKNOWLEDGE THAT YOU ARE NOT REQUIRED TO CONSENT TO RECEIVE PROMOTIONAL TEXTS OR CALLS AS A CONDITION OF USING THE PLATFORM OR THE SERVICES. IF YOU WISH TO OPT OUT OF ALL TEXTS OR CALLS FROM (INCLUDING OPERATIONAL OR TRANSACTIONAL TEXTS OR CALLS), YOU CAN NOTIFY US VIA EMAIL, HOWEVER YOU ACKNOWLEDGE THAT OPTING OUT OF RECEIVING ALL TEXTS MAY IMPACT YOUR USE OF THE Rank-X PLATFORM OR THE SERVICES.</li><li><b>Your Information</b> Your Information is any information you provide, publish or post to or through the Rank-X Platform (including any profile information you provide) or send to other Users or Premium Members (including via in-application feedback, any email feature, or through any -related Facebook, Twitter or other social media posting) (your “Information”). You consent to us using your Information to create a Premium Member account that will allow you to use the Platform and participate in the Services. Our collection and use of personal information in connection with the Rank-X Platform and Services is as provided in Rank-X’s Privacy Policy located at www.Rank-X.com/privacy. You are solely responsible for your Information and your interactions with other members of the public, and we act only as a passive conduit for your online posting of your Information. You agree to provide and maintain accurate, current and complete information and that we and other members of the public may rely on your Information as accurate, current and complete. To enable Rank-X to use your Information, you grant to us a non-exclusive, worldwide, perpetual, irrevocable, royalty-free, transferable, sub-licensable (through multiple tiers) right and license to exercise the copyright, publicity, and database rights you have in your Information, and to use, copy, perform, display and distribute such Information to prepare derivative works, or incorporate into other works, such Information, in any media now known or not currently known. Rank-X does not assert any ownership over your Information; rather, as between you and Rank-X, subject to the rights granted to us in this Agreement, you retain full ownership of all of your Information and any intellectual property rights or other proprietary rights associated with your Information.<br>You may be able to create or log-in to your Rank-X Premium Member account through online accounts you may have with third party social networking sites (each such account, an "SNS Account"). By connecting to Rank-X through an SNS Account, you understand that Rank-X may access, store, and make available any SNS Account content according to the permission settings of your SNS Account (e.g., friends, mutual friends, contacts or following/followed lists (the “SNS Content”)). You understand that SNS Content may be available on and through the Rank-X Platform to other Users. Unless otherwise specified in this Agreement, all SNS Content, if any, shall be considered to be your Information.</li><li><b>Promotions and Referral Programs</b> Rank-X, at its sole discretion, may make available promotions with different features to any Premium Members or prospective Premium Members. These promotions, unless made to you, shall have no bearing whatsoever on your Agreement or relationship with Rank-X. Rank-X reserves the right to withhold or deduct credits or benefits obtained through a promotion in the event that Rank-X determines or believes that the redemption of the promotion or receipt of the credit or benefit was in error, fraudulent, illegal, or in violation of the applicable promotion terms or this Agreement.</li><li><b>Restricted Activities</b><ol type="a">With respect to your use of the Rank-X Platform and your participation in the Premium Membership, you agree that you will not:<li>impersonate any person, business, or government entity;</li><li>stalk, threaten, or otherwise harass any person or entity, or carry any weapons;</li><li>violate any law, statute, rule, permit, ordinance or regulation;</li><li>interfere with or disrupt the Services or the Rank-X Platform or the servers or networks connected to the Rank-X Platform;</li><li>post Information or interact on the Rank-X Platform or Services in a manner which is false, inaccurate, misleading (directly or by omission or failure to update information), defamatory, libelous, abusive, obscene, profane, offensive, sexually oriented, threatening, harassing, or illegal;</li><li>use the Rank-X Platform in any way that infringes any third party’s rights, including but not limited to: intellectual property rights, copyright, patent, trademark, trade secret or other proprietary rights or rights of publicity or privacy;</li><li>post, email or otherwise transmit any malicious code, files or programs designed to interrupt, damage, destroy or limit the functionality of any computer software or hardware or telecommunications equipment or surreptitiously intercept or expropriate any system, data or personal information;</li><li>forge headers or otherwise manipulate identifiers in order to disguise the origin of any information transmitted through the Rank-X Platform;</li><li>“frame” or “mirror” any part of the Rank-X Platform, without our prior written authorization or use meta tags or code or other devices containing any reference to us in order to direct any person to any other web site for any purpose; or</li><li>modify, adapt, translate, reverse engineer, decipher, decompile or otherwise disassemble any portion of the Rank-X Platform or any software used on or for the Rank-X Platform;</li><li>rent, lease, lend, sell, redistribute, license or sublicense the Rank-X Platform or access to any portion of the Rank-X Platform;</li><li>use any robot, spider, site search/retrieval application, or other manual or automatic device or process to retrieve, index, scrape, “data mine”, or in any way reproduce or circumvent the navigational structure or presentation of the Rank-X Platform or its contents;</li><li>link directly or indirectly to any other web sites;</li><li>transfer or sell your Premium Member account, password and/or identification to any other party</li><li>discriminate against or harass anyone on the basis of race, national origin, religion, gender, gender identity, physical or mental disability, medical condition, marital status, age or sexual orientation, or</li><li>cause any third party to engage in the restricted activities above.</li></ol></li><li><b>Intellectual Property</b> All intellectual property rights in the Rank-X Platform shall be owned by Rank-X absolutely and in their entirety. These rights include and are not limited to database rights, copyright, design rights (whether registered or unregistered), trademarks (whether registered or unregistered) and other similar rights wherever existing in the world together with the right to apply for protection of the same. All other trademarks, logos, service marks, company or product names set forth in the Rank-X Platform are the property of their respective owners. You acknowledge and agree that any questions, comments, suggestions, ideas, feedback or other information (“Submissions”) provided by you to us are non-confidential and shall become the sole property of Rank-X. Rank-X shall own exclusive rights, including all intellectual property rights, and shall be entitled to the unrestricted use and dissemination of these Submissions for any purpose, commercial or otherwise, without acknowledgment or compensation to you.<br>Rank-X and other Rank-X logos, designs, graphics, icons, scripts and service names are registered trademarks, trademarks or trade dress of Rank-X in the United States and/or other countries (collectively, the “Rank-X Marks”). If you provide Services as a Premium Member, Rank-X grants to you, during the term of this Agreement, and subject to your compliance with the terms and conditions of this Agreement, a limited, revocable, non-exclusive license to display and use the Rank-X Marks solely in connection with providing the Services through the Rank-X Platform (“License”). The License is non-transferable and non-assignable, and you shall not grant to any third party any right, permission, license or sublicense with respect to any of the rights granted hereunder without Rank-X’s prior written permission, which it may withhold in its sole discretion. The Rank-X Marks may not be used in any manner that is likely to cause confusion.<br>You acknowledge that Rank-X is the owner and licensor of the Rank-X Marks, including all goodwill associated therewith, and that your use of the Rank-X Marks will confer no additional interest in or ownership of the Rank-X Marks in you but rather inures to the benefit of Rank-X. You agree to use the Rank-X Marks strictly in accordance with Rank-X’s Terms and Conditions and any other guidelines as may be provided to you and revised from time to time, and to immediately cease any use that Rank-X determines to nonconforming or otherwise unacceptable.<br>You agree that you will not: (1) create any materials that incorporate the Rank-X Marks or any derivatives of the Rank-X Marks other than as expressly approved by Rank-X in writing; (2) use the Rank-X Marks in any way that tends to impair their validity as proprietary trademarks, service marks, trade names or trade dress, or use the Rank-X Marks other than in accordance with the terms, conditions and restrictions herein; (3) take any other action that would jeopardize or impair Rank-X’s rights as owner of the Rank-X Marks or the legality and/or enforceability of the Rank-X Marks, including, without limitation, challenging or opposing Rank-X’s ownership in the Rank-X Marks; (4) apply for trademark registration or renewal of trademark registration of any of the Rank-X Marks, any derivative of the Rank-X Marks, any combination of the Rank-X Marks and any other name, or any trademark, service mark, trade name, symbol or word which is similar to the Rank-X Marks; (5) use the Rank-X Marks on or in connection with any product, service or activity that is in violation of any law, statute, government regulation or standard.<br>Violation of any provision of this License may result in immediate termination of the License, in Rank-X’s sole discretion. If you create any materials bearing the Rank-X Marks (in violation of this Agreement or otherwise), you agree that upon their creation Rank-X exclusively owns all right, title and interest in and to such materials, including without limitation any modifications to the Rank-X Marks or derivative works based on the Rank-X Marks. You further agree to assign any interest or right you may have in such materials to Rank-X, and to provide information and execute any documents as reasonably requested by Rank-X to enable Rank-X to formalize such assignment.<br>Rank-X respects the intellectual property of others, and expects Premium Members to do the same. If you believe, in good faith, that any materials on the Rank-X Platform or Services infringe upon your copyrights, please contact us via email.<br></li><li><b>Disclaimers</b> The following disclaimers are made on behalf of Rank-X, our affiliates, subsidiaries, parents, successors and assigns, and each of our respective officers, directors, employees, agents, and shareholders.<br>The Rank-X Platform is provided on an “as is” basis and without any warranty or condition, express, implied or statutory. We do not guarantee and do not promise any specific results from use of the Rank-X Platform and/or the Services, including the ability to provide or receive Services at any given location or time. We specifically disclaim any implied warranties of title, merchantability, fitness for a particular purpose and non-infringement. Some states do not allow the disclaimer of implied warranties, so the foregoing disclaimer may not apply to you.<br>We do not warrant that your use of the Rank-X Platform or Services will be accurate, complete, reliable, current, secure, uninterrupted, always available, or error- free, or will meet your requirements, that any defects in the Rank-X Platform will be corrected, or that the Rank-X Platform is free of viruses or other harmful components. We disclaim liability for, and no warranty is made with respect to, connectivity and availability of the Rank-X Platform or Services.<br>We cannot guarantee that each User of the Rank-X Platform is who he or she claims to be. Please use common sense when using the Rank-X Platform and Services. Please note that there are also risks of dealing with underage persons or people acting under false pretense, and we do not accept responsibility or liability for any content, communication or other use or access of the Rank-X Platform by persons under the age of 18 in violation of this Agreement.<br>Rank-X is not responsible for the conduct, whether online or offline, of any User of the Rank-X Platform or Services. You are solely responsible for your interactions with other Users.<br>Rank-X expressly disclaims any liability arising from the unauthorized use of your Premium Member account. Should you suspect that any unauthorized party may be using your Premium Member account or you suspect any other breach of security, you agree to notify us immediately.<br>Please carefully select the type of information that you post on the Rank-X Platform or through the Services or release to others. We disclaim all liability, regardless of the form of action, for the acts or omissions of other Users (including unauthorized users, or “hackers”).<br>Opinions, advice, statements, offers, or other information or content concerning Rank-X or made available through the Rank-X Platform, but not directly by us, are those of their respective authors, and should not necessarily be relied upon. Such authors are solely responsible for such content. Under no circumstances will we be responsible for any loss or damage resulting from your reliance on information or other content posted by third parties, whether on the Rank-X Platform or otherwise. We reserve the right, but we have no obligation, to monitor the materials posted on the Rank-X Platform and remove any such material that in our sole opinion violates, or is alleged to violate, the law or this agreement or which might be offensive, illegal, or that might violate the rights, harm, or threaten the safety of Users or others.<br>This paragraph applies to any version of the Rank-X Platform that you acquire from the Apple App Store. This Agreement is entered into between you and Rank-X. Apple, Inc. (“Apple”) is not a party to this Agreement and shall have no obligations with respect to the Rank-X Platform. Rank-X, not Apple, is solely responsible for the Rank-X Platform and the content thereof as set forth hereunder. However, Apple and Apple’s subsidiaries may be third party beneficiaries of this Agreement. Upon your acceptance of this Agreement, Apple shall have the right (and will be deemed to have accepted the right) to enforce this Agreement against you as a third party beneficiary thereof. This Agreement incorporates by reference Apple’s Licensed Application End User License Agreement, for purposes of which, you are “the end-user.” In the event of a conflict in the terms of the Licensed Application End User License Agreement and this Agreement, the terms of this Agreement shall control.</li><li><b>Indemnity</b> You will defend, indemnify, and hold Rank-X including our affiliates, subsidiaries, parents, successors and assigns, and each of our respective officers, directors, employees, agents, or shareholders harmless from any claims, actions, suits, losses, costs, liabilities and expenses (including reasonable attorneys’ fees) relating to or arising out of your use of the Rank-X Platform and participation in the Services, including: (1) your breach of this Agreement or the documents it incorporates by reference; (2) your violation of any law or the rights of a third party, including, without limitation, Drivers, Riders, other motorists, and pedestrians, as a result of your own interaction with such third party; (3) any allegation that any materials that you submit to us or transmit through the Rank-X Platform or to us infringe or otherwise violate the copyright, trademark, trade secret or other intellectual property or other rights of any third party; (4) your ownership, use or operation of a motor vehicle or passenger vehicle, including your provision of Services as a Driver; and/or (5) any other activities in connection with the Services. This indemnity shall be applicable without regard to the negligence of any party, including any indemnified person.</li><li><b>Limitation of Liability</b> IN NO EVENT WILL RANK-X, INCLUDING OUR AFFILIATES, SUBSIDIARIES, PARENTS, SUCCESSORS AND ASSIGNS, AND EACH OF OUR RESPECTIVE OFFICERS, DIRECTORS, EMPLOYEES, AGENTS, OR SHAREHOLDERS (COLLECTIVELY “RANK-X” FOR PURPOSES OF THIS SECTION), BE LIABLE TO YOU FOR ANY INCIDENTAL, SPECIAL, EXEMPLARY, PUNITIVE, CONSEQUENTIAL, OR INDIRECT DAMAGES (INCLUDING, BUT NOT LIMITED TO, DAMAGES FOR DELETION, CORRUPTION, LOSS OF DATA, LOSS OF PROGRAMS, FAILURE TO STORE ANY INFORMATION OR OTHER CONTENT MAINTAINED OR TRANSMITTED BY THE RANK-X PLATFORM, SERVICE INTERRUPTIONS, OR FOR THE COST OF PROCUREMENT OF SUBSTITUTE SERVICES) ARISING OUT OF OR IN CONNECTION WITH THE RANK-X PLATFORM, THE SERVICES, OR THIS AGREEMENT, HOWEVER ARISING INCLUDING NEGLIGENCE, EVEN IF WE OR OUR AGENTS OR REPRESENTATIVES KNOW OR HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. THE RANK-X PLATFORM MAY BE USED BY YOU TO REQUEST AND SCHEDULE TRANSPORTATION, GOODS, OR OTHER SERVICES WITH THIRD PARTY PROVIDERS, BUT YOU AGREE THAT RANK-X HAS NO RESPONSIBILITY OR LIABILITY TO YOU RELATED TO ANY TRANSPORTATION, GOODS OR OTHER SERVICES PROVIDED TO YOU BY THIRD PARTY PROVIDERS OTHER THAN AS EXPRESSLY SET FORTH IN Their TERMS. CERTAIN JURISDICTIONS MAY NOT ALLOW THE EXCLUSION OR LIMITATION OF CERTAIN DAMAGES. IF THESE LAWS APPLY TO YOU, SOME OR ALL OF THE ABOVE DISCLAIMERS, EXCLUSIONS OR LIMITATIONS MAY NOT APPLY TO YOU, AND YOU MAY HAVE ADDITIONAL RIGHTS.</li><li><b>Term and Termination</b> This Agreement is effective upon your creation of a Premium Member account. This Agreement may be terminated: a) by Premium Member, without cause, upon seven (7) days’ prior written notice to Rank-X; or b) by either Party immediately, without notice, upon the other Party’s material breach of this Agreement, including but not limited to any breach of Section 8 or breach of Section 9 of this Agreement. In addition, Rank-X may terminate this Agreement or deactivate your User account immediately in the event: (1) you no longer qualify to provide Services or to operate the approved vehicle under applicable law, rule, permit, ordinance or regulation; (2) you fall below Rank-X’s star rating or cancellation threshold; (3) Rank-X has the good faith belief that such action is necessary to protect the safety of the Rank-X community or third parties, provided that in the event of a deactivation pursuant to (1)-(3) above, you will be given notice of the potential or actual deactivation and an opportunity to attempt to cure the issue to Rank-X’s reasonable satisfaction prior to Rank-X permanently terminating the Agreement. For all other breaches of this Agreement, you will be provided notice and an opportunity to cure the breach. If the breach is cured in a timely manner and to Rank-X’s satisfaction, this Agreement will not be permanently terminated. Sections 2, 4, 6, 9 (with respect to the license), 10-12, 14-16 shall survive any termination or expiration of this Agreement.</li><li><b>Confidentiality</b> You agree not to use any technical, financial, strategic and other proprietary and confidential information relating to Rank-X’s business, operations and properties, including Premium Member information (“Confidential Information”) disclosed to you by Rank-X for your own use or for any purpose other than as contemplated herein. You shall not disclose or permit disclosure of any Confidential Information to third parties. You agree to take all reasonable measures to protect the secrecy of and avoid disclosure or use of Confidential Information of Rank-X in order to prevent it from falling into the public domain. Notwithstanding the above, you shall not have liability to Rank-X with regard to any Confidential Information which you can prove: was in the public domain at the time it was disclosed by Rank-X or has entered the public domain through no fault of yours; was known to you, without restriction, at the time of disclosure, as demonstrated by files in existence at the time of disclosure; is disclosed with the prior written approval of Rank-X; becomes known to you, without restriction, from a source other than Rank-X without breach of this Agreement by you and otherwise not in violation of Rank-X’s rights; or is disclosed pursuant to the order or requirement of a court, administrative agency, or other governmental body; provided, however, that You shall provide prompt notice of such court order or requirement to Rank-X to enable Rank-X to seek a protective order or otherwise prevent or restrict such disclosure.</li><li><b>Relationship with Rank-X</b> As a Promoter on the Rank-X Platform, you acknowledge and agree that you and Rank-X are in a direct business relationship, and the relationship between the parties under this Agreement is solely that of independent contracting parties. You and Rank-X expressly agree expressly agree that (1) this is not an employment agreement and does not create an employment relationship between you and Rank-X; and (2) no joint venture, franchisor-franchisee, partnership, or agency relationship is intended or created by this Agreement. You have no authority to bind Rank-X, and you undertake not to hold yourself out as an employee, agent or authorized representative of Rank-X.<br>Rank-X does not, and shall not be deemed to, direct or control you generally or in your performance under this Agreement specifically, including in connection with your provision of Services, your acts or omissions, or your operation and maintenance of your vehicle. You retain the sole right to determine when, where, and for how long you will utilize the Rank-X Platform. You retain the option to accept or to decline or ignore a Rank-X or any Third Party request for Services via the Rank-X Platform, or to cancel your Promoter Code via the Rank-X Platform, subject to Rank-X’s then-current cancellation policies. With the exception of any signage required by law or permit/license rules or requirements, Rank-X shall have no right to require you to: (a) display Rank-X’s names, logos or colors when you are Promoting the Company; or (b) wear a uniform or any other clothing displaying Rank-X’s names, logos or colors. You acknowledge and agree that you have complete discretion to provide Services or otherwise engage in other business or employment activities. The Promoter has no desk or other equipment either located at or furnished by Rank-X.</li><li><b>General</b> Except as provided in Section 16, this Agreement shall be governed by the laws of the State of California without regard to choice of law principles. This choice of law provision is only intended to specify the use of California law to interpret this Agreement and is not intended to create any other substantive right to non-Californians to assert claims under California law whether by statute, common law, or otherwise. If any provision of this Agreement is or becomes invalid or non-binding, the parties shall remain bound by all other provisions hereof. In that event, the parties shall replace the invalid or non- binding provision with provisions that are valid and binding and that have, to the greatest extent possible, a similar effect as the invalid or non-binding provision, given the contents and purpose of this Agreement. You agree that this Agreement and all incorporated agreements may be automatically assigned by Rank-X, in our sole discretion by providing notice to you. Except as explicitly stated otherwise, any notices to Rank-X shall be given by certified mail, postage prepaid and return receipt requested to Rank-X. Any notices to you shall be provided to you through the Rank-X Platform or given to you via the email address or physical you provide to Rank-X during the registration process. Headings are for reference purposes only and in no way define, limit, construe or describe the scope or extent of such section. A party’s failure to act with respect to a breach by the other party does not constitute a waiver of the party’s right to act with respect to subsequent or similar breaches. This Agreement sets forth the entire understanding and agreement between you and Rank-X with respect to the subject matter hereof and supersedes all previous understandings and agreements between the parties, whether oral or written.</li><li><b>Dispute Resolution and Arbitration Agreement</b><ol type="a"><li><b>Agreement to Binding Arbitration Between You and Rank-X.</b> YOU AND RANK-X MUTUALLY AGREE TO WAIVE OUR RESPECTIVE RIGHTS TO RESOLUTION OF DISPUTES IN A COURT OF LAW BY A JUDGE OR JURY AND AGREE TO RESOLVE ANY DISPUTE BY ARBITRATION, as set forth below. This agreement to arbitrate (“Arbitration Agreement”) is governed by the Federal Arbitration Act and survives after the Agreement terminates or your relationship with Rank-X ends. ANY ARBITRATION UNDER THIS AGREEMENT WILL TAKE PLACE ON AN INDIVIDUAL BASIS; CLASS ARBITRATIONS AND CLASS ACTIONS ARE NOT PERMITTED. Except as expressly provided below, this Arbitration Agreement applies to all Claims (defined below) between you and Rank-X, including our affiliates, subsidiaries, parents, successors and assigns, and each of our respective officers, directors, employees, agents, or shareholders.<br>Except as expressly provided below, ALL DISPUTES AND CLAIMS BETWEEN US (EACH A “CLAIM” AND COLLECTIVELY, “CLAIMS”) SHALL BE EXCLUSIVELY RESOLVED BY BINDING ARBITRATION SOLELY BETWEEN YOU AND RANK-X. These Claims include, but are not limited to, any dispute, claim or controversy, whether based on past, present, or future events, arising out of or relating to: this Agreement and prior versions thereof (including the breach, termination, enforcement, interpretation or validity thereof), the Rank-X Platform, the Services, any other goods or services made available through the Rank-X Platform, your relationship with Rank-X, the threatened or actual suspension, deactivation or termination of your Premium Member Account or this Agreement, payments made by you or any payments made or allegedly owed to you, any promotions or offers made by Rank-X, any city, county, state or federal wage-hour law, trade secrets, unfair competition, compensation, breaks and rest periods, expense reimbursement, wrongful termination, discrimination, harassment, retaliation, fraud, defamation, emotional distress, breach of any express or implied contract or covenant, claims arising under federal or state consumer protection laws; claims arising under antitrust laws, claims arising under the Telephone Consumer Protection Act and Fair Credit Reporting Act; and claims arising under the Uniform Trade Secrets Act, Civil Rights Act of 1964, Americans With Disabilities Act, Age Discrimination in Employment Act, Older Workers Benefit Protection Act, Family Medical Leave Act, Fair Labor Standards Act, Employee Retirement Income Security Act (except for individual claims for employee benefits under any benefit plan sponsored by Rank-X and covered by the Employee Retirement Income Security Act of 1974 or funded by insurance), and state statutes, if any, addressing the same or similar subject matters, and all other federal and state statutory and common law claims. All disputes concerning the arbitrability of a Claim (including disputes about the scope, applicability, enforceability, revocability or validity of the Arbitration Agreement) shall be decided by the arbitrator, except as expressly provided below.<br>BY AGREEING TO ARBITRATION, YOU UNDERSTAND THAT YOU AND RANK-X ARE WAIVING THE RIGHT TO SUE IN COURT OR HAVE A JURY TRIAL FOR ALL CLAIMS, EXCEPT AS EXPRESSLY OTHERWISE PROVIDED IN THIS ARBITRATION AGREEMENT. This Arbitration Agreement is intended to require arbitration of every claim or dispute that can lawfully be arbitrated, except for those claims and disputes which by the terms of this Arbitration Agreement are expressly excluded from the requirement to arbitrate.</li><li><b>Prohibition of Class Actions and Non-Individualized Relief.</b> YOU UNDERSTAND AND AGREE THAT YOU AND RANK-X MAY EACH BRING CLAIMS IN ARBITRATION AGAINST THE OTHER ONLY IN AN INDIVIDUAL CAPACITY AND NOT ON A CLASS, COLLECTIVE ACTION, OR REPRESENTATIVE BASIS (“CLASS ACTION WAIVER”). YOU UNDERSTAND AND AGREE THAT YOU AND RANK-X BOTH ARE WAIVING THE RIGHT TO PURSUE OR HAVE A DISPUTE RESOLVED AS A PLAINTIFF OR CLASS MEMBER IN ANY PURPORTED CLASS, COLLECTIVE OR REPRESENTATIVE PROCEEDING. NOTWITHSTANDING THE FOREGOING, THIS SUBSECTION (B) SHALL NOT APPLY TO REPRESENTATIVE PRIVATE ATTORNEYS GENERAL ACT CLAIMS BROUGHT AGAINST RANK-X, WHICH ARE ADDRESSED SEPARATELY IN SECTION 17(C).<br>The arbitrator shall have no authority to consider or resolve any Claim or issue any relief on any basis other than an individual basis. The arbitrator shall have no authority to consider or resolve any Claim or issue any relief on a class, collective, or representative basis.<br>Notwithstanding any other provision of this Agreement, the Arbitration Agreement or the AAA Rules, disputes regarding the scope, applicability, enforceability, revocability or validity of the Class Action Waiver may be resolved only by a civil court of competent jurisdiction and not by an arbitrator. In any case in which: (1) the dispute is filed as a class, collective, or representative action and (2) there is a final judicial determination that the Class Action Waiver is unenforceable as to any Claims, the class, collective, and/or representative action on such Claims must be litigated in a civil court of competent jurisdiction, but the Class Action Waiver shall be enforced in arbitration on an individual basis as to all other Claims to the fullest extent possible.</li><li><b>Representative PAGA Waiver.</b> Notwithstanding any other provision of this Agreement or the Arbitration Agreement, to the fullest extent permitted by law: (1) you and Rank-X agree not to bring a representative action on behalf of others under the Private Attorneys General Act of 2004 (“PAGA”), California Labor Code § 2698 et seq., in any court or in arbitration, and (2) for any claim brought on a private attorney general basis, including under the California PAGA, both you and Rank-X agree that any such dispute shall be resolved in arbitration on an individual basis only (i.e., to resolve whether you have personally been aggrieved or subject to any violations of law), and that such an action may not be used to resolve the claims or rights of other individuals in a single or collective proceeding (i.e., to resolve whether other individuals have been aggrieved or subject to any violations of law) (collectively, “representative PAGA Waiver”). Notwithstanding any other provision of this Agreement, the Arbitration Agreement or the AAA Rules, disputes regarding the scope, applicability, enforceability, revocability or validity of this representative PAGA Waiver may be resolved only by a civil court of competent jurisdiction and not by an arbitrator. If any provision of this representative PAGA Waiver is found to be unenforceable or unlawful for any reason: (i) the unenforceable provision shall be severed from this Agreement; (ii) severance of the unenforceable provision shall have no impact whatsoever on the Arbitration Agreement or the requirement that any remaining Claims be arbitrated on an individual basis pursuant to the Arbitration Agreement; and (iii) any such representative PAGA or other representative private attorneys general act claims must be litigated in a civil court of competent jurisdiction and not in arbitration. To the extent that there are any Claims to be litigated in a civil court of competent jurisdiction because a civil court of competent jurisdiction determines that the representative PAGA Waiver is unenforceable with respect to those Claims, the Parties agree that litigation of those Claims shall be stayed pending the outcome of any individual Claims in arbitration.</li><li><b>Rules Governing the Arbitration.</b> Any arbitration conducted pursuant to this Arbitration Agreement shall be administered by the American Arbitration Association (“AAA”) pursuant to its Consumer Arbitration Rules that are in effect at the time the arbitration is initiated, as modified by the terms set forth in this Agreement. Copies of these rules can be obtained at the AAA’s website (www.adr.org) (the “AAA Rules”) or by calling the AAA at 1-800-778-7879. Notwithstanding the foregoing, if requested by you and if proper based on the facts and circumstances of the Claims presented, the arbitrator shall have the discretion to select a different set of AAA Rules, but in no event shall the arbitrator consolidate more than one person’s Claims, or otherwise preside over any form of representative, collective, or class proceeding.<br>As part of the arbitration, both you and Rank-X will have the opportunity for reasonable discovery of non-privileged information that is relevant to the Claim. The arbitrator may award any individualized remedies that would be available in court. The arbitrator may award declaratory or injunctive relief only in favor of the individual party seeking relief and only to the extent necessary to provide relief warranted by that party\'s individual claims. The arbitrator will provide a reasoned written statement of the arbitrator’s decision which shall explain the award given and the findings and conclusions on which the decision is based.<br>The arbitrator will decide the substance of all claims in accordance with applicable law, and will honor all claims of privilege recognized by law. The arbitrator shall not be bound by rulings in prior arbitrations involving different Riders or Drivers, but is bound by rulings in prior arbitrations involving the same Rider or Driver to the extent required by applicable law. The arbitrator’s award shall be final and binding and judgment on the award rendered by the arbitrator may be entered in any court having jurisdiction thereof, provided that any award may be challenged in a court of competent jurisdiction.</li><li><b>Arbitration Fees and Awards.</b> The payment of filing and arbitration fees will be governed by the relevant AAA Rules subject to the following modifications:<ol type="i"><li>If you initiate arbitration under this Arbitration Agreement after participating in the optional Negotiation process described in subsection (k) below and are otherwise required to pay a filing fee under the relevant AAA Rules, Rank-X agrees that, unless your claim is for $5,000 or more, your share of the filing and arbitration fees is limited to $50, and that, after you submit proof of payment of the filing fee to Rank-X, Rank-X will promptly reimburse you for all but $50 of the filing fee. If, however, the arbitrator finds that either the substance of your claim or the relief sought in the claim is frivolous or brought for an improper purpose (as measured by the standards set forth in Federal Rule of Civil Procedure 11(b)), then the payment of all such fees will be governed by the AAA Rules.</li><li>Rank-X initiates arbitration under this Arbitration Agreement, Rank-X will pay all AAA filing and arbitration fees.</li><li>With respect to any Claims brought by Rank-X against a Premium Member, or for Claims brought by a Premium Member against Rank-X that: (A) arise out of, or relate to, Rank-X’s actual deactivation of a Premium Member’s account or a threat by Rank-X to deactivate a Premium Member’s account; or (C) arise out of, or relate to, Rank-X’s actual termination of a Premium Member’s Agreement with Rank-X under the termination provisions of this Agreement, or a threat by Rank-X to terminate a Premium Member’s Agreement, Rank-X shall pay all costs unique to arbitration (as compared to the costs of adjudicating the same claims before a court), including the regular and customary arbitration fees and expenses (to the extent not paid by Rank-X pursuant to the fee provisions above). However, if you are the party initiating the Premium Member Claim, you shall be responsible for contributing up to an amount equal to the filing fee that would be paid to initiate the claim in the court of general jurisdiction in the state in which you provide Services to Businesses, unless a lower fee amount would be owed by you pursuant to the AAA Rules, applicable law, or subsection (e)(1) above. Any dispute as to whether a cost is unique to arbitration shall be resolved by the arbitrator.</li><li>Except as provided in Federal Rule of Civil Procedure 68 or any state equivalents, each party shall pay its own attorneys’ fees and pay any costs that are not unique to the arbitration (i.e., costs that each party would incur if the claim(s) were litigated in a court such as costs to subpoena witnesses and/or documents, take depositions and purchase deposition transcripts, copy documents, etc.).</li><li>At the end of any arbitration, the arbitrator may award reasonable fees and costs or any portion thereof to you if you prevail, to the extent authorized by applicable law.<br>vi. If the arbitrator issues you an award that is greater than the value of Rank-X’s last written settlement offer made after you participated in good faith in the optional Negotiation process described in subsection (j) below, then Rank-X will pay you the amount of the award or U.S. $1,000, whichever is greater.</li></ol></li><li><b>Location and Manner of Arbitration.</b> Unless you and Rank-X agree otherwise, any arbitration hearings between Rank-X and a Premium Member will take place in the county of Rank-X’s Principal Office, and any arbitration hearings between Rank-X and a Premium Member will take place in the county in which Rank-X maintains its Principal Office. If AAA arbitration is unavailable in such county, the arbitration hearings will take place in the nearest available location for a AAA arbitration. If your Claim is for $10,000 or less, Rank-X agrees that you may choose whether the arbitration will be conducted solely on the basis of documents submitted to the arbitrator, through a telephonic hearing, or by an in-person hearing as determined by the AAA Rules. If your Claim exceeds $10,000, the right to a hearing will be determined by the AAA Rules.</li><li><b>Exceptions to Arbitration.</b> This Arbitration Agreement shall not require arbitration of the following types of claims: (1) small claims actions brought on an individual basis that are within the scope of such small claims court’s jurisdiction; (2) a representative action brought on behalf of others under PAGA or other private attorneys general acts, to the extent the representative PAGA Waiver in Section 17(c) of such action is deemed unenforceable by a court of competent jurisdiction; (3) claims for workers’ compensation, state disability insurance and unemployment insurance benefits; and (4) claims that may not be subject to arbitration as a matter of law.<br>Nothing in this Arbitration Agreement prevents you from making a report to or filing a claim or charge with the Equal Employment Opportunity Commission, U.S. Department of Labor, Securities Exchange Commission, National Labor Relations Board, or Office of Federal Contract Compliance Programs, or similar local, state or federal agency, and nothing in this Arbitration Agreement shall be deemed to preclude or excuse a party from bringing an administrative claim before any agency in order to fulfill the party\'s obligation to exhaust administrative remedies before making a claim in arbitration, however you knowingly and voluntarily waive the right to seek or recover money damages of any type pursuant to any administrative complaint and instead may seek such relief only through arbitration under this Agreement. Nothing in this Agreement or Arbitration Agreement prevents your participation in an investigation by a government agency of any report, claim or charge otherwise covered by this Arbitration Provision.</li><li><b>Severability.</b> In addition to the severability provisions in subsections (c) above, in the event that any portion of this Arbitration Agreement is deemed illegal or unenforceable, such provision shall be severed and the remainder of the Arbitration Agreement shall be given full force and effect.</li></ol></li></ol><div class="innerText">Rank-X welcomes your questions or comments regarding this Statement of Privacy. If you believe that Rank-X has not adhered to this Statement, please contact Rank-X at:<br></div><br><div class="innerText">Rank-X, LLC</div><div class="innerText">1650 Adams Av.</div><div class="innerText">San Diego, California, 92116</div><br><div class="innerText">Email Address:</div><div class="innerText">contact@rank-x.com</div><br><div class="innerText">Telephone number:</div><div class="innerText"><br>Effective as of May 31, 2017</div><div class="text-right"><button class="btn btn-default" ng-click="vm.goBack()">Back</button></div><br></div></div>'),
$templateCache.put("app/layout/Partials2/searchresults.html",'<div ng-show="vm.searchActive"><search-block></search-block></div>'),$templateCache.put("app/layout/Partials2/trends.html",'<trend-block show-all="true"></trend-block>'),$templateCache.put("app/rank/Partials2/RankChat.html",'<div class="container"><div class="row"><div class="col-md-6"><h1 class="page-heading">This is a test</h1></div></div></div>'),$templateCache.put("app/rank/Partials2/addCustomRank.html",'<div class="container"><h4>Add a New Ranking</h4><br><label><strong>Choose the best category for your ranking:</strong></label><div class="dropdown" style="padding-bottom:10px"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" id="nhdropdown" style="width:100%">{{vm.rankCat}}&nbsp&nbsp<span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-middle"><li ng-click="vm.selCat(1)"><a>FOOD</a></li><li ng-click="vm.selCat(2)"><a>LIFESTYLE</a></li><li ng-click="vm.selCat(3)"><a>HEALTH</a></li><li ng-click="vm.selCat(4)"><a>SOCIAL</a></li><li ng-click="vm.selCat(5)"><a>SPORTS</a></li><li ng-click="vm.selCat(6)"><a>PERSONALITIES</a></li><li ng-click="vm.selCat(7)"><a>SERVICES</a></li><li ng-click="vm.selCat(8)"><a>BEAUTY</a></li><li ng-click="vm.selCat(9)"><a>CITY</a></li><li ng-click="vm.selCat(10)"><a>POLITICS</a></li><li ng-click="vm.selCat(11)"><a>SCIENCE & TECH</a></li><li ng-click="vm.selCat(12)"><a>LOVE & RELATIONSHIPS</a></li><li ng-click="vm.selCat(13)"><a>FAMILY</a></li><li ng-click="vm.selCat(14)"><a>OTHER</a></li></ul></div><div ng-if="vm.step > 1"><label><strong>What are you ranking?</strong></label><div class="dropdown" style="padding-bottom:10px"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" id="nhdropdown" style="width:100%">{{vm.rankType}}&nbsp&nbsp<span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-middle"><li ng-click="vm.selType(1)"><a><strong>ESTABLISHMENTS</strong> - i.e. Restaurants, Shops, Gyms</a></li><li ng-click="vm.selType(2)"><a><strong>PEOPLE</strong> - i.e. Athletes, Celebrities, Politicians</a></li><li ng-click="vm.selType(3)"><a><strong>ORGANIZATIONS</strong> - i.e. Companies, Brands</a></li><li ng-click="vm.selType(4)"><a><strong>PLACES</strong> - i.e. Physical Landmarks, Beaches, Parks, etc.</a></li><li ng-click="vm.selType(5)"><a><strong>OPINIONS</strong> - i.e. Favorite things, Things people like, etc.</a></li><li ng-click="vm.selType(6)"><a><strong>CONTRACTORS</strong> - i.e. Freelancers, Handyman, Tutors, etc.</a></li><li ng-click="vm.selType(7)"><a><strong>ITEM / OBJECTS</strong> - i.e. Souvenier, Products, etc.</a></li><li ng-click="vm.selType(8)"><a><strong>EVENTS</strong> - i.e. Parties, Festivals, etc</a></li></ul></div></div><div ng-if="vm.step > 2"><label><strong>Ranking Title:</strong></label><div class="input-group" style="padding-bottom:10px"><input type="text" class="form-control" placeholder="i.e. The best fish tacos in San Diego" ng-model="vm.rankTitle"> <span class="input-group-btn"><button class="btn btn-primary" ng-click="vm.valRank()" type="button">Validate</button></span></div><div class="alert alert-warning" ng-if="vm.showAlert&&vm.similarRanks.length>0" style="padding-bottom:0px;margin-bottom:0px;"><strong>Please confirm.</strong> There are similar rankings to the one you are trying to create. If this ranking is different to any of the existing rankings below, click \'Continue\'. If not, please cancel and expand on the already existing rankings.<br><div ng-repeat="x in vm.similarRanks">&nbsp- {{x.title}}<br></div><div class="text-center"><button class="btn btn-default" ng-click="vm.alertOk()">Continue</button> <button class="btn btn-default" ng-click="vm.goBack()">Cancel</button></div></div><div class="alert alert-success" ng-if="vm.showAlert&&vm.similarRanks.length==0"><strong>Good one!</strong> This rank does not seem to have any duplicates.<br><div class="text-right"><button class="btn btn-default" ng-click="vm.alertOk()">Ok</button></div></div></div><div ng-if="vm.step > 3"><label><strong>Ranking Question:</strong></label><div class="input-group" style="padding-bottom:10px"><input type="text" class="form-control" placeholder="i.e. Who makes the better fish tacos?" ng-model="vm.question"> <span class="input-group-btn"><button class="btn btn-primary" ng-click="vm.questionOk()" type="button">Ok</button></span></div><div class="text-right"><a href="" ng-click="vm.whatisrankquestion()">What is this?</a></div></div><div ng-if="vm.step > 4"><label><strong>Tags</strong></label><div class="input-group" style="padding-bottom:10px"><input type="text" class="form-control" placeholder="tags separated by blank space, i.e. food seafood fish" ng-model="vm.tags"> <span class="input-group-btn"><button class="btn btn-primary" ng-click="vm.tagsOk()" type="button">Ok</button></span></div><div class="text-right"><a href="" ng-click="vm.whataretags()">What are tags?</a></div></div><div ng-if="vm.step > 5"><div class="alert alert-info" ng-if="vm.step == 6"><strong>Select Image</strong><br>1. Enter a query and click the \'Search Images\' button.<br>2. Navigate the available images using the \'<<\' and="" \'="">>\' buttons.<br>3. When you find an image you like, click \'Select Image\'.<br><br></\'></div><br><button class="btn btn-default" ng-click="vm.imageBanksDialog()"><i class="fa fa-question"></i></button> <label><strong>Select Image Bank:</strong></label><div class="row"><div class="hidden-xs col-sm-3 col-md-3 col-lg-3"></div><div class="col-xs-6 col-sm-3 col-md-3 col-lg-3"><img src="../../../assets/images/pixabay-logo.png" ng-click="vm.selImgBank(1)" alt="Pixabay" style="width:100%;height:45px;padding:3px;border-style:solid;border-width:1px;border-color:{{vm.pixabay ? \'black\':\'white\'}}"></div><div class="col-xs-6 col-sm-3 col-md-3 col-lg-3"><img src="../../../assets/images/pexels-logo.png" ng-click="vm.selImgBank(2)" alt="Pexels" style="width:100%;height:45px;padding:3px;border-style:solid;border-width:1px;border-color:{{vm.pexels ? \'black\':\'white\'}}"></div><div class="hidden-xs col-sm-3 col-md-3 col-lg-3"></div></div><label><strong>Image Query:</strong></label><div class="input-group" style="padding-bottom:10px"><input type="text" class="form-control" placeholder="Enter what to search for an image, i.e. taco" ng-model="vm.imageQuery"> <span class="input-group-btn"><button class="btn btn-primary" ng-click="vm.getImages()" type="button">Search Images</button></span></div><div class="text-center"><div class="btn-group"><button class="btn btn-default" ng-click="vm.prevImg()">&nbsp&nbspPrev&nbsp&nbsp</button> <button class="btn btn-default" ng-click="vm.nextImg()">&nbsp&nbspNext&nbsp&nbsp</button></div><button class="btn btn-success {{vm.selImageEnable}}" ng-click="vm.selectImg()">Select Image</button></div></div><br><div ng-if="vm.step > 6"><div class="alert alert-info" ng-if="vm.step == 7"><strong>Select Title Box Background Color</strong><br>1. Select a background color.<br>2. Adjust the shade factor to create attractive visual with your image.<br>3. When you are ready to submit, click the \'Add Rank\' button.</div><label><strong>Select Color Design:</strong></label><div class="container"><div class="row"><div class="hidden-xs col-sm-3 col-md-3 col-lg-3"></div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1" ng-click="vm.csel(1)" ng-attr-style="padding:15px;border-style:solid;border-width:1px;border-color:{{vm.c1sel ? \'black\':\'white\'}};"><div style="height:30px;background-color:brown"></div></div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1" ng-click="vm.csel(2)" ng-attr-style="padding:15px;border-style:solid;border-width:1px;border-color:{{vm.c2sel ? \'black\':\'white\'}};"><div style="height:30px;background-color:#4682b4"></div></div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1" ng-click="vm.csel(3)" ng-attr-style="padding:15px;border-style:solid;border-width:1px;border-color:{{vm.c3sel ? \'black\':\'white\'}};"><div style="height:30px;background-color:#008080"></div></div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1" ng-click="vm.csel(4)" ng-attr-style="padding:15px;border-style:solid;border-width:1px;border-color:{{vm.c4sel ? \'black\':\'white\'}};"><div style="height:30px;background-color:gray"></div></div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1" ng-click="vm.csel(5)" ng-attr-style="padding:15px;border-style:solid;border-width:1px;border-color:{{vm.c5sel ? \'black\':\'white\'}};"><div style="height:30px;background-color:#a3297a"></div></div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1" ng-click="vm.csel(6)" ng-attr-style="padding:15px;border-style:solid;border-width:1px;border-color:{{vm.c6sel ? \'black\':\'white\'}};"><div style="height:30px;background-color:#c68c53"></div></div><div class="hidden-xs col-sm-3 col-md-3 col-lg-3"></div></div><div class="row" style="padding-top:10px"><div class="text-right col-xs-6"><label>Shade Factor:</label></div><div class="btn-group col-xs-6"><button class="btn btn-primary" ng-click="vm.minusShade()">&nbsp&nbsp<i class="fa fa-minus"></i>&nbsp&nbsp</button> <button class="btn btn-primary" ng-click="vm.plusShade()">&nbsp&nbsp<i class="fa fa-plus"></i>&nbsp&nbsp</button></div></div></div></div><div class="container" ng-if="vm.step > 5"><div class="row"><div class="col-xs-12"><div class="well-sm" style="background-color:#666666;color:#f8f8ff;"><h3 class="sub-header">Preview</h3></div></div></div><div class="row" style="padding-bottom:10px"><div class="hidden-xs col-sm-3 col-md-4 col-lg-4"></div><div class="container-bgbox col-xs-6 col-sm-3 col-md-2 col-lg-2"><bg-box bc="{{vm.bc}}" bc2="{{vm.bc2}}" fc="{{vm.fc}}" text="{{vm.rankTitle}}" dir="horizontal" w="100%" h="{{vm.sm ? \'150px\':\'200px\'}}"></bg-box></div><div class="col-xs-6 col-sm-3 col-md-2 col-lg-2" style="margin:0px;padding:0px;border:0px;"><img ng-src="{{vm.image}}" ng-if="!vm.imageLoading" ng-attr-style="width:100%;height:{{vm.sm ? \'150px\':\'200px\'}};"><div ng-attr-style="position:relative;width:100%;height:{{vm.sm ? \'150px\':\'200px\'}};" ng-if="vm.imageLoading"><img src="/assets/images/loading.gif" class="img" style="width:50px;height:50px;position:absolute; top:50%; left:50%; margin-right:-50%;transform: translate(-50%,-50%)"></div></div><div class="hidden-xs col-sm-3 col-md-4 col-lg-4"></div></div></div><br><div class="text-right"><button type="button" class="btn btn-default" ng-click="vm.goBack()">Cancel</button> <button type="button" class="btn btn-primary" ng-click="vm.addRank()" ng-show="vm.showAddButton">{{vm.buttonLabel}}</button></div><br><br></div>'),$templateCache.put("app/rank/Partials2/addRankforAnswer.html",'<br><h4>Add Ranking</h4><label><strong>Title:</strong></label> <input class="form-control" ng-model="vm.rankTitle" type="text" placeholder="{{vm.rankTitle}}"> <label><strong>Question:</strong></label> <input class="form-control" ng-model="vm.question" type="text" placeholder="{{vm.question}}"><div class="text-right"><a href="" ng-click="">What is this?</a></div><div class="form-group" style="padding:5px"><label class="control-label">Intro:</label> <textarea class="form-control" ng-model="vm.introtext" placeholder="{{vm.introtext}}" rows="4"></textarea></div><br><div class="row"><div class="hidden-xs col-sm-2 col-md-2 col-lg-2"></div><div class="col-xs-6 col-sm-2 col-md-2 col-lg-2"><p class="text-right">Background Color</p></div><div class="col-xs-6 col-sm-2 col-md-2 col-lg-2"><color-picker ng-model="vm.bc" color-picker-swatch="true" color-picker-swatch-pos="\'left\'" color-picker-swatch-bootstrap="true" color-picker-swatch-only="true"></color-picker></div><div class="col-xs-6 col-sm-2 col-md-2 col-lg-2"><p class="text-right">Font Color</p></div><div class="col-xs-6 col-sm-2 col-md-2 col-lg-2"><color-picker ng-model="vm.fc" color-picker-swatch="true" color-picker-swatch-pos="\'left\'" color-picker-swatch-bootstrap="true" color-picker-swatch-only="true"></color-picker></div><div class="hidden-xs col-sm-2 col-md-2 col-lg-2"></div></div><h4>Preview</h4><div class="container" ng-if="true"><div class="row" ng-if="vm.type != \'Short-Phrase\'"><div class="col-xs-12"><div class="well-sm" style="background-color:#666666;color:#f8f8ff;"><h3 class="sub-header">The Favorites</h3></div></div></div><div class="row"><div class="container col-xs-6 col-sm-3 col-md-2 col-lg-2" ng-attr-style="background-color:{{vm.bc}};color:{{vm.fc}};height:{{vm.sm ? \'120px\':\'150px\'}};margin:0px;padding:0px;border:0px;position:relative;"><h2 class="hidden-xs text-center" style="padding:3px; margin:0px; position:absolute; top:50%; left:50%; margin-right:-50%;transform: translate(-50%,-50%)">{{vm.rankTitle}}</h2><h3 class="hidden-sm hidden-md hidden-lg hidden-xl text-center" style="padding:3px; margin:0px; position:absolute; top:50%; left:50%; margin-right:-50%;transform: translate(-50%,-50%)">{{vm.rankTitle}}</h3></div><div class="col-xs-6 col-sm-3 col-md-2 col-lg-2" style="margin:0px;padding:0px;border:0px;"><img src="../../../assets/images/noimage.jpg" ng-attr-style="width:100%;height:{{vm.sm ? \'120px\':\'150px\'}};"></div></div></div><br><div class="text-right"><button type="button" class="btn btn-default" ng-click="vm.goBack()">Cancel</button> <button type="button" class="btn btn-primary" ng-click="vm.addRankingforAnswer()">{{vm.buttonLabel}}</button></div>'),$templateCache.put("app/rank/Partials2/editRanking.html",'<div class="container"><h3>Edit Ranking</h3><div class="row" style="padding-bottom:10px"><div class="hidden-xs col-sm-3 col-md-4 col-lg-4"></div><div class="container-bgbox col-xs-6 col-sm-3 col-md-2 col-lg-2"><bg-box bc="{{vm.bc}}" bc2="{{vm.bc2}}" fc="{{vm.fc}}" text="{{vm.rankTitle}}" dir="horizontal" w="100%" h="{{vm.sm ? \'200px\':\'200px\'}}"></bg-box></div><div class="col-xs-6 col-sm-3 col-md-2 col-lg-2" style="margin:0px;padding:0px;border:0px;"><img ng-src="{{vm.image}}" ng-attr-style="width:100%;height:{{vm.sm ? \'200px\':\'200px\'}};"></div><div class="hidden-xs col-sm-3 col-md-4 col-lg-4"></div></div><br><label><strong>Select Image Bank:</strong></label><div class="row"><div class="hidden-xs col-sm-3 col-md-3 col-lg-3"></div><div class="col-xs-6 col-sm-3 col-md-3 col-lg-3"><img src="../../../assets/images/pixabay-logo.png" ng-click="vm.selImgBank(1)" alt="Pixabay" style="width:100%;height:45px;padding:3px;border-style:solid;border-width:1px;border-color:{{vm.pixabay ? \'black\':\'white\'}}"><div class="text-center"><a href="https://www.pixabay.com/">Visit Pixabay</a></div></div><div class="col-xs-6 col-sm-3 col-md-3 col-lg-3"><img src="../../../assets/images/pexels-logo.png" ng-click="vm.selImgBank(2)" alt="Pexels" style="width:100%;height:45px;padding:3px;border-style:solid;border-width:1px;border-color:{{vm.pexels ? \'black\':\'white\'}}"><div class="text-center"><a href="https://www.pexels.com/">Visit Pexels</a></div></div><div class="hidden-xs col-sm-3 col-md-3 col-lg-3"></div></div><div><br><label><strong>Image Query:</strong></label><div class="input-group" style="padding-bottom:10px"><input type="text" class="form-control" placeholder="Enter what to search for an image, i.e. taco" ng-model="vm.imageQuery"> <span class="input-group-btn"><button class="btn btn-secondary" ng-click="vm.getImages()" type="button">Search Images</button></span></div><div class="text-center"><div class="btn-group"><button class="btn btn-default" ng-click="vm.prevImg()">&nbsp&nbspPrev&nbsp&nbsp</button> <button class="btn btn-default" ng-click="vm.nextImg()">&nbsp&nbspNext&nbsp&nbsp</button> <button class="btn btn-default" ng-click="vm.selectImg()">Select Image</button></div></div></div><br><div><label><strong>Select Color Design:</strong></label><div class="container"><div class="row"><div class="hidden-xs col-sm-3 col-md-3 col-lg-3"></div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1" ng-click="vm.csel(1)" ng-attr-style="padding:15px;border-style:solid;border-width:1px;border-color:{{vm.c1sel ? \'black\':\'white\'}};"><div style="height:30px;background-color:brown"></div></div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1" ng-click="vm.csel(2)" ng-attr-style="padding:15px;border-style:solid;border-width:1px;border-color:{{vm.c2sel ? \'black\':\'white\'}};"><div style="height:30px;background-color:#4682b4"></div></div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1" ng-click="vm.csel(3)" ng-attr-style="padding:15px;border-style:solid;border-width:1px;border-color:{{vm.c3sel ? \'black\':\'white\'}};"><div style="height:30px;background-color:#008080"></div></div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1" ng-click="vm.csel(4)" ng-attr-style="padding:15px;border-style:solid;border-width:1px;border-color:{{vm.c4sel ? \'black\':\'white\'}};"><div style="height:30px;background-color:gray"></div></div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1" ng-click="vm.csel(5)" ng-attr-style="padding:15px;border-style:solid;border-width:1px;border-color:{{vm.c5sel ? \'black\':\'white\'}};"><div style="height:30px;background-color:#a3297a"></div></div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1" ng-click="vm.csel(6)" ng-attr-style="padding:15px;border-style:solid;border-width:1px;border-color:{{vm.c6sel ? \'black\':\'white\'}};"><div style="height:30px;background-color:#c68c53"></div></div><div class="hidden-xs col-sm-3 col-md-3 col-lg-3"></div></div><div class="row" style="padding-top:10px"><div class="text-right col-xs-6"><label>Shade Factor:</label></div><div class="btn-group col-xs-6"><button class="btn btn-primary" ng-click="vm.minusShade()">&nbsp&nbsp<i class="fa fa-minus"></i>&nbsp&nbsp</button> <button class="btn btn-primary" ng-click="vm.plusShade()">&nbsp&nbsp<i class="fa fa-plus"></i>&nbsp&nbsp</button></div></div></div></div><br><label><strong>Title:</strong></label> <input class="form-control" ng-model="vm.rankTitle" type="text" placeholder="{{vm.rankTitle}}"> <label><strong>Question:</strong></label> <input class="form-control" ng-model="vm.question" type="text" placeholder="{{vm.question}}"> <label><strong>Tags:</strong></label> <input class="form-control" ng-model="vm.tags" type="text" placeholder="{{vm.tags}}"> <label><strong>Keywords:</strong></label> <input class="form-control" ng-model="vm.keywords" type="text" placeholder="{{vm.keywords}}"> <label><strong>AnswerTags:</strong></label> <input class="form-control" ng-model="vm.answertags" type="text" placeholder="{{vm.answertags}}"> <label><strong>IsAtomic:</strong></label> <input class="form-control" ng-model="vm.isatomic" type="text" placeholder="{{vm.isatomic}}"> <label><strong>Category-Strings:</strong></label> <input class="form-control" ng-model="vm.catstr" type="text" placeholder="{{vm.catstr}}"> <label><strong>Type:</strong></label> <input class="form-control" ng-model="vm.type" bs-typeahead="" type="text" placeholder="{{vm.type}}" bs-options="c for c in vm.typeList"> <label><strong>fimage:</strong></label> <input class="form-control" ng-model="vm.image" type="text" placeholder="{{vm.image}}"> <label><strong>isMP Flag:</strong></label> <input class="form-control" ng-model="vm.ismp" type="text" placeholder="{{vm.ismp}}"> <label><strong>Scope:</strong></label> <input class="form-control" ng-model="vm.scope" type="text" placeholder="{{vm.scope}}"><br><div class="form-group text-right"><button type="button" class="btn btn-default" ng-click="vm.goBack()">Cancel</button> <button type="button" class="btn btn-primary" ng-click="vm.goEdit()">Edit</button> <button type="button" class="btn btn-danger" ng-click="vm.goDelete()">Delete</button></div><br></div>'),$templateCache.put("app/rank/Partials2/match.html",'<div class="well-rank" ng-if="vm.nsm" style="margin:0px;"><h2 class="sub-header">{{vm.table.title}} <span class="nomargin"><button type="button" class="glyphicon glyphicon-remove pull-right" style="margin:0px;padding:0px;border:0px;background-color:#006dcc;color:#002699;font-size:medium;" ng-click="vm.closeRank()"></button></span></h2></div><div class="well-rank" ng-if="vm.sm" style="margin:0px;"><h3 class="sub-header">{{vm.table.title}} <span class="nomargin"><button type="button" class="glyphicon glyphicon-remove pull-right" style="margin:0px;padding:0px;border:0px;background-color:#006dcc;color:#002699;font-size:medium;" ng-click="vm.closeRank()"></button></span></h3></div><h3>{{vm.table.question}}</h3><div class="form-group text-center"><div class="well well-dark">Rank match <strong>{{vm.GP}}</strong> of <strong>{{vm.Tot}}</strong></div></div><div class="row"><div class="col-xs-6 col-md-6 col-lg-6"><div class="well well-light" ng-click="vm.selectAnswer(1)" ng-show="{{vm.type != \'Short-Phrase\'}}"><span ng-repeat="f in vm.fields | filter:(f.isrequired=true)">{{(f.name == "name" && vm.answer1.name) ? vm.answer1.name : ""}} {{(f.name == "cityarea" && vm.answer1.cityarea) ? " - "+ vm.answer1.cityarea : ""}}</span></div><img class="displayed" src="{{vm.answer1.imageurl}}" ng-click="vm.selectAnswer(1)" style="width:100%;max-height:300px" ng-show="{{vm.type != \'Short-Phrase\'}}"><div class="container-answer" style="width:100%; height:auto;" ng-click="vm.selectAnswer(1)" ng-show="{{vm.type == \'Short-Phrase\'}}"><br><h2 style="text-align:center"><strong>{{vm.answer1.name}}</strong></h2><br><h4 style="text-align:center">{{vm.answer1.addinfo}}</h4></div></div><div class="col-xs-6 col-md-6 col-lg-6"><div class="well well-light" ng-click="vm.selectAnswer(2)" ng-show="{{vm.type != \'Short-Phrase\'}}"><span ng-repeat="f in vm.fields | filter:(f.isrequired=true)">{{(f.name == "name" && vm.answer2.name) ? vm.answer2.name : ""}} {{(f.name == "cityarea" && vm.answer2.cityarea) ? " - "+ vm.answer2.cityarea : ""}}</span></div><img class="displayed" src="{{vm.answer2.imageurl}}" ng-click="vm.selectAnswer(2)" style="width:100%;max-height:300px" ng-show="{{vm.type != \'Short-Phrase\'}}"><div class="container-answer" style="width:100%; height:auto;" ng-click="vm.selectAnswer(2)" ng-show="{{vm.type == \'Short-Phrase\'}}"><br><h2 style="text-align:center"><strong>{{vm.answer2.name}}</strong></h2><br><h4 style="text-align:center">{{vm.answer2.addinfo}}</h4></div></div></div><br><div class="row"><div class="form-group text-left col-xs-6 col-md-6 col-lg-6"><button ng-click="vm.answerDetail(1)" type="button" class="btn btn-success">Details</button></div><div class="form-group text-right col-xs-6 col-md-6 col-lg-6"><button ng-click="vm.answerDetail(2)" type="button" class="btn btn-success">Details</button></div></div><div class="form-group text-center"><button ng-click="vm.skipMatch()" type="button" class="btn btn-default">I don\'t know, Skip</button> <button ng-click="vm.rankSummary()" type="button" class="btn btn-danger">Stop</button></div><br>'),$templateCache.put("app/promoters/Partials/promote.html",'<br><div class="container"><h2>Become a Rank-X Promoter</h2><br><p class="text-left">Thank you for your interest in becoming a Rank-X promotor. Please read carefully the information below.</p><div class="accordion" role="tablist" aria-multiselectable="true"><div class-="" "card"=""><div class="card-header" role="tab" id="headingOne" ng-click="vm.show(1)"><h3 class="mb-0" style="background-color:#b3b3b3;padding:5px"><a data-toggle="collapse" data-parent="#accordion" aria-expanded="true" aria-controls="collapseOne">What is Rank-X?</a></h3></div><div id="collapseOne" class="collapse show" role="tabpanel" aria-labelledby="headingOne" ng-show="vm.showOne"><div class="card-block"><p class="text-left">Rank-X is a San Diego based company with a web application designed to create interactive content in the forms of rankings, lists and opinions. We like to focus on things on our city but also cover general topics. Our goal is to be the best source of information for the best services, food, events and things happening around our city in a clean and elegant way. In addition to best deals and specials that different businesses offer. If you have not already done so, please take a time to look at the website. <span><a href="/#!/home">Click here</a></span></p></div></div></div><div class-="" "card"=""><div class="card-header" role="tab" id="headingTwo" ng-click="vm.show(2)"><h3 class="mb-0" style="background-color:#b3b3b3;padding:5px"><a data-toggle="collapse" data-parent="#accordion" aria-expanded="true" aria-controls="collapseTwo">What does Rank-X sells?</a></h3></div><div id="collapseTwo" class="collapse show" role="tabpanel" aria-labelledby="headingTwo" ng-show="vm.showTwo"><div class="card-block"><p class="text-left">Rank-X sells premium memberships to businesses and brands that wish to stand out from others, and to those that wish to promote their specials and promotions with users.</p><div class="row"><div class="col-xs-12 col-sm-6 col-md-3 col-lg-3"><img src="/assets/images/promote_img1.jpg" style="width:100%; height:auto; border-style:solid;border-width:3px; border-color:lightgray"><p style="margin-top:5px">All of the content is generated by lists.</p></div><div class="col-xs-12 col-sm-6 col-md-3 col-lg-3"><img src="/assets/images/promote_img2.jpg" style="width:100%; height:auto; border-style:solid;border-width:3px; border-color:lightgray"><p style="margin-top:5px">When content is presented, a far right column is saved for specials. <i>Premium Business</i> (Demo Restaurant 1) gets highlighted with a short description of the current special.</p></div><div class="col-xs-12 col-sm-6 col-md-3 col-lg-3"><img src="/assets/images/promote_img3.jpg" style="width:100%; height:auto; border-style:solid;border-width:3px; border-color:lightgray"><p style="margin-top:5px">Inside an Establishment detail, a <i>Premium Business</i> can create detail boxes to advertise their specials.</p></div><div class="col-xs-12 col-sm-6 col-md-3 col-lg-3"><img src="/assets/images/promote_img4.jpg" style="width:100%; height:auto; border-style:solid;border-width:3px; border-color:lightgray"><p style="margin-top:5px">Each special can contain an image that can be displayed. Images can contain <strong>coupons</strong>, <strong>flyers</strong>, <strong>bar codes</strong>, etc. It is up to the business the content of the image to be displayed.</p></div></div><p class="text-left"><i>Premium Business</i> can edit and control real-time the specials and promotions that are shown.</p></div></div></div><div class-="" "card"=""><div class="card-header" role="tab" id="headingThree" ng-click="vm.show(3)"><h3 class="mb-0" style="background-color:#b3b3b3;padding:5px"><a data-toggle="collapse" data-parent="#accordion" aria-expanded="true" aria-controls="collapseOne">How much do businesses pay for Premium Membership?</a></h3></div><div id="collapseThree" class="collapse show" role="tabpanel" aria-labelledby="headingThree" ng-show="vm.showThree"><div class="card-block"><p class="text-left">Premium memberships for Rank-X cost $99 per month. When using a promo code businneses get 60 days free trial.</p></div></div></div><div class-="" "card"=""><div class="card-header" role="tab" id="headingFour" ng-click="vm.show(4)"><h3 class="mb-0" style="background-color:#b3b3b3;padding:5px"><a data-toggle="collapse" data-parent="#accordion" aria-expanded="true" aria-controls="collapseFour">What does it mean to be a Rank-X Promotor?</a></h3></div><div id="collapseFour" class="collapse show" role="tabpanel" aria-labelledby="headingFour" ng-show="vm.showFour"><div class="card-block"><p class="text-left">Rank-X promotors are people working as independent contractors that help us promote, advertise and give feedback about the application. The success of Rank-X will depend strongly on its ability to spread the word out about its exsitance to businesses and to get business to subscribe to Rank-X to advertise their specials and promotions. Thus, Rank-X promotors have three basic responsibilities.</p><p class="text-left"><strong>1. Become familiar with the app.</strong> Rank-X Promotors are expected to understand the working of the application, to participate regularly in the rankings, add content and do their best so the content of the application is always engaging, accurate and useful.</p><p class="text-left"><strong>2. Market the application.</strong> Rank-X Promotors are expected to connect with business owners in their area show the value that Rank-X can have in their bussiness. The amount of money earned by a Rank-X promoter will be directly proportional to the amount of businesses they get to sign up.</p><p class="text-left"><strong>3. Provide constant Feedback.</strong> Rank-X Promotors are expected to provide feedback of the workings of the app so it can be continually improved. By keeping the application running smoothly, with help customer retention and</p></div></div></div><div class-="" "card"=""><div class="card-header" role="tab" id="headingFive" ng-click="vm.show(5)"><h3 class="mb-0" style="background-color:#b3b3b3;padding:5px"><a data-toggle="collapse" data-parent="#accordion" aria-expanded="true" aria-controls="collapseFive">What are the benefits of becoming a Rank-X Promotor?</a></h3></div><div id="collapseFive" class="collapse show" role="tabpanel" aria-labelledby="headingFive" ng-show="vm.showFive"><div class="card-block"><p class="text-left">All payments to promotors are strictly based on commissions. Rank-X offers lasting commissions on all accounts that a Rank-X promotor closes. As long as the account that the promoter closed are active, the Promotor will continue receiving commission. There is no limit on how much money a promotor can make.</p><p class="text-left">Consider the example of a Rank-X promoter that closes one business per month and receives $30 commission per business (actual commission might vary). Promoter sign ups come with a 60 days free trial for that business. After free trial expires, and business start paying subscription, Rank-X promoter will get paid commission for that account as shown in the table below.</p><table class="table table-hover cursor"><thead><tr><th align="middle">Month</th><th align="middle">Accnt 1</th><th align="middle">Accnt 2</th><th align="middle">Accnt 3</th><th align="middle">Commission</th></tr></thead><tbody align="middle"><tr><td>1st</td><td>On trial</td><td>-</td><td>-</td><td>$0.00</td></tr><tr><td>2nd</td><td>On trial</td><td>On trial</td><td>-</td><td>$0.00</td></tr><tr><td>3rd</td><td>Active</td><td>On trial</td><td>On trial</td><td>$30.00</td></tr><tr><td>4th</td><td>Active</td><td>Active</td><td>On trial</td><td>$60.00</td></tr><tr><td>5th</td><td>Active</td><td>Active</td><td>Active</td><td>$90.00</td></tr></tbody></table></div></div></div><div class-="" "card"=""><div class="card-header" role="tab" id="headingSix" ng-click="vm.show(6)"><h3 class="mb-0" style="background-color:#b3b3b3;padding:5px"><a data-toggle="collapse" data-parent="#accordion" aria-expanded="true" aria-controls="collapseOne">How do I become a Rank-X promoter?</a></h3></div><div id="collapseSix" class="collapse show" role="tabpanel" aria-labelledby="headingSix" ng-show="vm.showSix"><div class="card-block"><p class="text-left">Becoming a Rank-X promoter is very simple. Only requirement is that you must have an active Facebook account. There is no cost to becoming a promoter, its completely free. To begin, login to Rank-X using your Facebook account. Once you are logged in, click the \'Promote\' link at the bottom of the page. It will redirect you to the Promoter Console, where you will be asked to fill in a form and you will get your Promoter Code right away.</p></div></div></div><footer class="footer"><div class="container"><p class="text-muted">Rank-X is property of Rank-X LLC. San Diego, CA - 2016</p></div></footer></div></div>'),
$templateCache.put("app/promoters/Partials/promoterconsole.html",'<div id="veil" ng-hide="vm.dataReady"></div><div id="feedLoading" ng-hide="vm.dataReady"><div style="text-align: center" ng-if="!vm.dataReady"><div><img src="/assets/images/loading.gif" class="img" style="width:50px;height:50px"></div><p style="font-size:large">loading your accounts...</p></div></div><div ng-if="vm.dataReady"><div class="container"><h3>Promoter Console</h3><div ng-if="vm.userIsPromoter"><h4 align="center" style="background-color:#b3b3b3;padding:5px">Account Information</h4><div ng-if="!vm.promoter.stripeid" style="padding: 10px;background-color: indianred;border-radius: 10px;text-align: center;margin-bottom:10px">You should link your stripe account to get payed. <a class="btn btn-primary" ng-click="vm.connectStripe()">Connect with Stripe</a></div><div ng-if="vm.notifications.length != 0"><notification-block notifications="vm.notifications"></notification-block></div><p class="text-left"><strong>First Name:</strong>&nbsp{{vm.promoter.firstname}}</p><p class="text-left"><strong>Last Name:</strong>&nbsp{{vm.promoter.lastname}}</p><p class="text-left"><strong>Email:</strong>&nbsp{{vm.promoter.email}}</p><p class="text-left"><strong>Address:</strong>&nbsp{{vm.promoter.address}}</p><p class="text-left"><strong>Phone Number:</strong>&nbsp{{vm.promoter.phone}}</p><p class="text-left"><strong>Promoter Code:</strong>&nbsp{{vm.promoter.code}}</p><div class="text-right" role="group"><button type="button" ng-click="vm.goEdit()" class="btn btn-default">Edit</button></div><h4 align="center" style="background-color:#b3b3b3;padding:5px">Accounts</h4><table class="table" ng-if="!vm.noAns&&vm.overview"><tbody><thead style="border-style:none;"><tr><th class="text-center">Business Name</th><th class="text-center">Status</th><th class="text-center">Commission (after trial)</th></tr></thead><tr ng-repeat="x in vm.myaccnts" style="cursor:pointer;"><td ng-click="vm.gotoanswer(x.answerObj)">{{x.name}}</td><td align="middle" ng-attr-style="{{x.style}}" ng-click="vm.gotomanage(x)">{{x.status}}</td><td ng-click="vm.gotomanage(x)" style="text-align:right">${{x.totalCommission}}</td></tr></tbody></table><div ng-if="vm.manageview"><p class="text-left"><strong>Business Name:</strong>&nbsp{{vm.business.answerObj.name}}</p><p class="text-left"><strong>Email:</strong>&nbsp{{vm.business.email}}</p><p class="text-left"><strong>Owner/Contact Name:</strong>&nbsp{{vm.business.username}}</p><p class="text-left"><strong>Last Name:</strong>&nbsp{{vm.promoter.lastname}}</p><p class="text-left"><strong>Status:</strong><span align="middle" ng-attr-style="{{x.style}}">{{x.business.status}}</span></p><p class="text-left"><table class="table" ng-if="vm.business.status==\'Active\'"><tbody><thead style="border-style:none;"><tr><th style="width:45%" text-align="center">Subscription</th><th style="width:15%" text-align="center">Commission</th></tr></thead><tr ng-if="vm.business.ispremium" style="cursor:pointer;"><td style="width:45%">Premium Membership</td><td style="width:15%">${{vm.business.price*vm.STRIPE_COMMISSION_PERCENTAGE}}</td></tr><tr ng-if="vm.business.hasranks" style="cursor:pointer;"><td style="width:45%">{{vm.business.ranksqty}} Custom Ranks</td><td style="width:15%">${{vm.business.ranksqty*vm.CUSTOM_RANK_PRICE*vm.STRIPE_COMMISSION_PERCENTAGE}}</td></tr><tr><td style="width:45%">Total</td><td style="width:15%; background-color: darkgray;">${{vm.business.totalCommission}}</td></tr></tbody></table></p><p class="text-left" ng-if="vm.business.status.indexOf(\'On Trial\') != -1">Will be active from {{vm.business.discountEndDate}}.</p><p class="text-left"><strong>Address:</strong>&nbsp{{vm.promoter.address}}</p><p class="text-left"><strong>Phone Number:</strong>&nbsp{{vm.promoter.phone}}</p></div><div ng-if="vm.noAns"><br><p>No businesses have signed up using your promoter code. For tips and suggestions on how to get businesses to sign up using your promoter code <a href="" ng-click="vm.gotoPromotePage()">click here</a>.</p></div></div><div ng-if="!vm.userIsPromoter"><p>You are currently not registered to be a Promoter. Rank-X promoters help spread the word out about the app to local businesses, as well as monitoring the accuracy of content of the application. In exchange, promoters get paid monthly commissions on all businesses accounts they bring to Rank-X.</p><div class="text-center"><button type="button" ng-click="vm.goSignup()" class="btn btn-success">Sign Up</button> <button type="button" ng-click="vm.gotoPromotePage()" class="btn btn-primary">Learn More</button></div></div><div class="text-right" role="group"><button type="button" ng-click="vm.goBack()" class="btn btn-default">Back</button></div></div></div>'),$templateCache.put("app/promoters/Partials/promotersignup.html",'<div class="container"><h3>Promoter Sign Up</h3><br><form class="form-horizontal" role="form" name="answerForm"><div class="form-group"><label class="control-label capitalize" style="padding-left:10px">First Name:</label> <input class="form-control" ng-model="vm.promoter.firstname" placeholder="{{vm.promoter.firstname}}" style="width:94%;margin-left:10px;margin-right:10px;"> <label class="control-label capitalize" style="padding-left:10px">Last Name:</label> <input class="form-control" ng-model="vm.promoter.lastname" placeholder="{{vm.promoter.lastname}}" style="width:94%;margin-left:10px;margin-right:10px;"> <label class="control-label capitalize" style="padding-left:10px">Email:</label> <input class="form-control" ng-model="vm.promoter.email" placeholder="Your email address" style="width:94%;margin-left:10px;margin-right:10px;"> <label class="control-label capitalize" style="padding-left:10px">Phone:</label> <input class="form-control" ng-model="vm.promoter.phone" placeholder="123-123-1234" style="width:94%;margin-left:10px;margin-right:10px;"> <label class="control-label capitalize" style="padding-left:10px">Address:</label> <input class="form-control" ng-model="vm.promoter.address" placeholder="Your address" style="width:94%;margin-left:10px;margin-right:10px;"></div><label class="checkbox-inline"><input type="checkbox" ng-model="vm.acceptTOS" value="">I have read and understood the <a ng-click="vm.showTOSPromotersDlg()" target="_blank">Terms of Service</a></label></form><br><div class="row"><div class="col-xs-3 col-sm-3 col-md-2"><div class="text-right"><button class="btn btn-primary" ng-click="vm.getcode()">Get Code</button></div></div><div class="col-xs-9 col-sm-9 col-md-10"><h3 style="color:blue; margin:2px">{{vm.code}}</h3></div><br></div><br><div class="text-center"><button class="btn btn-success" ng-click="vm.submit()" ng-class="vm.acceptTOS ? \'\' : \'disabled\'">Submit</button></div><br></div>'),$templateCache.put("app/user/Partials/favs.html",'<ul class="nav nav-tabs"><li class="active"><a data-toggle="tab" href="#userstats">My stats</a></li><li><a data-toggle="tab" href="#myfavs">My Favorites</a></li><li><a data-toggle="tab" href="#myfriends">My Friends</a></li></ul><div class="tab-content"><div id="userstats" class="tab-pane fade in active"><div ng-controller="userstats as vm"><h3>My Stats</h3><div>Award Points: <strong>{{ vm.award_points }} Pts</strong></div><div>Your Current Level: <strong>{{ vm.current_level }}</strong></div><h3>Latest Activities</h3><div ng-repeat="x in vm.feeds | orderBy:\'-id\' | limitTo: vm.maxActivities" style="padding:0px;border:0px;margin-top:10px;"><div class="row" style="margin:4px"><div class="col-xs-10 media" style="padding-left: 5px;padding-right: 5px;"><div ng-if="!x.picture" class="profile-avatar-wrapper media-left"><div class="empty-profile-avatar-wrapper" ng-attr-style="background-color:{{x.bc}};color:{{x.fc}};">{{x.initials}}</div></div><div ng-if="x.picture" class="profile-avatar-wrapper media-left" align="middle"><img ng-src="{{x.picture}}" class="img-responsive img-circle profile-avatar"></div><div ng-if="x.action == \'addAnswer\'" class="media-body" style="vertical-align: middle;">You added <a ng-click="vm.gotoAnswer(x)" style="cursor:pointer">{{x.text1}}</a> to <a ng-click="vm.gotoRank(x)" style="cursor:pointer">{{x.text2}}</a>.</div><div ng-if="x.action == \'voteUpAnswer\'" class="media-body" style="vertical-align: middle;">You endorsed <a ng-click="vm.gotoAnswer(x)" style="cursor:pointer">{{x.text1}}</a> in <a ng-click="vm.gotoRank(x)" style="cursor:pointer">{{x.text2}}</a>.</div><div ng-if="x.action == \'userVoteUpAnswerYouAdded\'" class="media-body" style="vertical-align: middle;">{{x.actorusername}} endorsed your suggestion of <a ng-click="vm.gotoAnswer(x)" style="cursor:pointer">{{x.text1}}</a> in <a ng-click="vm.gotoRank(x)" style="cursor:pointer">{{x.text2}}</a>.</div><div ng-if="x.action == \'voteDownAnswer\'" class="media-body" style="vertical-align: middle;">You voted down <a ng-click="vm.gotoAnswer(x)" style="cursor:pointer">{{x.text1}}</a> in <a ng-click="vm.gotoRank(x)" style="cursor:pointer">{{x.text2}}</a>.</div><div ng-if="x.action == \'userVoteDownAnswerYouAdded\'" class="media-body" style="vertical-align: middle;">{{x.actorusername}} voted down your suggestion of <a ng-click="vm.gotoAnswer(x)" style="cursor:pointer">{{x.text1}}</a> in <a ng-click="vm.gotoRank(x)" style="cursor:pointer">{{x.text2}}</a>.</div><div ng-if="x.action == \'writeOpinion\'" class="media-body" style="vertical-align: middle;">You added the opinion <em>{{x.text2}}</em> to <a ng-click="vm.gotoAnswer(x)" style="cursor:pointer">{{x.text1}}</a>.</div><div ng-if="x.action == \'voteUpOpinion\'" class="media-body" style="vertical-align: middle;">You endorses the opinion: <em>{{x.text2}}</em> for <a ng-click="vm.gotoAnswer(x)" style="cursor:pointer">{{x.text1}}</a>.</div><div ng-if="x.action == \'userVoteUpYourOpinion\'" class="media-body" style="vertical-align: middle;">{{x.actorusername}} endorsed your opinion: <em>{{x.text2}}</em> for <a ng-click="vm.gotoAnswer(x)" style="cursor:pointer">{{x.text1}}</a>.</div><div ng-if="x.action == \'voteDownOpinion\'" class="media-body" style="vertical-align: middle;">You voted down the opinion: <em>{{x.text2}}</em> for <a ng-click="vm.gotoAnswer(x)" style="cursor:pointer">{{x.text1}}</a>.</div><div ng-if="x.action == \'userVoteDownYourOpinion\'" class="media-body" style="vertical-align: middle;">{{x.actorusername}} voted down your opinion: <em>{{x.text2}}</em> for <a ng-click="vm.gotoAnswer(x)" style="cursor:pointer">{{x.text1}}</a>.</div><div ng-if="x.action == \'editAnswer\'" class="media-body" style="vertical-align: middle;">You edited the information of <a ng-click="vm.gotoAnswer(x)" style="cursor:pointer">{{x.text1}}</a>.</div><div ng-if="x.action == \'postPhoto\'" class="media-body" style="vertical-align: middle;">You added a photo of <a ng-click="vm.gotoAnswer(x)" style="cursor:pointer">{{x.text1}}</a>.</div></div><div class="col-xs-2 media">{{x.pts > 0 ? "+" : ""}}{{x.pts}}</div></div></div><p class="text-center" style="color:blue; margin-top:10px; margin-bottom: 60px"><a class="btn btn-default" style="margin-right:20px;" ng-disabled="!vm.isMoreAvailable()" ng-click="vm.seeMoreActivites()">More</a> <a class="btn btn-default" style="margin-right:20px;" ng-disabled="!vm.isLessAvailable()" ng-click="vm.seeLessActivites()">Less</a></p></div></div><div id="myfavs" class="tab-pane fade"><div ng-controller="myfavs as vm"><h3>My Favorites</h3><table class="table" ng-if="vm.answerExist2"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;">{{vm.headline2}}</th><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.mylifestyleans | limitTo:vm.maxRes2" ng-click="vm.answerDetail(2,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(2)" ng-if="vm.cb2gt5">&lt;&lt;{{vm.btext2}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist1"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;">{{vm.headline1}}</th><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myfoodans | limitTo:vm.maxRes1" ng-click="vm.answerDetail(1,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(1)" ng-if="vm.cb1gt5">&lt;&lt;{{vm.btext1}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist3"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;">{{vm.headline3}}</th><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myservicesans | limitTo:vm.maxRes3" ng-click="vm.answerDetail(3,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(3)" ng-if="vm.cb3gt5">&lt;&lt;{{vm.btext3}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist4"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;">{{vm.headline4}}</th><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myhealthans | limitTo:vm.maxRes4" ng-click="vm.answerDetail(4,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(4)" ng-if="vm.cb4gt5">&lt;&lt;{{vm.btext4}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist5"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;">{{vm.headline5}}</th><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.mybeautyans | limitTo:vm.maxRes5" ng-click="vm.answerDetail(5,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(5)" ng-if="vm.cb5gt5">&lt;&lt;{{vm.btext5}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist6"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;">{{vm.headline6}}</th><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.mysocialans | limitTo:vm.maxRes6" ng-click="vm.answerDetail(6,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(6)" ng-if="vm.cb6gt5">&lt;&lt;{{vm.btext6}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist7"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;">{{vm.headline7}}</th><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myfamilyans | limitTo:vm.maxRes7" ng-click="vm.answerDetail(7,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(7)" ng-if="vm.cb7gt5">&lt;&lt;{{vm.btext7}}&gt;&gt;</p><div ng-if="vm.noAns"><br><p>You have not endorsed any Establishments yet. Places that you endorse will show up here so you can have quick access to all their specials and promotions.</p></div><div class="text-right" role="group"><button type="button" ng-click="vm.goBack()" class="btn btn-default">Back</button></div></div></div><div id="myfriends" class="tab-pane fade"><div ng-controller="myfriends as vm"><h3>My Friends\' Favorites</h3><table class="table" ng-if="vm.answerExist2"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;">{{vm.headline2}}</th><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.lifestyleans | limitTo:vm.maxRes2 track by $index" style="cursor:pointer;"><td style="width:50%;line-height: 35px" ng-click="vm.answerDetail(2,x)">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td><td><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs | limitTo:1" ng-click="vm.showAllFriendsList(x.userObjs, x.name)" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div></td><td style="line-height: 35px"><div ng-show="x.userObjs.length > 1" style="display: inline"><span class="badge btn-primary" ng-click="vm.showAllFriendsList(x.userObjs, x.name)">{{x.userObjs.length}}</span></div></td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(2)" ng-if="vm.cb2gt5">&lt;&lt;{{vm.btext2}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist1"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;">{{vm.headline1}}</th><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.foodans | limitTo:vm.maxRes1 track by $index" style="cursor:pointer;"><td style="width:50%;line-height: 35px" ng-click="vm.answerDetail(1,x)">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td><td><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs | limitTo:1" ng-click="vm.showAllFriendsList(x.userObjs, x.name)" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div></td><td style="line-height: 35px"><div ng-show="x.userObjs.length > 1" style="display: inline"><span class="badge btn-primary" ng-click="vm.showAllFriendsList(x.userObjs, x.name)">{{x.userObjs.length}}</span></div></td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(1)" ng-if="vm.cb1gt5">&lt;&lt;{{vm.btext1}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist3"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;">{{vm.headline3}}</th><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.servicesans | limitTo:vm.maxRes3 track by $index" style="cursor:pointer;"><td style="width:50%;line-height: 35px" ng-click="vm.answerDetail(3,x)">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td><td><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs | limitTo:1" ng-click="vm.showAllFriendsList(x.userObjs, x.name)" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div></td><td style="line-height: 35px"><div ng-show="x.userObjs.length > 1" style="display: inline"><span class="badge btn-primary" ng-click="vm.showAllFriendsList(x.userObjs, x.name)">{{x.userObjs.length}}</span></div></td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(3)" ng-if="vm.cb3gt5">&lt;&lt;{{vm.btext3}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist4"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;">{{vm.headline4}}</th><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.healthans | limitTo:vm.maxRes4 track by $index" style="cursor:pointer;"><td style="width:50%;line-height: 35px" ng-click="vm.answerDetail(4,x)">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td><td><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs | limitTo:1" ng-click="vm.showAllFriendsList(x.userObjs, x.name)" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div></td><td style="line-height: 35px"><div ng-show="x.userObjs.length > 1" style="display: inline"><span class="badge btn-primary" ng-click="vm.showAllFriendsList(x.userObjs, x.name)">{{x.userObjs.length}}</span></div></td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(4)" ng-if="vm.cb4gt5">&lt;&lt;{{vm.btext4}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist5"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;">{{vm.headline5}}</th><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.beautyans | limitTo:vm.maxRes5 track by $index" style="cursor:pointer;"><td style="width:50%;line-height: 35px" ng-click="vm.answerDetail(5,x)">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td><td><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs | limitTo:1" ng-click="vm.showAllFriendsList(x.userObjs, x.name)" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div></td><td style="line-height: 35px"><div ng-show="x.userObjs.length > 1" style="display: inline"><span class="badge btn-primary" ng-click="vm.showAllFriendsList(x.userObjs, x.name)">{{x.userObjs.length}}</span></div></td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(5)" ng-if="vm.cb5gt5">&lt;&lt;{{vm.btext5}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist6"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;">{{vm.headline6}}</th><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.socialans | limitTo:vm.maxRes6" style="cursor:pointer;"><td style="width:50%;line-height: 35px" ng-click="vm.answerDetail(6,x)">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td><td><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs | limitTo:1" ng-click="vm.showAllFriendsList(x.userObjs, x.name)" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div></td><td style="line-height: 35px"><div ng-show="x.userObjs.length > 1" style="display: inline"><span class="badge btn-primary" ng-click="vm.showAllFriendsList(x.userObjs, x.name)">{{x.userObjs.length}}</span></div></td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(6)" ng-if="vm.cb6gt5">&lt;&lt;{{vm.btext6}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist7"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;">{{vm.headline7}}</th><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;"></th><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.familyans | limitTo:vm.maxRes7" style="cursor:pointer;"><td style="width:50%;line-height: 35px" ng-click="vm.answerDetail(7,x)">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td><td><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs | limitTo:1" ng-click="vm.showAllFriendsList(x.userObjs, x.name)" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div></td><td style="line-height: 35px"><div ng-show="x.userObjs.length > 1" style="display: inline"><span class="badge btn-primary" ng-click="vm.showAllFriendsList(x.userObjs, x.name)">{{x.userObjs.length}}</span></div></td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(7)" ng-if="vm.cb7gt5">&lt;&lt;{{vm.btext7}}&gt;&gt;</p><div ng-if="vm.noAns"><br><p>You have not endorsed any Establishments yet. Places that you endorse will show up here so you can have quick access to all their specials and promotions.</p></div><div class="text-right" role="group"><button type="button" ng-click="vm.goBack()" class="btn btn-default">Back</button></div></div></div></div>'),$templateCache.put("app/user/Partials/myfavs.html",'<h3>My Favorites</h3><table class="table" ng-if="vm.answerExist2"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;">{{vm.headline2}}</th><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.mylifestyleans | limitTo:vm.maxRes2" ng-click="vm.answerDetail(2,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(2)" ng-if="vm.cb2gt5">&lt;&lt;{{vm.btext2}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist1"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;">{{vm.headline1}}</th><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myfoodans | limitTo:vm.maxRes1" ng-click="vm.answerDetail(1,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(1)" ng-if="vm.cb1gt5">&lt;&lt;{{vm.btext1}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist3"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;">{{vm.headline3}}</th><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myservicesans | limitTo:vm.maxRes3" ng-click="vm.answerDetail(3,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(3)" ng-if="vm.cb3gt5">&lt;&lt;{{vm.btext3}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist4"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;">{{vm.headline4}}</th><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myhealthans | limitTo:vm.maxRes4" ng-click="vm.answerDetail(4,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(4)" ng-if="vm.cb4gt5">&lt;&lt;{{vm.btext4}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist5"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;">{{vm.headline5}}</th><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.mybeautyans | limitTo:vm.maxRes5" ng-click="vm.answerDetail(5,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(5)" ng-if="vm.cb5gt5">&lt;&lt;{{vm.btext5}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist6"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;">{{vm.headline6}}</th><th ng-attr-style="background-color:{{vm.bgc6}};color:{{vm.fc6}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.mysocialans | limitTo:vm.maxRes6" ng-click="vm.answerDetail(6,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(6)" ng-if="vm.cb5gt5">&lt;&lt;{{vm.btext6}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist7"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;">{{vm.headline7}}</th><th ng-attr-style="background-color:{{vm.bgc7}};color:{{vm.fc7}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.myfamilyans | limitTo:vm.maxRes7" ng-click="vm.answerDetail(7,x)" style="cursor:pointer;"><td style="width:50%;">{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(7)" ng-if="vm.cb5gt5">&lt;&lt;{{vm.btext7}}&gt;&gt;</p><div ng-if="vm.noAns"><br><p>You have not endorsed any Establishments yet. Places that you endorse will show up here so you can have quick access to all their specials and promotions.</p></div><div class="text-right" role="group"><button type="button" ng-click="vm.goBack()" class="btn btn-default">Back</button></div>'),
$templateCache.put("app/user/Partials/myfriends.html",'<h3>My Favorites</h3><table class="table" ng-if="vm.answerExist2"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;">{{vm.headline2}}</th><th ng-attr-style="background-color:{{vm.bgc2}};color:{{vm.fc2}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.lifestyleans | limitTo:vm.maxRes2 track by $index" ng-click="vm.answerDetail(2,x)" style="cursor:pointer;"><td style="width:50%;"><div class="profile-avatar-wrapper media-left" align="middle" ng-repeat="userObj in x.userObjs" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div>{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(2)" ng-if="vm.cb2gt5">&lt;&lt;{{vm.btext2}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist1"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;">{{vm.headline1}}</th><th ng-attr-style="background-color:{{vm.bgc1}};color:{{vm.fc1}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.foodans | limitTo:vm.maxRes1 track by $index" ng-click="vm.answerDetail(1,x)" style="cursor:pointer;"><td style="width:50%;"><div class="profile-avatar-wrapper media-left" ng-repeat="userObj in x.userObjs" align="middle" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div>{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(1)" ng-if="vm.cb1gt5">&lt;&lt;{{vm.btext1}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist3"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;">{{vm.headline3}}</th><th ng-attr-style="background-color:{{vm.bgc3}};color:{{vm.fc3}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.servicesans | limitTo:vm.maxRes3 track by $index" ng-click="vm.answerDetail(3,x)" style="cursor:pointer;"><td style="width:50%;"><div class="profile-avatar-wrapper media-left" align="middle" ng-repeat="userObj in x.userObjs" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div>{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(3)" ng-if="vm.cb3gt5">&lt;&lt;{{vm.btext3}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist4"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;">{{vm.headline4}}</th><th ng-attr-style="background-color:{{vm.bgc4}};color:{{vm.fc4}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.healthans | limitTo:vm.maxRes4 track by $index" ng-click="vm.answerDetail(4,x)" style="cursor:pointer;"><td style="width:50%;"><div class="profile-avatar-wrapper media-left" align="middle" ng-repeat="userObj in x.userObjs" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div>{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(4)" ng-if="vm.cb4gt5">&lt;&lt;{{vm.btext4}}&gt;&gt;</p><table class="table" ng-if="vm.answerExist5"><tbody><thead style="border-style:none;"><tr><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;">{{vm.headline5}}</th><th ng-attr-style="background-color:{{vm.bgc5}};color:{{vm.fc5}};width:50%;"></th></tr></thead><tr ng-repeat="x in vm.beautyans | limitTo:vm.maxRes5 track by $index" ng-click="vm.answerDetail(5,x)" style="cursor:pointer;"><td style="width:50%;"><div class="profile-avatar-wrapper media-left" align="middle" ng-repeat="userObj in x.userObjs" style="display: inline"><img ng-src="{{userObj.picture.data.url}}" class="img-responsive img-circle profile-avatar" style="display: inline"></div>{{x.name}}</td><td ng-attr-style="background-color:{{x.sp_bc}};color:{{x.sp_fc}}">{{x.sp_title}}</td></tr></tbody></table><p class="text-right" style="color:blue;" ng-click="vm.seeMore(5)" ng-if="vm.cb5gt5">&lt;&lt;{{vm.btext5}}&gt;&gt;</p><div ng-if="vm.noAns"><br><p>You have not endorsed any Establishments yet. Places that you endorse will show up here so you can have quick access to all their specials and promotions.</p></div><div class="text-right" role="group"><button type="button" ng-click="vm.goBack()" class="btn btn-default">Back</button></div>'),$templateCache.put("app/user/Partials/userstats.html","")}]),function(){"use strict";function userstats(location,$rootScope,$state,$q,users,userpts,fbusers,uaf){function gotoAnswer(x){$state.go("answerDetail",{index:x.answer})}function gotoRank(x){$state.go("rankSummary",{index:x.category})}function loadUserStats(){$q.all([userpts.getRecsByUser($rootScope.user.id)]).then(function(result){var user_points=result[0];vm.totalActivitiesCount=user_points.length;for(var activities=[],uaf_ids=[],i=0;i<user_points.length;i++)uaf_ids.push(user_points[i].uaf);$q.all([uaf.getUafsFromId(uaf_ids)]).then(function(result){for(var _uafs=result[0],uafs=[],i=0;i<_uafs.length;i++)uafs[_uafs[i].id.toString()]=_uafs[i];for(var i=0;i<user_points.length;i++){var activity=angular.copy(angular.extend(uafs[parseInt(user_points[i].uaf)],user_points[i]));activities.push(activity)}vm.feeds=activities})})}function seeMoreActivites(){vm.maxActivities+=10}function isMoreAvailable(){return vm.totalActivitiesCount-10>=vm.maxActivities}function seeLessActivites(){vm.maxActivities-=10}function isLessAvailable(){return vm.maxActivities>=20}var vm=this;vm.title="userstats",vm.award_points="",vm.current_level="",vm.maxActivities=10,vm.totalActivitiesCount=0,vm.seeMoreActivites=seeMoreActivites,vm.isMoreAvailable=isMoreAvailable,vm.seeLessActivites=seeLessActivites,vm.isLessAvailable=isLessAvailable,vm.gotoRank=gotoRank,vm.gotoAnswer=gotoAnswer,function(){loadUserStats(),$rootScope.DEBUG_MODE&&console.log("userstats page Loaded!")}()}angular.module("app").controller("userstats",userstats),userstats.$inject=["$location","$rootScope","$state","$q","users","userpts","fbusers","uaf"]}(),function(){"use strict";function myfriends(location,$rootScope,$state,$window,votes,$scope,dialog){function showAllFriendsList(userObjs,answername){dialog.showAllFriendsListDlg(userObjs,answername)}function formatTables(){for(var i=0;i<$rootScope.headlines.length;i++)if("food"==$rootScope.headlines[i].type){vm.bgc1=$rootScope.headlines[i].bc,vm.fc1=$rootScope.headlines[i].fc,vm.headline1=$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("lifestyle"==$rootScope.headlines[i].type){vm.bgc2=$rootScope.headlines[i].bc,vm.fc2=$rootScope.headlines[i].fc,vm.headline2=$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("services"==$rootScope.headlines[i].type){vm.bgc3=$rootScope.headlines[i].bc,vm.fc3=$rootScope.headlines[i].fc,vm.headline3=$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("health"==$rootScope.headlines[i].type){vm.bgc4=$rootScope.headlines[i].bc,vm.fc4=$rootScope.headlines[i].fc,vm.headline4=$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("beauty"==$rootScope.headlines[i].type){vm.bgc5=$rootScope.headlines[i].bc,vm.fc5=$rootScope.headlines[i].fc,vm.headline5=$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("social"==$rootScope.headlines[i].type){vm.bgc6=$rootScope.headlines[i].bc,vm.fc6=$rootScope.headlines[i].fc,vm.headline6=$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("family"==$rootScope.headlines[i].type){vm.bgc7=$rootScope.headlines[i].bc,vm.fc7=$rootScope.headlines[i].fc,vm.headline7=$rootScope.headlines[i].title;break}}function formatData(){var answer={},category={};vm.foodans=[],vm.lifestyleans=[],vm.servicesans=[],vm.healthans=[],vm.beautyans=[],vm.socialans=[],vm.familyans=[];for(var i=0;i<$rootScope.friends_votes.length;i++)if(1==$rootScope.friends_votes[i].vote){var idx=$rootScope.answers.map(function(x){return x.id}).indexOf($rootScope.friends_votes[i].answer);if(answer=$rootScope.answers[idx],idx>-1&&"Establishment"==answer.type)for(var n=0;n<$rootScope.catansrecs.length;n++)if($rootScope.catansrecs[n].answer==answer.id){var idx2=$rootScope.content.map(function(x){return x.id}).indexOf($rootScope.catansrecs[n].category);if(!(category=$rootScope.content[idx2]))continue;(category.title.indexOf("food")>-1||category.tags.indexOf("food")>-1)&&addRecord(vm.foodans,answer,i),(category.title.indexOf("lifestyle")>-1||category.tags.indexOf("lifestyle")>-1)&&addRecord(vm.lifestyleans,answer,i),(category.title.indexOf("services")>-1||category.tags.indexOf("services")>-1)&&addRecord(vm.servicesans,answer,i),(category.title.indexOf("health")>-1||category.tags.indexOf("health")>-1)&&addRecord(vm.healthans,answer,i),(category.title.indexOf("beauty")>-1||category.tags.indexOf("beauty")>-1)&&addRecord(vm.beautyans,answer,i),(category.title.indexOf("social")>-1||category.tags.indexOf("social")>-1)&&addRecord(vm.socialans,answer,i),(category.title.indexOf("family")>-1||category.tags.indexOf("family")>-1)&&addRecord(vm.familyans,answer,i)}}vm.foodans.length>5&&(vm.cb1gt5=!0),vm.lifestyleans.length>5&&(vm.cb2gt5=!0),vm.servicesans.length>5&&(vm.cb3gt5=!0),vm.healthans.length>5&&(vm.cb4gt5=!0),vm.beautyans.length>5&&(vm.cb5gt5=!0),vm.socialans.length>5&&(vm.cb6gt5=!0),vm.familyans.length>5&&(vm.cb7gt5=!0),vm.foodans.length>0?vm.answerExist1=!0:vm.answerExist1=!1,vm.lifestyleans.length>0?vm.answerExist2=!0:vm.answerExist2=!1,vm.servicesans.length>0?vm.answerExist3=!0:vm.answerExist3=!1,vm.healthans.length>0?vm.answerExist4=!0:vm.answerExist4=!1,vm.beautyans.length>0?vm.answerExist5=!0:vm.answerExist5=!1,vm.socialans.length>0?vm.answerExist6=!0:vm.answerExist6=!1,vm.familyans.length>0?vm.answerExist7=!0:vm.answerExist7=!1,0==vm.foodans.length&&0==vm.servicesans.length&&0==vm.lifestyleans.length&&0==vm.healthans.length&&0==vm.beautyans.length&&0==vm.socialans.length&&0==vm.familyans.length&&(vm.noAns=!0)}function getSpecials(answer){for(var i=0;i<$rootScope.specials.length;i++)if(answer.id==$rootScope.specials[i].answer&&"weekly"==$rootScope.specials[i].freq&&(0==dayOfWeek&&$rootScope.specials[i].sun&&(isToday=!0),1==dayOfWeek&&$rootScope.specials[i].mon&&(isToday=!0),2==dayOfWeek&&$rootScope.specials[i].tue&&(isToday=!0),3==dayOfWeek&&$rootScope.specials[i].wed&&(isToday=!0),4==dayOfWeek&&$rootScope.specials[i].thu&&(isToday=!0),5==dayOfWeek&&$rootScope.specials[i].fri&&(isToday=!0),6==dayOfWeek&&$rootScope.specials[i].sat&&(isToday=!0),isToday)){answer.sp_bc=$rootScope.specials[i].bc,answer.sp_fc=$rootScope.specials[i].fc,answer.sp_title=$rootScope.specials[i].stitle;break}}function getUser(answer,votetable){for(var i=0;i<$rootScope.user.friends.data.length;i++)if(votetable.user==$rootScope.user.friends.data[i].id)return $rootScope.user.friends.data[i]}function addRecord(part,answer,i){var cidx=0,ridx=0,fidx=0,idx=0;if(cidx=$rootScope.catansrecs.map(function(x){return x.id}).indexOf($rootScope.friends_votes[i].catans),ridx=$rootScope.content.map(function(x){return x.id}).indexOf($rootScope.catansrecs[cidx].category),-1==(idx=part.map(function(x){return x.id}).indexOf(answer.id))){var data=angular.copy(answer);getSpecials(data),data.trackID=data.id+""+$rootScope.friends_votes[i].id,data.userObjs=[];var friend=angular.copy(getUser(data,$rootScope.friends_votes[i]));friend.endorsements=[],friend.endorsements.push($rootScope.content[ridx].title),data.userObjs.push(friend),part.push(data)}else{var friend=angular.copy(getUser(data,$rootScope.friends_votes[i]));fidx=part[idx].userObjs.map(function(x){return x.id}).indexOf(friend.id),-1==fidx?(friend.endorsements=[],friend.endorsements.push($rootScope.content[ridx].title),part[idx].userObjs.push(friend)):-1==part[idx].userObjs[fidx].endorsements.indexOf($rootScope.content[ridx].title)&&part[idx].userObjs[fidx].endorsements.push($rootScope.content[ridx].title)}}function answerDetail(cb,x){switch($rootScope.myfavs={},cb){case 1:$rootScope.canswers=vm.foodans,$rootScope.myfavs.title="My Food";break;case 2:$rootScope.canswers=vm.lifestyleans,$rootScope.myfavs.title="My Lifestyle";break;case 3:$rootScope.canswers=vm.servicesans,$rootScope.myfavs.title="My Services";break;case 4:$rootScope.canswers=vm.healthans,$rootScope.myfavs.title="My Health";break;case 5:$rootScope.canswers=vm.beautyans,$rootScope.myfavs.title="My Beauty";break;case 6:$rootScope.canswers=vm.socialans,$rootScope.myfavs.title="My Social";break;case 7:$rootScope.canswers=vm.familyans,$rootScope.myfavs.title="My Family"}$state.go("answerDetail",{index:x.slug})}function seeMore(x){1==x&&(5==vm.maxRes1?(vm.btext1="See less",vm.maxRes1=100):(vm.btext1="See more",vm.maxRes1=5)),2==x&&(5==vm.maxRes2?(vm.btext2="See less",vm.maxRes2=100):(vm.btext2="See more",vm.maxRes2=5)),3==x&&(5==vm.maxRes3?(vm.btext3="See less",vm.maxRes3=100):(vm.btext3="See more",vm.maxRes3=5)),4==x&&(5==vm.maxRes4?(vm.btext4="See less",vm.maxRes4=100):(vm.btext4="See more",vm.maxRes4=5)),5==x&&(5==vm.maxRes5?(vm.btext5="See less",vm.maxRes5=100):(vm.btext5="See more",vm.maxRes5=5)),6==x&&(5==vm.maxRes6?(vm.btext6="See less",vm.maxRes6=100):(vm.btext6="See more",vm.maxRes6=5)),7==x&&(5==vm.maxRes7?(vm.btext7="See less",vm.maxRes7=100):(vm.btext7="See more",vm.maxRes7=5))}function goBack(){"rankSummary"==$rootScope.previousState?$state.go("rankSummary",{index:$rootScope.cCategory.slug}):$state.go("cwrapper")}var vm=this;vm.title="myfriends",vm.goBack=goBack,vm.answerDetail=answerDetail,vm.seeMore=seeMore,vm.showAllFriendsList=showAllFriendsList,$scope.$parent.$parent.$parent.seo={pageTitle:"My Friends' Favourite",metaDescription:"RankX lets you see your friends' favorite food, lifestyle, health, beauty and services."};var cdate=new Date,dayOfWeek=cdate.getDay(),isToday=!1;vm.noAns=!1,vm.friendsDataLoading=!0,vm.maxRes1=5,vm.btext1="See more",vm.maxRes2=5,vm.btext2="See more",vm.maxRes3=5,vm.btext3="See more",vm.maxRes4=5,vm.btext4="See more",vm.maxRes5=5,vm.btext5="See more",vm.maxRes6=5,vm.btext6="See more",vm.maxRes7=5,vm.btext7="See more",vm.cb1gt5=!1,vm.cb2gt5=!1,vm.cb3gt5=!1,vm.cb4gt5=!1,vm.cb5gt5=!1,vm.cb6gt5=!1,vm.cb7gt5=!1,function(){formatTables(),$rootScope.friendsVotes?formatData():votes.loadVotesByMyFriends().then(function(data){$rootScope.friends_votes=data,formatData()})}()}angular.module("app").controller("myfriends",myfriends),myfriends.$inject=["$location","$rootScope","$state","$window","votes","$scope","dialog"]}(),function(){"use strict";function myfavs(location,$rootScope,$state,$window,dataloader){function formatTables(){for(var i=0;i<$rootScope.headlines.length;i++)if("food"==$rootScope.headlines[i].type){vm.bgc1=$rootScope.headlines[i].bc,vm.fc1=$rootScope.headlines[i].fc,vm.headline1="My "+$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("lifestyle"==$rootScope.headlines[i].type){vm.bgc2=$rootScope.headlines[i].bc,vm.fc2=$rootScope.headlines[i].fc,vm.headline2="My "+$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("services"==$rootScope.headlines[i].type){vm.bgc3=$rootScope.headlines[i].bc,vm.fc3=$rootScope.headlines[i].fc,vm.headline3="My "+$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("health"==$rootScope.headlines[i].type){vm.bgc4=$rootScope.headlines[i].bc,vm.fc4=$rootScope.headlines[i].fc,vm.headline4="My "+$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("beauty"==$rootScope.headlines[i].type){vm.bgc5=$rootScope.headlines[i].bc,vm.fc5=$rootScope.headlines[i].fc,vm.headline5="My "+$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("social"==$rootScope.headlines[i].type){vm.bgc6=$rootScope.headlines[i].bc,vm.fc6=$rootScope.headlines[i].fc,vm.headline6="My "+$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("family"==$rootScope.headlines[i].type){vm.bgc7=$rootScope.headlines[i].bc,vm.fc7=$rootScope.headlines[i].fc,vm.headline7="My "+$rootScope.headlines[i].title;break}}function loadData(){var answer={},category={};vm.myfoodans=[],vm.mylifestyleans=[],vm.myservicesans=[],vm.myhealthans=[],vm.mybeautyans=[],vm.mysocialans=[],vm.myfamilyans=[];for(var tmap=[],i=0;i<$rootScope.cvotes.length;i++)if(1==$rootScope.cvotes[i].vote){var idx=$rootScope.answers.map(function(x){return x.id}).indexOf($rootScope.cvotes[i].answer);if(idx>-1&&(answer=$rootScope.answers[idx],"Establishment"==answer.type))for(var n=0;n<$rootScope.catansrecs.length;n++)if($rootScope.catansrecs[n].answer==answer.id){var idx2=$rootScope.content.map(function(x){return x.id}).indexOf($rootScope.catansrecs[n].category);if(!(category=$rootScope.content[idx2]))continue;(category.title.indexOf("food")>-1||category.tags.indexOf("food")>-1)&&(tmap=vm.myfoodans.map(function(x){return x.id}),tmap.indexOf(answer.id)<0&&(getSpecials(answer),vm.myfoodans.push(answer))),(category.title.indexOf("lifestyle")>-1||category.tags.indexOf("lifestyle")>-1)&&(tmap=vm.mylifestyleans.map(function(x){return x.id}),tmap.indexOf(answer.id)<0&&(getSpecials(answer),vm.mylifestyleans.push(answer))),(category.title.indexOf("services")>-1||category.tags.indexOf("services")>-1)&&(tmap=vm.myservicesans.map(function(x){return x.id}),tmap.indexOf(answer.id)<0&&(getSpecials(answer),vm.myservicesans.push(answer))),(category.title.indexOf("health")>-1||category.tags.indexOf("health")>-1)&&(tmap=vm.myhealthans.map(function(x){return x.id}),tmap.indexOf(answer.id)<0&&(getSpecials(answer),vm.myhealthans.push(answer))),(category.title.indexOf("beauty")>-1||category.tags.indexOf("beauty")>-1)&&(tmap=vm.mybeautyans.map(function(x){return x.id}),tmap.indexOf(answer.id)<0&&(getSpecials(answer),vm.mybeautyans.push(answer))),(category.title.indexOf("social")>-1||category.tags.indexOf("social")>-1)&&(tmap=vm.mysocialans.map(function(x){return x.id}),tmap.indexOf(answer.id)<0&&(getSpecials(answer),vm.mysocialans.push(answer))),(category.title.indexOf("family")>-1||category.tags.indexOf("family")>-1)&&(tmap=vm.myfamilyans.map(function(x){return x.id}),tmap.indexOf(answer.id)<0&&(getSpecials(answer),vm.myfamilyans.push(answer)))}}vm.myfoodans.length>5&&(vm.cb1gt5=!0),vm.mylifestyleans.length>5&&(vm.cb2gt5=!0),vm.myservicesans.length>5&&(vm.cb3gt5=!0),vm.myhealthans.length>5&&(vm.cb4gt5=!0),vm.mybeautyans.length>5&&(vm.cb5gt5=!0),vm.mysocialans.length>5&&(vm.cb6gt5=!0),vm.myfamilyans.length>5&&(vm.cb7gt5=!0),vm.myfoodans.length>0?vm.answerExist1=!0:vm.answerExist1=!1,vm.mylifestyleans.length>0?vm.answerExist2=!0:vm.answerExist2=!1,vm.myservicesans.length>0?vm.answerExist3=!0:vm.answerExist3=!1,vm.myhealthans.length>0?vm.answerExist4=!0:vm.answerExist4=!1,vm.mybeautyans.length>0?vm.answerExist5=!0:vm.answerExist5=!1,vm.mysocialans.length>0?vm.answerExist6=!0:vm.answerExist6=!1,vm.myfamilyans.length>0?vm.answerExist7=!0:vm.answerExist7=!1,0==vm.myfoodans.length&&0==vm.myservicesans.length&&0==vm.mylifestyleans.length&&0==vm.myhealthans.length&&0==vm.mybeautyans.length&&0==vm.mysocialans.length&&0==vm.myfamilyans.length&&(vm.noAns=!0)}function getSpecials(answer){for(var i=0;i<$rootScope.specials.length;i++)if(answer.id==$rootScope.specials[i].answer&&"weekly"==$rootScope.specials[i].freq&&(0==dayOfWeek&&$rootScope.specials[i].sun&&(isToday=!0),1==dayOfWeek&&$rootScope.specials[i].mon&&(isToday=!0),2==dayOfWeek&&$rootScope.specials[i].tue&&(isToday=!0),3==dayOfWeek&&$rootScope.specials[i].wed&&(isToday=!0),4==dayOfWeek&&$rootScope.specials[i].thu&&(isToday=!0),5==dayOfWeek&&$rootScope.specials[i].fri&&(isToday=!0),6==dayOfWeek&&$rootScope.specials[i].sat&&(isToday=!0),isToday)){answer.sp_bc=$rootScope.specials[i].bc,answer.sp_fc=$rootScope.specials[i].fc,answer.sp_title=$rootScope.specials[i].stitle;break}}function answerDetail(cb,x){switch($rootScope.myfavs={},cb){case 1:$rootScope.canswers=vm.myfoodans,$rootScope.myfavs.title="My Food";break;case 2:$rootScope.canswers=vm.mylifestyleans,$rootScope.myfavs.title="My Lifestyle";break;case 3:$rootScope.canswers=vm.myservicesans,$rootScope.myfavs.title="My Services";break;case 4:$rootScope.canswers=vm.myhealthans,$rootScope.myfavs.title="My Health";break;case 5:$rootScope.canswers=vm.mybeautyans,$rootScope.myfavs.title="My Beauty";break;case 6:$rootScope.canswers=vm.mysocialans,$rootScope.myfavs.title="My Social";break;case 7:$rootScope.canswers=vm.myfamilyans,$rootScope.myfavs.title="My Family"}$state.go("answerDetail",{index:x.id})}function seeMore(x){1==x&&(5==vm.maxRes1?(vm.btext1="See less",vm.maxRes1=100):(vm.btext1="See more",vm.maxRes1=5)),2==x&&(5==vm.maxRes2?(vm.btext2="See less",vm.maxRes2=100):(vm.btext2="See more",vm.maxRes2=5)),3==x&&(5==vm.maxRes3?(vm.btext3="See less",vm.maxRes3=100):(vm.btext3="See more",vm.maxRes3=5)),4==x&&(5==vm.maxRes4?(vm.btext4="See less",vm.maxRes4=100):(vm.btext4="See more",vm.maxRes4=5)),5==x&&(5==vm.maxRes5?(vm.btext5="See less",vm.maxRes5=100):(vm.btext5="See more",vm.maxRes5=5)),6==x&&(5==vm.maxRes6?(vm.btext6="See less",vm.maxRes6=100):(vm.btext6="See more",vm.maxRes6=5)),7==x&&(5==vm.maxRes7?(vm.btext7="See less",vm.maxRes7=100):(vm.btext7="See more",vm.maxRes7=5))}function goBack(){"rankSummary"==$rootScope.previousState?$state.go("rankSummary",{index:$rootScope.cCategory.slug}):$rootScope.$emit("backToResults")}var vm=this;vm.title="myfavs",vm.goBack=goBack,vm.answerDetail=answerDetail,vm.seeMore=seeMore;var cdate=new Date,dayOfWeek=cdate.getDay(),isToday=!1;vm.noAns=!1,vm.maxRes1=5,vm.btext1="See more",vm.maxRes2=5,vm.btext2="See more",vm.maxRes3=5,vm.btext3="See more",vm.maxRes4=5,vm.btext4="See more",vm.maxRes5=5,vm.btext5="See more",vm.maxRes6=5,vm.btext6="See more",vm.maxRes7=5,vm.btext7="See more",vm.cb1gt5=!1,vm.cb2gt5=!1,vm.cb3gt5=!1,vm.cb4gt5=!1,vm.cb5gt5=!1,vm.cb6gt5=!1,vm.cb7gt5=!1,function(){$rootScope.inFavMode=!0,formatTables(),loadData(),$rootScope.DEBUG_MODE&&console.log("myfavs page Loaded!")}()}angular.module("app").controller("myfavs",myfavs),myfavs.$inject=["$location","$rootScope","$state","$window","dataloader"]}(),function(){"use strict";function favs(location,$rootScope,$state,$window){}angular.module("app").controller("favs",favs),favs.$inject=["$location","$rootScope","$state","$window"]}(),function(){"use strict";function promotersignup(location,$rootScope,$state,promoter,dialog,mailing){function submit(){vm.promoter.code=vm.code,checkInputData(),dataOk&&promoter.add(vm.promoter).then(function(){mailing.promoterCreated(vm.promoter).then(function(){}),dialog.notificationWithCallback("Success","You have successfully registered as a Promoter. ",gotoPromoterConsole)})}function gotoPromoterConsole(){$state.go("promoterconsole")}function checkInputData(){dataOk=!0,$rootScope.DEBUG_MODE&&console.log("vm.promoter ",vm.promoter),vm.promoter.firstname.length<1?(dialog.getDialog("firstnameisinvalid"),dataOk=!1):vm.promoter.lastname.length<1?(dialog.getDialog("lastnameisinvalid"),dataOk=!1):vm.promoter.email.length<1||vm.promoter.email.indexOf("@")<0?(dialog.getDialog("emailisinvalid"),dataOk=!1):vm.promoter.address.length<5?(dialog.getDialog("addressisinvalid"),dataOk=!1):vm.promoter.phone.length<9?(dialog.getDialog("phoneisinvalid"),dataOk=!1):vm.promoter.code.length<1&&(dialog.getDialog("missingcode"),dataOk=!1)}function getcode(){for(var text="",nums="",possiblet="abcdefghijklmnopqrstuvwxyz",possiblen="0123456789",i=0;i<5;i++)text+=possiblet.charAt(Math.floor(Math.random()*possiblet.length));for(var i=0;i<3;i++)nums+=possiblen.charAt(Math.floor(Math.random()*possiblen.length));vm.code=text+nums}function showTOSPromotersDlg(){dialog.showTOSPromotersDlg()}var vm=this;vm.title="promote",vm.getcode=getcode,vm.submit=submit;var dataOk=!1;!function(){vm.promoter={},vm.promoter.firstname="",vm.promoter.lastname="",vm.promoter.phone="",vm.promoter.address="",vm.promoter.code="",vm.promoter.email="",vm.code="",$rootScope.user?(vm.promoter.firstname=$rootScope.user.first_name,vm.promoter.lastname=$rootScope.user.last_name,vm.promoter.user=$rootScope.user.id):dialog.getDialog("nologinsignup"),console.log("promote page Loaded!")}(),vm.showTOSPromotersDlg=showTOSPromotersDlg}angular.module("app").controller("promotersignup",promotersignup),promotersignup.$inject=["$location","$rootScope","$state","promoter","dialog","mailing"]}(),function(){"use strict";function promoterconsole(location,$rootScope,$state,$window,useraccnt,dialog,promoter,$location,STRIPE_CLIENT_ID,setting,$q){function connectStripe(){window.open("https://connect.stripe.com/oauth/authorize?response_type=code&client_id="+STRIPE_CLIENT_ID+"&scope=read_write&state="+vm.promoter.id,"Stripe Connect","_self")}function activate(){$rootScope.userpromoter&&1==$rootScope.userpromoter.length&&$rootScope.userpromoter[0].user==$rootScope.user.id?(promoterdataok=!0,vm.promoter=$rootScope.userpromoter[0],vm.userIsPromoter=!0):(vm.userIsPromoter=!1,vm.dataReady=!0),vm.dataReady||loadData(),console.log("Promoter console page Loaded!"),console.log("vm.dataReady - ",vm.dataReady)}function loadData(){var answerid=0,idx=0,obj={};!vm.dataReady&&promoterdataok&&useraccnt.getaccntsbycode($rootScope.userpromoter[0].code).then(function(result){console.log("resuls -",result);for(var i=0;i<result.length;i++){answerid=result[i].answer,obj={},idx=$rootScope.answers.map(function(x){return x.id}).indexOf(answerid),obj=angular.copy(result[i]),obj.name=$rootScope.answers[idx].name,obj.answerObj=$rootScope.answers[idx],"Basic"==obj.status&&(obj.style="background-color:#bfbfbf"),obj.istrial?(obj.status="On Trial "+Math.ceil(moment.duration(moment(obj.discountEndDate)-moment()).asDays())+" Days left",obj.style="background-color:#b3b300"):(obj.status="Active",obj.style="background-color:#009900");for(var k=0;k<$rootScope.codeprices.length;k++)if($rootScope.codeprices[k].code==obj.bizcat){obj.price=$rootScope.codeprices[k].price;break}obj.totalCommission=0,obj.ispremium&&(obj.totalCommission+=obj.price*vm.STRIPE_COMMISSION_PERCENTAGE),obj.hasranks&&(obj.totalCommission+=obj.ranksqty*vm.CUSTOM_RANK_PRICE*vm.STRIPE_COMMISSION_PERCENTAGE),vm.myaccnts.push(obj)}vm.myaccnts.length>0?vm.noAns=!1:vm.noAns=!0,vm.dataReady=!0,activate()})}function gotoanswer(x){$state.go("answerDetail",{index:x.slug})}function gotoPromotePage(){$state.go("promote")}function gotomanage(x){vm.manageview=!0,vm.business=x,vm.overview=!1}function goBack(){if(1==vm.manageview)return vm.overview=!0,void(vm.manageview=!1);"rankSummary"==$rootScope.previousState?$state.go("rankSummary",{index:$rootScope.cCategory.id}):"answerDetail"==$rootScope.previousState?$state.go("answerDetail",{index:$rootScope.canswer.id}):"addAnswer"==$rootScope.previousState?$state.go("addAnswer",{index:$rootScope.canswer.id}):"editAnswer"==$rootScope.previousState?$state.go("editAnswer",{index:$rootScope.canswer.id}):"about"==$rootScope.previousState?$state.go("about"):$state.go("cwrapper")}function goEdit(){fields=["firstname","lastname","email","address","phone"],labels=["First Name","Last Name","Email","Address","Phone"],vals=[vm.promoter.firstname,vm.promoter.lastname,vm.promoter.email,vm.promoter.address,vm.promoter.phone],dialog.editInfo(fields,labels,vals,execEdit)}function execEdit(newvals){promoter.update(vm.promoter.id,fields,newvals).then(function(){loadData()})}function goSignup(){$state.go("promotersignup")}var vm=this;if(vm.notifications=[],-1!==$window.location.href.indexOf("connectStripe")){"success"==$window.location.href.slice($window.location.href.indexOf("connectStripe")).split("=")[1].split("&")[0]?vm.notifications.push({message:"You are successfully connected to your Stripe Account",type:"success"}):$window.alert($window.location.href.slice($window.location.href.indexOf("message")).split("=")[1].split("&")[0])}var fields=[],labels=[],vals=[];vm.title="promoterconsole",vm.overview=!0,vm.manageview=!0,vm.gotoanswer=gotoanswer,vm.gotomanage=gotomanage,vm.gotoPromotePage=gotoPromotePage,vm.goBack=goBack,vm.goEdit=goEdit,vm.goSignup=goSignup,vm.connectStripe=connectStripe,vm.myaccnts=[],vm.noAns=!1,vm.manageview=!1,vm.dataReady=!1;var promoterdataok=!1;!function(){$q.all([promoter.getbyUser($rootScope.user.id),setting.getSetting()]).then(function(data){$rootScope.userpromoter=data[0],vm.STRIPE_COMMISSION_PERCENTAGE=data[1].STRIPE_COMMISSION_PERCENTAGE,vm.CUSTOM_RANK_PRICE=data[1].CUSTOM_RANK_PRICE,activate()})}()}angular.module("app").controller("promoterconsole",promoterconsole),promoterconsole.$inject=["$location","$rootScope","$state","$window","useraccnt","dialog","promoter","$location","STRIPE_CLIENT_ID","setting","$q"]}(),function(){"use strict";function promote(location,$rootScope,$state,promoter){function show(x){1==x&&vm.showOne?vm.showOne=!1:2==x&&vm.showTwo?vm.showTwo=!1:3==x&&vm.showThree?vm.showThree=!1:4==x&&vm.showFour?vm.showFour=!1:5==x&&vm.showFive?vm.showFive=!1:6==x&&vm.showSix?vm.showSix=!1:(vm.showOne=!1,vm.showTwo=!1,vm.showThree=!1,vm.showFour=!1,vm.showFive=!1,vm.showSix=!1,1!=x||vm.showOne||(vm.showOne=!0),2!=x||vm.showTwo||(vm.showTwo=!0),3!=x||vm.showThree||(vm.showThree=!0),4!=x||vm.showFour||(vm.showFour=!0),5!=x||vm.showFive||(vm.showFive=!0),6!=x||vm.showSix||(vm.showSix=!0))}var vm=this;vm.title="promote",vm.show=show,vm.showOne=!1,vm.showTwo=!1,vm.showThree=!1,vm.showFour=!1,vm.showFive=!1,vm.showSix=!1,function(){console.log("promote page Loaded!")}()}angular.module("app").controller("promote",promote),promote.$inject=["$location","$rootScope","$state","promoter"]}(),function(){"use strict";function match($state,dialog,$location,answer,$rootScope,matchrec,$modal,useractivity,$window){function selectAnswer(number){if(!$rootScope.isLoggedIn)return void dialog.loginFacebook();var data={};data.user=$rootScope.user.id,data.hs=vm.answer1.id,data.ls=vm.answer2.id,data.category=$rootScope.cCategory.id,data.timestmp=Date.now(),1==number&&(data.sel=vm.answer1.id),2==number&&(data.sel=vm.answer2.id),mrecs_session.push(data),$rootScope.cmrecs_user.push(data),GPIdx++,GPIdx>=M&&(GPIdx=0),rankInProgress=!0,getAnswers()}function skipMatch(){GPIdx++,GPIdx>=M&&(GPIdx=0),getAnswers()}function loadAnswers(){answers=$rootScope.canswers4rank,N=answers.length,M=N*(N-1)/2}function getAnswers(){if(vm.GP=$rootScope.cmrecs_user.length,$rootScope.DEBUG_MODE&&console.log("vm.GP - ",vm.GP),vm.Tot=M,$rootScope.cmrecs_user.length>=M)return rankInProgress?dialog.getDialog("goodJobRankComplete"):dialog.getDialog("rankComplete"),void rankSummary();if(returningUser)for(var hs=HS[r[GPIdx]],ls=LS[r[GPIdx]],matchPlayed=!1,i=0;i<$rootScope.cmrecs_user.length;i++)if($rootScope.cmrecs_user[i].hs==answers[hs].id&&$rootScope.cmrecs_user[i].ls==answers[ls].id){matchPlayed=!0;break}matchPlayed&&skipMatch(),vm.answer1=answers[HS[r[GPIdx]]],vm.answer2=answers[LS[r[GPIdx]]],getHeaders()}function rankSummary(){$state.go("rankSummary",{index:vm.table.id})}function answerDetail(x){1===x?$state.go("answerDetail",{index:vm.answer1.id}):$state.go("answerDetail",{index:vm.answer2.id})}function getmatchIndexes(){HS=[],LS=[];for(var i=0;i<=N-1;i++)for(var j=i+1;j<=N-1;j++)HS.push(i),LS.push(j)}function createRandomIndexArray(){for(var i=0;i<M;i++)r[i]=i;r=function(array){var tmp,current,top=array.length;if(top)for(;--top;)current=Math.floor(Math.random()*(top+1)),tmp=array[current],array[current]=array[top],array[top]=tmp;return array}(r)}function getHeaders(){
vm.fields=$rootScope.fields}function closeRank(){$state.go("rankSummary",{index:$rootScope.cCategory.id})}var vm=this;vm.title="match",vm.header="table"+$rootScope.cCategory.id+".header",vm.body="table"+$rootScope.cCategory.id+".body",vm.ranking=$rootScope.title;var HS=[],LS=[],answers=[],N=0,M=0,r=[],GPIdx=0,returningUser=$rootScope.cmrecs_user.length>0,mrecs_session=[],rankInProgress=!1;vm.table=$rootScope.cCategory,vm.type=$rootScope.cCategory.type,vm.answer1,vm.answer2,vm.selectAnswer=selectAnswer,vm.rankSummary=rankSummary,vm.skipMatch=skipMatch,vm.answerDetail=answerDetail,vm.closeRank=closeRank,$window.innerWidth<512?(vm.sm=!0,vm.nsm=!1):(vm.sm=!1,vm.nsm=!0),function(){$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from,fromParams){$rootScope.previousState=from.name}),$rootScope.$on("$stateChangeStart",function(ev,to,toParams,from,fromParams){"match"==from.name&&mrecs_session.length>0&&(matchrec.postRec(mrecs_session),mrecs_session=[])}),loadAnswers(),getmatchIndexes(),createRandomIndexArray(),getAnswers()}()}angular.module("app").controller("match",match),match.$inject=["$state","dialog","$location","answer","$rootScope","matchrec","$modal","useractivity","$window"]}(),function(){"use strict";function editRanking(location,$rootScope,$state,$stateParams,$window,$http,imagelist,table,dialog,catans,color,pixabay,pexels,categories,$cookies,APP_API_KEY,answer){function loadData(){vm.rankTitle=$rootScope.cCategory.title,vm.tags=$rootScope.cCategory.tags,vm.keywords=$rootScope.cCategory.keywords,vm.type=$rootScope.cCategory.type,vm.question=$rootScope.cCategory.question,vm.answertags=$rootScope.cCategory.answertags,vm.isatomic=$rootScope.cCategory.isatomic,vm.catstr=$rootScope.cCategory.catstr,vm.ismp=$rootScope.cCategory.ismp,vm.scope=$rootScope.cCategory.scope,vm.image=$rootScope.cCategory.fimage,$rootScope.cCategory.bc&&(vm.bc=$rootScope.cCategory.bc),$rootScope.cCategory.fc&&(vm.fc=$rootScope.cCategory.fc),$rootScope.cCategory.shade&&(vm.shade=$rootScope.cCategory.shade),$rootScope.cCategory.bc&&(vm.bc2=color.shadeColor(vm.bc,vm.shade/10)),$rootScope.cCategory.fimage&&(vm.image=$rootScope.cCategory.fimage)}function selImgBank(x){1==x&&(vm.pixabay=!0,vm.pexels=!1),2==x&&(vm.pixabay=!1,vm.pexels=!0)}function goEdit(){var fields=[],vals=[],fieldsc=[],valsc=[];if(item.title!=vm.rankTitle){var idx=$rootScope.categories.map(function(x){return x.id}).indexOf(item.cat),titleo=$rootScope.categories[idx].category,titlex=vm.rankTitle;if(titleo.indexOf("@Nh")>-1){var idx2=$rootScope.locations.map(function(x){return x.id}).indexOf(item.nh),location=$rootScope.locations[idx2].nh_name;titlex=vm.rankTitle.replace(location,"@Nh")}fieldsc.push("category"),valsc.push(titlex),$rootScope.DEBUG_MODE&&console.log("tablex - ",titlex),fields.push("title"),vals.push(titlex)}item.tags!=vm.tags&&(fieldsc.push("tags"),valsc.push(vm.tags)),item.keywords!=vm.keywords&&(fieldsc.push("keywords"),valsc.push(vm.keywords)),item.type!=vm.type&&(fieldsc.push("type"),valsc.push(vm.type)),item.question!=vm.question&&(fieldsc.push("question"),valsc.push(vm.question)),item.catstr!=vm.catstr&&(fields.push("catstr"),vals.push(vm.catstr)),item.ismp!=vm.ismp&&(fieldsc.push("ismp"),valsc.push(vm.ismp)),item.bc!=vm.bc&&(fieldsc.push("bc"),valsc.push(vm.bc)),item.fc!=vm.fc&&(fieldsc.push("fc"),valsc.push(vm.fc)),item.shade!=vm.shade&&(fieldsc.push("shade"),valsc.push(vm.shade)),item.fimage!=vm.image&&(fieldsc.push("fimage"),valsc.push(vm.image)),item.scope!=vm.scope&&(fieldsc.push("scope"),valsc.push(vm.scope),fields.push("scope"),vals.push(vm.scope),changeScopeofAnswers(),changeScopeofAnswers()),vm.images&&processImage(),fields&&($rootScope.DEBUG_MODE&&console.log("fields - ",fields,vals),table.update(item.id,fields,vals)),fieldsc&&($rootScope.DEBUG_MODE&&console.log("fieldsc - ",fieldsc,valsc),categories.update(item.cat,fieldsc,valsc)),goBack()}function goDelete(){dialog.deleteRank($rootScope.cCategory,confirmDelete)}function confirmDelete(){null!=vm.image&&void 0!=vm.image&&vm.image.indexOf("https://rankx.blob")>-1&&imagelist.deleteBlob(vm.image),1==$rootScope.cCategory.nh&&categories.deleteRec($rootScope.cCategory.cat),catans.deletebyCategory($rootScope.cCategory.id),table.deleteTable($rootScope.cCategory.id),goBack()}function getImages(){var qry=vm.imageQuery.replace(" ","+");vm.i=0,vm.images=[],vm.pixabay&&pixabay.search(qry).then(function(result){$rootScope.DEBUG_MODE&&console.log("Pixabay results - ",result),vm.numResults=result.length;for(var i=0;i<vm.numResults;i++)vm.images.push(result[i]);vm.image=vm.images[vm.i].previewURL}),vm.pexels&&pexels.reqFromServer(qry).then(function(res){var result=res.data.photos;$rootScope.DEBUG_MODE&&console.log("Pexels results - ",result),vm.numResults=result.length;for(var i=0;i<vm.numResults;i++)vm.images.push(result[i]);vm.image=vm.images[vm.i].src.small})}function nextImg(){vm.i=vm.i+1,vm.i>vm.images.length-1&&(vm.i=vm.images.length-1),vm.pixabay&&(vm.image=vm.images[vm.i].previewURL),vm.pexels&&(vm.image=vm.images[vm.i].src.small)}function prevImg(){vm.i=vm.i-1,vm.i<0&&(vm.i=0),vm.pixabay&&(vm.image=vm.images[vm.i].previewURL),vm.pexels&&(vm.image=vm.images[vm.i].src.small)}function csel(x){vm.c1sel=!1,vm.c2sel=!1,vm.c3sel=!1,vm.c4sel=!1,vm.c5sel=!1,vm.c6sel=!1,1==x&&(vm.c1sel=!0),2==x&&(vm.c2sel=!0),3==x&&(vm.c3sel=!0),4==x&&(vm.c4sel=!0),5==x&&(vm.c5sel=!0),6==x&&(vm.c6sel=!0),setBoxColor(x)}function setBoxColor(x){1==x&&(vm.bc="brown",vm.fc="#f8f8ff"),2==x&&(vm.bc="#4682b4",vm.fc="#f8f8ff"),3==x&&(vm.bc="#008080",vm.fc="#f8f8ff"),4==x&&(vm.bc="gray",vm.fc="#f8f8ff"),5==x&&(vm.bc="#a3297a",vm.fc="#f8f8ff"),6==x&&(vm.bc="#c68c53",vm.fc="#f8f8ff"),vm.bc2=color.shadeColor(vm.bc,vm.shade)}function plusShade(){vm.shade=vm.shade+1,vm.shade>10&&(vm.shade=10),vm.bc2=color.shadeColor(vm.bc,vm.shade/10)}function minusShade(){vm.shade=vm.shade-1,vm.shade<-10&&(vm.shade=-10),vm.bc2=color.shadeColor(vm.bc,vm.shade/10)}function processImage(){var img="";if($rootScope.DEBUG_MODE&&console.log("fimage changed"),vm.pixabay&&(img=vm.images[vm.i].webformatURL),vm.pexels&&(img=vm.images[vm.i].src.medium),item.fimage!=img){img.indexOf(".jpeg")>-1&&".jpeg",img.indexOf(".jpg")>-1&&".jpg",img.indexOf(".png")>-1&&".png";var imagefilename=$rootScope.cCategory.title.toLowerCase();if(imagefilename=imagefilename.replace(/ /g,"-"),imagefilename=imagefilename.replace("/","at"),imagefilename=imagefilename.replace("?",""),item.fimage&&item.fimage.indexOf("https://rankx.blob")>-1)try{imagelist.deleteBlob(item.fimage)}catch(err){console.log("Error deleting existing image: ",err)}var cat=$rootScope.cCategory.cat;$rootScope.DEBUG_MODE&&console.log("Process Image - ",cat,img,imagefilename),processImageExec(img,imagefilename,cat)}}function processImageExec(imageurl,filename,rank){$http({method:"POST",url:"https://server.rank-x.com/ImageServer/SaveImage",headers:{"X-Dreamfactory-API-Key":void 0,"X-DreamFactory-Session-Token":void 0},data:{imageurl:imageurl,filename:filename,category:rank}}).then(function(result){$rootScope.DEBUG_MODE&&console.log("Processing Image Success",result)},function(error){$http.defaults.headers.common["X-Dreamfactory-API-Key"]=APP_API_KEY,$http.defaults.headers.common["X-DreamFactory-Session-Token"]=$cookies.session_token,$rootScope.DEBUG_MODE&&console.log("Error Processing Image - ",error)})}function changeScopeofAnswers(){console.log("change Scope of Answres");for(var i=0;i<$rootScope.catansrecs.length;i++)if($rootScope.catansrecs[i].category==$rootScope.cCategory.id){var idx=$rootScope.answers.map(function(x){return x.id}).indexOf($rootScope.catansrecs[i].answer);idx>-1&&answer.updateAnswer($rootScope.catansrecs[i].answer,["scope"],[vm.scope])}}function goBack(){$rootScope.$emit("backToResults")}var vm=this;vm.title="editRanking",vm.goEdit=goEdit,vm.goDelete=goDelete,vm.getImages=getImages,vm.plusShade=plusShade,vm.minusShade=minusShade,vm.selImgBank=selImgBank,vm.shade=0,vm.nextImg=nextImg,vm.prevImg=prevImg,vm.csel=csel,vm.goBack=goBack;var item={};vm.typeList=["Person","Establishment","Place","Activity","Short-Phrase","Organization","Event","Thing","PersonCust"],$window.innerWidth<512?(vm.sm=!0,vm.nsm=!1):(vm.sm=!1,vm.nsm=!0),function(){$rootScope.cCategory={};for(var i=0;i<$rootScope.content.length;i++)if($rootScope.content[i].id==$stateParams.index||$rootScope.content[i].slug==$stateParams.index){$rootScope.cCategory=$rootScope.content[i];break}item=JSON.parse(JSON.stringify($rootScope.cCategory)),$rootScope.DEBUG_MODE&&console.log("$rootScope.cCategory - ",$rootScope.cCategory),vm.ranking=$rootScope.cCategory.title,$rootScope.rankIsActive=!0,$rootScope.objNumAct=$rootScope.objNum,loadData(),selImgBank(1),$rootScope.DEBUG_MODE&&console.log("editRanking page Loaded!")}()}angular.module("app").controller("editRanking",editRanking),editRanking.$inject=["$location","$rootScope","$state","$stateParams","$window","$http","imagelist","table","dialog","catans","color","pixabay","pexels","categories","$cookies","APP_API_KEY","answer"]}(),function(){"use strict";function addRankforAnswer(location,$rootScope,$state,$stateParams,table2,dialog,$window,answer){function validateData(){rankTitleOk=!("Enter a title..."==vm.rankTitle||""==vm.rankTitle||vm.rankTitle.length<10),rankQuestionOk=!("Enter a question..."==vm.question||""==vm.question||vm.question.length<3),item.title=vm.rankTitle+" @ "+$rootScope.canswer.name,item.tags="",item.keywords="",item.type="Simple",item.question=vm.question,item.views=0,item.answers=0,item.introtext=vm.introtext,item.ismp=!1,item.owner=$rootScope.canswer.id,rankTypeOk=!0,colors=[vm.bc,vm.fc]}function addRankingforAnswer(){validateData();var tfields=[],tvals=[];if(rankTitleOk&&rankTypeOk&&rankQuestionOk){if("add"==$rootScope.rankforAnswerMode)table2.addTableforAnswer(item,colors,$rootScope.canswer.id).then(function(){$state.go("answerRanksManager")});else if($rootScope.customranks[idx].title!=vm.rankTitle+" @ "+$rootScope.canswer.name&&(tfields.push("title"),tvals.push(vm.rankTitle+" @ "+$rootScope.canswer.name)),$rootScope.customranks[idx].question!=vm.question&&(tfields.push("question"),tvals.push(vm.question)),$rootScope.customranks[idx].intro!=vm.introtext&&(tfields.push("introtext"),tvals.push(vm.introtext)),tfields.length>0&&table2.update($rootScope.customranks[idx].id,tfields,tvals).then(function(){$state.go("answerRanksManager")}),vm.bc!=ranks[$rootScope.rankIdx].bc||vm.fc!=ranks[$rootScope.rankIdx].fc){ranks[$rootScope.rankIdx].bc=vm.bc,ranks[$rootScope.rankIdx].fc=vm.fc;var ranksStr=JSON.stringify(ranks);answer.updateAnswer($rootScope.canswer.id,["ranks"],[ranksStr]).then(function(){$state.go("answerRanksManager")})}}else rankTitleOk?rankQuestionOk?dialog.getDialog("rankType"):dialog.getDialog("rankQuestion"):dialog.getDialog("rankTitle")}function goBack(){$state.go("answerRanksManager")}var vm=this;vm.title="addRankforAnswer",vm.goBack=goBack;var item={},rankTitleOk=!0,rankTypeOk=!0,rankQuestionOk=!0;vm.addRankingforAnswer=addRankingforAnswer,vm.typeList=["Person","Establishment","Place","Activity","Short-Phrase","Organization","Event","Thing","PersonCust"],vm.isAdmin=$rootScope.isAdmin;var colors=[],ranks=[],idx=0;$window.innerWidth<512?(vm.sm=!0,vm.nsm=!1):(vm.sm=!1,vm.nsm=!0),function(){void 0==$rootScope.rankforAnswerMode&&$state.go("cwrapper"),"edit"==$rootScope.rankforAnswerMode?(ranks=JSON.parse($rootScope.canswer.ranks),idx=$rootScope.customranks.map(function(x){return x.id}).indexOf(ranks[$rootScope.rankIdx].id),vm.rankTitle=$rootScope.customranks[idx].title.replace(" @ "+$rootScope.canswer.name,""),vm.question=$rootScope.customranks[idx].question,vm.introtext=$rootScope.customranks[idx].introtext,vm.bc=ranks[$rootScope.rankIdx].bc,vm.fc=ranks[$rootScope.rankIdx].fc,vm.buttonLabel="Edit"):(vm.rankTitle="Enter a title...",vm.question="Enter a question...",vm.bc="gray",vm.fc="lightgray",vm.buttonLabel="Add",vm.introtext="Tell us what your rank is about..."),$rootScope.DEBUG_MODE&&console.log("addRankforAnswer page Loaded!")}()}angular.module("app").controller("addRankforAnswer",addRankforAnswer),addRankforAnswer.$inject=["$location","$rootScope","$state","$stateParams","table2","dialog","$window","answer"]}(),function(){"use strict";function addCustomRank(location,$rootScope,$state,$stateParams,categories,search,dialog,$window,answer,color,pixabay,pexels,$http,table,$timeout,$scope){function validateData(){var titleOk=!0,tagsOk=!0,questionOk=!0;return vm.rankTitle.length<10&&(dialog.getDialog("rankTitle"),titleOk=!1),vm.tags<5&&(dialog.getDialog("rankTags"),tagsOk=!1),vm.question.length<10&&(dialog.getDialog("rankQuestion"),questionOk=!1),titleOk&&tagsOk&&questionOk}function editRank(){validateData();var tfields=[],tvals=[];if(rankTitleOk&&rankTypeOk&&rankQuestionOk){if("add"==$rootScope.rankforAnswerMode)table.addTableforAnswer(item,colors,$rootScope.canswer.id).then(function(){$state.go("answerRanksManager")});else if($rootScope.content[idx].title!=vm.rankTitle+" @ "+$rootScope.canswer.name&&(tfields.push("title"),tvals.push(vm.rankTitle+" @ "+$rootScope.canswer.name)),$rootScope.content[idx].question!=vm.question&&(tfields.push("question"),tvals.push(vm.question)),tfields.length>0&&table.update($rootScope.content[idx].id,tfields,tvals).then(function(){$state.go("answerRanksManager")}),vm.bc!=ranks[$rootScope.rankIdx].bc||vm.fc!=ranks[$rootScope.rankIdx].fc){ranks[$rootScope.rankIdx].bc=vm.bc,ranks[$rootScope.rankIdx].fc=vm.fc;var ranksStr=JSON.stringify(ranks);answer.updateAnswer($rootScope.canswer.id,["ranks"],[ranksStr]).then(function(){$state.go("answerRanksManager")})}}else rankTitleOk?rankQuestionOk?dialog.getDialog("rankType"):dialog.getDialog("rankQuestion"):dialog.getDialog("rankTitle")}function addRank(){validateData()&&(itemt={},item={},item.category=vm.rankTitle,item.type=vm.type,item.tags=vm.tags,item.question=vm.question,item.user=$rootScope.user.id,item.timestmp=Date.now(),item.bc=vm.bc,item.fc=vm.fc,item.shade=vm.shade,item.keywords="",item.fimage=vm.image,item.scope=$rootScope.SCOPE,categories.addCategory(item).then(function(result){itemt={},itemt.views=0,itemt.answers=0,itemt.numcom=0,itemt.ismp=!0,itemt.isatomic=!0,itemt.cat=result.resource[0].id,itemt.nh=1,itemt.scope=$rootScope.SCOPE,table.addTable(itemt).then(function(resultx){processImage(itemt.cat),idx2=resultx,dialog.notificationWithCallback("Success!","Your ranking has been created succesfully! <br><br> Now add items to rank and don't forget to share your ranking with other users!",goToNewRank)}),$rootScope.DEBUG_MODE&&console.log("category added --- ",result)}))}function goToNewRank(){$state.go("rankSummary",{index:idx2})}function selType(x){1==x&&(vm.rankType="ESTABLISHMENTS",vm.type="Establishment"),2==x&&(vm.rankType="PEOPLE",vm.type="Person"),3==x&&(vm.rankType="ORGANIZATIONS",vm.type="Organization"),4==x&&(vm.rankType="PLACES",vm.type="Place"),5==x&&(vm.rankType="OPINIONS",vm.type="Short-Phrase"),6==x&&(vm.rankType="CONTRACTORS",vm.type="PersonCust"),7==x&&(vm.rankType="ITEM / OBJECTS",vm.type="Thing"),8==x&&(vm.rankType="EVENTS",vm.type="Event"),vm.step=3}function selCat(x){1==x&&(vm.rankCat="FOOD",vm.tags="food"),2==x&&(vm.rankCat="LIFESTYLE",vm.tags="lifestyle"),3==x&&(vm.rankCat="HEALTH",vm.tags="health"),4==x&&(vm.rankCat="SOCIAL",vm.tags="social"),5==x&&(vm.rankCat="SPORTS",vm.tags="sports"),6==x&&(vm.rankCat="PERSONALITIES",vm.tags="personalities"),7==x&&(vm.rankCat="SERVICES",vm.tags="services"),8==x&&(vm.rankCat="BEAUTY",vm.tags="beauty"),9==x&&(vm.rankCat="CITY",vm.tags="city"),10==x&&(vm.rankCat="POLITICS",vm.tags="politics"),11==x&&(vm.rankCat="SCIENCE & TECH",vm.tags="technology"),12==x&&(vm.rankCat="LOVE & RELATIONSHIPS",vm.tags="dating"),13==x&&(vm.rankCat="FAMILY",vm.tags="family"),vm.step=2}function csel(x){vm.c1sel=!1,vm.c2sel=!1,vm.c3sel=!1,vm.c4sel=!1,vm.c5sel=!1,vm.c6sel=!1,1==x&&(vm.c1sel=!0),2==x&&(vm.c2sel=!0),3==x&&(vm.c3sel=!0),4==x&&(vm.c4sel=!0),5==x&&(vm.c5sel=!0),6==x&&(vm.c6sel=!0),setBoxColor(x)}function setBoxColor(x){1==x&&(vm.bc="brown",vm.fc="#f8f8ff"),2==x&&(vm.bc="#4682b4",vm.fc="#f8f8ff"),3==x&&(vm.bc="#008080",vm.fc="#f8f8ff"),4==x&&(vm.bc="gray",vm.fc="#f8f8ff"),5==x&&(vm.bc="#a3297a",vm.fc="#f8f8ff"),6==x&&(vm.bc="#c68c53",vm.fc="#f8f8ff"),vm.bc2=color.shadeColor(vm.bc,vm.shade)}function plusShade(){vm.shade=vm.shade+1,vm.shade>10&&(vm.shade=10),vm.bc2=color.shadeColor(vm.bc,vm.shade/10)}function minusShade(){vm.shade=vm.shade-1,vm.shade<-10&&(vm.shade=-10),vm.bc2=color.shadeColor(vm.bc,vm.shade/10)}function valRank(){if(void 0==vm.rankTitle)dialog.getDialog("rankTitle");else if(vm.rankTitle.indexOf("San Diego")<0&&vm.scopeIsCity){vm.rankTitle=vm.rankTitle+" in San Diego";dialog.notificationWithCallback("We made an adjustment","Because you are adding a City Ranking, we added 'in San Diego' to your Rank Title.",getSimilarRanks)}else getSimilarRanks()}function getSimilarRanks(){vm.similarRanks=search.searchRanks2(vm.rankTitle),vm.similarRanks.length>0?vm.showAlert=!0:alertOk()}function getImages(){var qry=vm.imageQuery.replace(" ","+");vm.images=[],vm.i=0,vm.pixabay&&(vm.imageLoading=!0,pixabay.search(qry).then(function(result){$rootScope.DEBUG_MODE&&console.log("Pixabay results - ",result),vm.numResults=result.length;for(var i=0;i<vm.numResults;i++)vm.images.push(result[i]);vm.images[vm.i]?(vm.image=vm.images[vm.i].previewURL,vm.selImageEnable=""):(vm.selImageEnable="disabled",dialog.getDialog("noImages")),vm.imageLoading=!1})),vm.pexels&&(vm.imageLoading=!0,pexels.reqFromServer(qry).then(function(res){var result=res.data.photos;$rootScope.DEBUG_MODE&&console.log("Pexels results - ",result),vm.numResults=result.length;for(var i=0;i<vm.numResults;i++)vm.images.push(result[i]);vm.images[vm.i]?(vm.image=vm.images[vm.i].src.small,vm.selImageEnable=""):(vm.selImageEnable="disabled",dialog.getDialog("noImages")),vm.imageLoading=!1}))}function nextImg(){vm.i=vm.i+1,vm.i>vm.images.length-1&&(vm.i=vm.images.length-1),vm.pixabay&&vm.images[vm.i]&&(vm.image=vm.images[vm.i].previewURL),vm.pexels&&vm.images[vm.i]&&(vm.image=vm.images[vm.i].src.small)}function prevImg(){vm.i=vm.i-1,vm.i<0&&(vm.i=0),vm.pixabay&&vm.images[vm.i]&&(vm.image=vm.images[vm.i].previewURL),vm.pexels&&vm.images[vm.i]&&(vm.image=vm.images[vm.i].src.small)}function selectImg(){vm.step=7,vm.showAddButton=!0}function alertOk(){vm.showAlert=!1,vm.step=4}function tagsOk(){0==vm.tags.length?dialog.getDialog("rankTags"):vm.step=6}function questionOk(){void 0==vm.question?dialog.getDialog("rankQuestion"):vm.question.length<10?dialog.getDialog("rankQuestion"):vm.step=5}function whatisrankquestion(){dialog.whatisrankquestion()}function whataretags(){dialog.getDialog("whataretags")}function processImage(category){var cat=category,imageurl="";vm.pixabay&&(imageurl=vm.images[vm.i].webformatURL),vm.pexels&&(imageurl=vm.images[vm.i].src.medium),imageurl.indexOf("jpg"),imageurl.indexOf("png"),imageurl.indexOf("jpeg");var filename=vm.rankTitle.toLowerCase();filename=filename.replace(/ /g,"-"),filename=filename.replace("?",""),filename=filename+"-"+cat;processImageExec(imageurl,filename,cat),$rootScope.DEBUG_MODE&&console.log("Process Image - ",cat,imageurl,filename)}function processImageExec(imageurl,filename,category){$http({method:"POST",url:"https://server.rank-x.com/ImageServer/SaveImage",headers:{"X-Dreamfactory-API-Key":void 0,"X-DreamFactory-Session-Token":void 0},data:{imageurl:imageurl,filename:filename,category:category}}).then(function(result){$rootScope.DEBUG_MODE&&console.log("Processing Image Success",result)},function(error){$rootScope.DEBUG_MODE&&console.log("Error Processing Image - ",error)})}function goBack(){"rankSummary"==$rootScope.previousState?$state.go("rankSummary",{index:$rootScope.cCategory.slug}):"answerDetail"==$rootScope.previousState?$state.go("answerDetail",{index:$rootScope.canswer.slug}):$rootScope.$emit("backToResults")}function selImgBank(x){1==x&&(vm.pixabay=!0,vm.pexels=!1),2==x&&(vm.pixabay=!1,vm.pexels=!0)}function selScopeGeneral(x){1==x&&(vm.scopeIsGeneral=!0,vm.scopeIsCity=!1,vm.selScopeGeneralText="General"),2==x&&(vm.scopeIsGeneral=!1,vm.scopeIsCity=!0,vm.selScopeGeneralText="City")}function imageBanksDialog(){dialog.imageBank()}var vm=this;vm.title="addCustomRank",vm.goBack=goBack,vm.selType=selType,vm.selCat=selCat,vm.minusShade=minusShade,vm.plusShade=plusShade,vm.valRank=valRank,vm.alertOk=alertOk,vm.tagsOk=tagsOk,vm.questionOk=questionOk,vm.getImages=getImages,vm.nextImg=nextImg,vm.prevImg=prevImg,vm.selectImg=selectImg,vm.processImage=processImage,vm.whatisrankquestion=whatisrankquestion,vm.whataretags=whataretags,vm.selImgBank=selImgBank,vm.selScopeGeneral=selScopeGeneral,vm.imageBanksDialog=imageBanksDialog,vm.csel=csel,vm.c1sel=!0,vm.showAlert=!1,vm.showAddButton=!1,vm.selImageEnable="disabled",vm.question="Who do you recommend?";var itemt={},item={},rankTitleOk=!0,rankTypeOk=!0,rankQuestionOk=!0;vm.imageLoading=!1,vm.editRank=editRank,vm.addRank=addRank,vm.typeList=["Person","Establishment","Place","Activity","Short-Phrase","Organization","Event","Thing","PersonCust"],vm.isAdmin=$rootScope.isAdmin;var colors=[],ranks=[],idx=0,idx2=0;$window.innerWidth<512?(vm.sm=!0,vm.nsm=!1):(vm.sm=!1,vm.nsm=!0),function(){vm.resLength=-1,vm.rankType="Select ranking type",vm.rankCat="Choose a category",vm.selScopeGeneralText="Choose Scope...",vm.selScopeCityText="San Diego",vm.image=$rootScope.EMPTY_IMAGE,vm.i=0,vm.step=1,vm.shade=0,setBoxColor(1),vm.buttonLabel="Add Rank",selImgBank(1),$rootScope.DEBUG_MODE&&console.log("addCustomRank page Loaded!")}()}angular.module("app").controller("addCustomRank",addCustomRank),addCustomRank.$inject=["$location","$rootScope","$state","$stateParams","categories","search","dialog","$window","answer","color","pixabay","pexels","$http","table","$timeout","$scope"]}(),function(){"use strict";function trends(location,$rootScope,$state,$window){}angular.module("app").controller("trends",trends),trends.$inject=["$location","$rootScope","$state","$window"]}(),function(){"use strict";function promotertos($state,$rootScope){function goBack(){"rankSummary"==$rootScope.previousState?$state.go("rankSummary",{index:$rootScope.cCategory.slug}):"answerDetail"==$rootScope.previousState?$state.go("answerDetail",{index:$rootScope.canswer.slug}):"addAnswer"==$rootScope.previousState?$state.go("addAnswer",{index:$rootScope.canswer.slug}):"editAnswer"==$rootScope.previousState?$state.go("editAnswer",{index:$rootScope.canswer.slug}):"about"==$rootScope.previousState?$state.go("about"):$state.go("cwrapper")}var vm=this;vm.title="Promoter Terms of Service",vm.goBack=goBack,function(){console.log("Promoter Terms of Service page Loaded!")}()}angular.module("app").controller("promotertos",promotertos),promotertos.$inject=["$state","$rootScope"]}(),function(){"use strict";function privacypolicy($state,$rootScope){function goBack(){"rankSummary"==$rootScope.previousState?$state.go("rankSummary",{index:$rootScope.cCategory.id}):"answerDetail"==$rootScope.previousState?$state.go("answerDetail",{index:$rootScope.canswer.id}):"addAnswer"==$rootScope.previousState?$state.go("addAnswer",{index:$rootScope.canswer.id}):"editAnswer"==$rootScope.previousState?$state.go("editAnswer",{index:$rootScope.canswer.id}):"about"==$rootScope.previousState?$state.go("about"):($rootScope.$emit("backToResults"),$state.go("cwrapper"))}var vm=this;vm.title="privacypolicy",vm.goBack=goBack,function(){console.log("privacypolicy page Loaded!")}()}angular.module("app").controller("privacypolicy",privacypolicy),privacypolicy.$inject=["$state","$rootScope"]}(),function(){"use strict";function myfriends(location,$rootScope,$state,$window,votes,$scope,dialog){function showAllFriendsList(userObjs,answername){dialog.showAllFriendsListDlg(userObjs,answername)}function formatTables(){for(var i=0;i<$rootScope.headlines.length;i++)if("food"==$rootScope.headlines[i].type){vm.bgc1=$rootScope.headlines[i].bc,vm.fc1=$rootScope.headlines[i].fc,vm.headline1=$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("lifestyle"==$rootScope.headlines[i].type){vm.bgc2=$rootScope.headlines[i].bc,vm.fc2=$rootScope.headlines[i].fc,vm.headline2=$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("services"==$rootScope.headlines[i].type){vm.bgc3=$rootScope.headlines[i].bc,vm.fc3=$rootScope.headlines[i].fc,vm.headline3=$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("health"==$rootScope.headlines[i].type){vm.bgc4=$rootScope.headlines[i].bc,vm.fc4=$rootScope.headlines[i].fc,vm.headline4=$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("beauty"==$rootScope.headlines[i].type){vm.bgc5=$rootScope.headlines[i].bc,vm.fc5=$rootScope.headlines[i].fc,vm.headline5=$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("social"==$rootScope.headlines[i].type){vm.bgc6=$rootScope.headlines[i].bc,vm.fc6=$rootScope.headlines[i].fc,vm.headline6=$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("family"==$rootScope.headlines[i].type){vm.bgc7=$rootScope.headlines[i].bc,vm.fc7=$rootScope.headlines[i].fc,vm.headline7=$rootScope.headlines[i].title;break}}function formatData(){var answer={},category={};vm.foodans=[],vm.lifestyleans=[],vm.servicesans=[],vm.healthans=[],vm.beautyans=[],vm.socialans=[],vm.familyans=[];for(var i=0;i<$rootScope.friends_votes.length;i++)if(1==$rootScope.friends_votes[i].vote){var idx=$rootScope.answers.map(function(x){return x.id}).indexOf($rootScope.friends_votes[i].answer);if(answer=$rootScope.answers[idx],idx>-1&&"Establishment"==answer.type)for(var n=0;n<$rootScope.catansrecs.length;n++)if($rootScope.catansrecs[n].answer==answer.id){var idx2=$rootScope.content.map(function(x){return x.id}).indexOf($rootScope.catansrecs[n].category);if(!(category=$rootScope.content[idx2]))continue;(category.title.indexOf("food")>-1||category.tags.indexOf("food")>-1)&&addRecord(vm.foodans,answer,i),(category.title.indexOf("lifestyle")>-1||category.tags.indexOf("lifestyle")>-1)&&addRecord(vm.lifestyleans,answer,i),(category.title.indexOf("services")>-1||category.tags.indexOf("services")>-1)&&addRecord(vm.servicesans,answer,i),(category.title.indexOf("health")>-1||category.tags.indexOf("health")>-1)&&addRecord(vm.healthans,answer,i),(category.title.indexOf("beauty")>-1||category.tags.indexOf("beauty")>-1)&&addRecord(vm.beautyans,answer,i),(category.title.indexOf("social")>-1||category.tags.indexOf("social")>-1)&&addRecord(vm.socialans,answer,i),(category.title.indexOf("family")>-1||category.tags.indexOf("family")>-1)&&addRecord(vm.familyans,answer,i)}}vm.foodans.length>5&&(vm.cb1gt5=!0),vm.lifestyleans.length>5&&(vm.cb2gt5=!0),vm.servicesans.length>5&&(vm.cb3gt5=!0),vm.healthans.length>5&&(vm.cb4gt5=!0),vm.beautyans.length>5&&(vm.cb5gt5=!0),vm.socialans.length>5&&(vm.cb6gt5=!0),vm.familyans.length>5&&(vm.cb7gt5=!0),vm.foodans.length>0?vm.answerExist1=!0:vm.answerExist1=!1,vm.lifestyleans.length>0?vm.answerExist2=!0:vm.answerExist2=!1,vm.servicesans.length>0?vm.answerExist3=!0:vm.answerExist3=!1,vm.healthans.length>0?vm.answerExist4=!0:vm.answerExist4=!1,vm.beautyans.length>0?vm.answerExist5=!0:vm.answerExist5=!1,vm.socialans.length>0?vm.answerExist6=!0:vm.answerExist6=!1,vm.familyans.length>0?vm.answerExist7=!0:vm.answerExist7=!1,0==vm.foodans.length&&0==vm.servicesans.length&&0==vm.lifestyleans.length&&0==vm.healthans.length&&0==vm.beautyans.length&&0==vm.socialans.length&&0==vm.familyans.length&&(vm.noAns=!0)}function getSpecials(answer){for(var i=0;i<$rootScope.specials.length;i++)if(answer.id==$rootScope.specials[i].answer&&"weekly"==$rootScope.specials[i].freq&&(0==dayOfWeek&&$rootScope.specials[i].sun&&(isToday=!0),1==dayOfWeek&&$rootScope.specials[i].mon&&(isToday=!0),2==dayOfWeek&&$rootScope.specials[i].tue&&(isToday=!0),3==dayOfWeek&&$rootScope.specials[i].wed&&(isToday=!0),4==dayOfWeek&&$rootScope.specials[i].thu&&(isToday=!0),5==dayOfWeek&&$rootScope.specials[i].fri&&(isToday=!0),6==dayOfWeek&&$rootScope.specials[i].sat&&(isToday=!0),isToday)){answer.sp_bc=$rootScope.specials[i].bc,answer.sp_fc=$rootScope.specials[i].fc,answer.sp_title=$rootScope.specials[i].stitle;break}}function getUser(answer,votetable){for(var i=0;i<$rootScope.user.friends.data.length;i++)if(votetable.user==$rootScope.user.friends.data[i].id)return $rootScope.user.friends.data[i]}function addRecord(part,answer,i){var cidx=-1,ridx=-1,fidx=0,idx=-1;if(cidx=$rootScope.catansrecs.map(function(x){return x.id}).indexOf($rootScope.friends_votes[i].catans),cidx>-1&&(ridx=$rootScope.content.map(function(x){return x.id}).indexOf($rootScope.catansrecs[cidx].category)),idx=part.map(function(x){return x.id}).indexOf(answer.id),ridx>-1)if(-1==idx){var data=angular.copy(answer);getSpecials(data),data.trackID=data.id+""+$rootScope.friends_votes[i].id,data.userObjs=[];var friend=angular.copy(getUser(data,$rootScope.friends_votes[i]));friend.endorsements=[],friend.endorsements.push($rootScope.content[ridx].title),data.userObjs.push(friend),part.push(data)}else{var friend=angular.copy(getUser(data,$rootScope.friends_votes[i]));fidx=part[idx].userObjs.map(function(x){return x.id}).indexOf(friend.id),-1==fidx?(friend.endorsements=[],friend.endorsements.push($rootScope.content[ridx].title),part[idx].userObjs.push(friend)):-1==part[idx].userObjs[fidx].endorsements.indexOf($rootScope.content[ridx].title)&&part[idx].userObjs[fidx].endorsements.push($rootScope.content[ridx].title)}}function answerDetail(cb,x){switch($rootScope.myfavs={},cb){case 1:$rootScope.canswers=vm.foodans,$rootScope.myfavs.title="My Food";break;case 2:$rootScope.canswers=vm.lifestyleans,$rootScope.myfavs.title="My Lifestyle";break;case 3:$rootScope.canswers=vm.servicesans,$rootScope.myfavs.title="My Services";break;case 4:$rootScope.canswers=vm.healthans,$rootScope.myfavs.title="My Health";break;case 5:$rootScope.canswers=vm.beautyans,$rootScope.myfavs.title="My Beauty";break;case 6:$rootScope.canswers=vm.socialans,$rootScope.myfavs.title="My Social";break;case 7:$rootScope.canswers=vm.familyans,$rootScope.myfavs.title="My Family"}$state.go("answerDetail",{index:x.slug})}function seeMore(x){1==x&&(5==vm.maxRes1?(vm.btext1="See less",vm.maxRes1=100):(vm.btext1="See more",vm.maxRes1=5)),2==x&&(5==vm.maxRes2?(vm.btext2="See less",vm.maxRes2=100):(vm.btext2="See more",vm.maxRes2=5)),3==x&&(5==vm.maxRes3?(vm.btext3="See less",vm.maxRes3=100):(vm.btext3="See more",vm.maxRes3=5)),4==x&&(5==vm.maxRes4?(vm.btext4="See less",vm.maxRes4=100):(vm.btext4="See more",vm.maxRes4=5)),5==x&&(5==vm.maxRes5?(vm.btext5="See less",vm.maxRes5=100):(vm.btext5="See more",vm.maxRes5=5)),6==x&&(5==vm.maxRes6?(vm.btext6="See less",vm.maxRes6=100):(vm.btext6="See more",vm.maxRes6=5)),7==x&&(5==vm.maxRes7?(vm.btext7="See less",vm.maxRes7=100):(vm.btext7="See more",vm.maxRes7=5))}function goBack(){"rankSummary"==$rootScope.previousState?$state.go("rankSummary",{index:$rootScope.cCategory.slug}):$state.go("cwrapper")}var vm=this;vm.title="myfriends",vm.goBack=goBack,vm.answerDetail=answerDetail,vm.seeMore=seeMore,vm.showAllFriendsList=showAllFriendsList,$scope.$parent.$parent.$parent.seo={pageTitle:"My Friends' Favourite",metaDescription:"RankX lets you see your friends' favorite food, lifestyle, health, beauty and services."};var cdate=new Date,dayOfWeek=cdate.getDay(),isToday=!1;vm.noAns=!1,vm.friendsDataLoading=!0,vm.maxRes1=5,vm.btext1="See more",vm.maxRes2=5,vm.btext2="See more",vm.maxRes3=5,vm.btext3="See more",vm.maxRes4=5,vm.btext4="See more",vm.maxRes5=5,vm.btext5="See more",vm.maxRes6=5,vm.btext6="See more",vm.maxRes7=5,vm.btext7="See more",vm.cb1gt5=!1,vm.cb2gt5=!1,vm.cb3gt5=!1,vm.cb4gt5=!1,vm.cb5gt5=!1,vm.cb6gt5=!1,vm.cb7gt5=!1,function(){formatTables(),$rootScope.friendsVotes?formatData():votes.loadVotesByMyFriends().then(function(data){$rootScope.friends_votes=data,formatData()})}()}angular.module("app").controller("myfriends",myfriends),
myfriends.$inject=["$location","$rootScope","$state","$window","votes","$scope","dialog"]}(),function(){"use strict";function myfavs(location,$rootScope,$state,$window,dataloader){function formatTables(){for(var i=0;i<$rootScope.headlines.length;i++)if("food"==$rootScope.headlines[i].type){vm.bgc1=$rootScope.headlines[i].bc,vm.fc1=$rootScope.headlines[i].fc,vm.headline1="My "+$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("lifestyle"==$rootScope.headlines[i].type){vm.bgc2=$rootScope.headlines[i].bc,vm.fc2=$rootScope.headlines[i].fc,vm.headline2="My "+$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("services"==$rootScope.headlines[i].type){vm.bgc3=$rootScope.headlines[i].bc,vm.fc3=$rootScope.headlines[i].fc,vm.headline3="My "+$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("health"==$rootScope.headlines[i].type){vm.bgc4=$rootScope.headlines[i].bc,vm.fc4=$rootScope.headlines[i].fc,vm.headline4="My "+$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("beauty"==$rootScope.headlines[i].type){vm.bgc5=$rootScope.headlines[i].bc,vm.fc5=$rootScope.headlines[i].fc,vm.headline5="My "+$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("social"==$rootScope.headlines[i].type){vm.bgc6=$rootScope.headlines[i].bc,vm.fc6=$rootScope.headlines[i].fc,vm.headline6="My "+$rootScope.headlines[i].title;break}for(var i=0;i<$rootScope.headlines.length;i++)if("family"==$rootScope.headlines[i].type){vm.bgc7=$rootScope.headlines[i].bc,vm.fc7=$rootScope.headlines[i].fc,vm.headline7="My "+$rootScope.headlines[i].title;break}}function loadData(){var answer={},category={};vm.myfoodans=[],vm.mylifestyleans=[],vm.myservicesans=[],vm.myhealthans=[],vm.mybeautyans=[],vm.mysocialans=[],vm.myfamilyans=[];for(var tmap=[],i=0;i<$rootScope.cvotes.length;i++)if(1==$rootScope.cvotes[i].vote){var idx=$rootScope.answers.map(function(x){return x.id}).indexOf($rootScope.cvotes[i].answer);if(idx>-1&&(answer=$rootScope.answers[idx],"Establishment"==answer.type))for(var n=0;n<$rootScope.catansrecs.length;n++)if($rootScope.catansrecs[n].answer==answer.id){var idx2=$rootScope.content.map(function(x){return x.id}).indexOf($rootScope.catansrecs[n].category);if(!(category=$rootScope.content[idx2]))continue;(category.title.indexOf("food")>-1||category.tags.indexOf("food")>-1)&&(tmap=vm.myfoodans.map(function(x){return x.id}),tmap.indexOf(answer.id)<0&&(getSpecials(answer),vm.myfoodans.push(answer))),(category.title.indexOf("lifestyle")>-1||category.tags.indexOf("lifestyle")>-1)&&(tmap=vm.mylifestyleans.map(function(x){return x.id}),tmap.indexOf(answer.id)<0&&(getSpecials(answer),vm.mylifestyleans.push(answer))),(category.title.indexOf("services")>-1||category.tags.indexOf("services")>-1)&&(tmap=vm.myservicesans.map(function(x){return x.id}),tmap.indexOf(answer.id)<0&&(getSpecials(answer),vm.myservicesans.push(answer))),(category.title.indexOf("health")>-1||category.tags.indexOf("health")>-1)&&(tmap=vm.myhealthans.map(function(x){return x.id}),tmap.indexOf(answer.id)<0&&(getSpecials(answer),vm.myhealthans.push(answer))),(category.title.indexOf("beauty")>-1||category.tags.indexOf("beauty")>-1)&&(tmap=vm.mybeautyans.map(function(x){return x.id}),tmap.indexOf(answer.id)<0&&(getSpecials(answer),vm.mybeautyans.push(answer))),(category.title.indexOf("social")>-1||category.tags.indexOf("social")>-1)&&(tmap=vm.mysocialans.map(function(x){return x.id}),tmap.indexOf(answer.id)<0&&(getSpecials(answer),vm.mysocialans.push(answer))),(category.title.indexOf("family")>-1||category.tags.indexOf("family")>-1)&&(tmap=vm.myfamilyans.map(function(x){return x.id}),tmap.indexOf(answer.id)<0&&(getSpecials(answer),vm.myfamilyans.push(answer)))}}vm.myfoodans.length>5&&(vm.cb1gt5=!0),vm.mylifestyleans.length>5&&(vm.cb2gt5=!0),vm.myservicesans.length>5&&(vm.cb3gt5=!0),vm.myhealthans.length>5&&(vm.cb4gt5=!0),vm.mybeautyans.length>5&&(vm.cb5gt5=!0),vm.mysocialans.length>5&&(vm.cb6gt5=!0),vm.myfamilyans.length>5&&(vm.cb7gt5=!0),vm.myfoodans.length>0?vm.answerExist1=!0:vm.answerExist1=!1,vm.mylifestyleans.length>0?vm.answerExist2=!0:vm.answerExist2=!1,vm.myservicesans.length>0?vm.answerExist3=!0:vm.answerExist3=!1,vm.myhealthans.length>0?vm.answerExist4=!0:vm.answerExist4=!1,vm.mybeautyans.length>0?vm.answerExist5=!0:vm.answerExist5=!1,vm.mysocialans.length>0?vm.answerExist6=!0:vm.answerExist6=!1,vm.myfamilyans.length>0?vm.answerExist7=!0:vm.answerExist7=!1,0==vm.myfoodans.length&&0==vm.myservicesans.length&&0==vm.mylifestyleans.length&&0==vm.myhealthans.length&&0==vm.mybeautyans.length&&0==vm.mysocialans.length&&0==vm.myfamilyans.length&&(vm.noAns=!0)}function getSpecials(answer){for(var i=0;i<$rootScope.specials.length;i++)if(answer.id==$rootScope.specials[i].answer&&"weekly"==$rootScope.specials[i].freq&&(0==dayOfWeek&&$rootScope.specials[i].sun&&(isToday=!0),1==dayOfWeek&&$rootScope.specials[i].mon&&(isToday=!0),2==dayOfWeek&&$rootScope.specials[i].tue&&(isToday=!0),3==dayOfWeek&&$rootScope.specials[i].wed&&(isToday=!0),4==dayOfWeek&&$rootScope.specials[i].thu&&(isToday=!0),5==dayOfWeek&&$rootScope.specials[i].fri&&(isToday=!0),6==dayOfWeek&&$rootScope.specials[i].sat&&(isToday=!0),isToday)){answer.sp_bc=$rootScope.specials[i].bc,answer.sp_fc=$rootScope.specials[i].fc,answer.sp_title=$rootScope.specials[i].stitle;break}}function answerDetail(cb,x){switch($rootScope.myfavs={},cb){case 1:$rootScope.canswers=vm.myfoodans,$rootScope.myfavs.title="My Food";break;case 2:$rootScope.canswers=vm.mylifestyleans,$rootScope.myfavs.title="My Lifestyle";break;case 3:$rootScope.canswers=vm.myservicesans,$rootScope.myfavs.title="My Services";break;case 4:$rootScope.canswers=vm.myhealthans,$rootScope.myfavs.title="My Health";break;case 5:$rootScope.canswers=vm.mybeautyans,$rootScope.myfavs.title="My Beauty";break;case 6:$rootScope.canswers=vm.mysocialans,$rootScope.myfavs.title="My Social";break;case 7:$rootScope.canswers=vm.myfamilyans,$rootScope.myfavs.title="My Family"}$state.go("answerDetail",{index:x.id})}function seeMore(x){1==x&&(5==vm.maxRes1?(vm.btext1="See less",vm.maxRes1=100):(vm.btext1="See more",vm.maxRes1=5)),2==x&&(5==vm.maxRes2?(vm.btext2="See less",vm.maxRes2=100):(vm.btext2="See more",vm.maxRes2=5)),3==x&&(5==vm.maxRes3?(vm.btext3="See less",vm.maxRes3=100):(vm.btext3="See more",vm.maxRes3=5)),4==x&&(5==vm.maxRes4?(vm.btext4="See less",vm.maxRes4=100):(vm.btext4="See more",vm.maxRes4=5)),5==x&&(5==vm.maxRes5?(vm.btext5="See less",vm.maxRes5=100):(vm.btext5="See more",vm.maxRes5=5)),6==x&&(5==vm.maxRes6?(vm.btext6="See less",vm.maxRes6=100):(vm.btext6="See more",vm.maxRes6=5)),7==x&&(5==vm.maxRes7?(vm.btext7="See less",vm.maxRes7=100):(vm.btext7="See more",vm.maxRes7=5))}function goBack(){"rankSummary"==$rootScope.previousState?$state.go("rankSummary",{index:$rootScope.cCategory.slug}):$rootScope.$emit("backToResults")}var vm=this;vm.title="myfavs",vm.goBack=goBack,vm.answerDetail=answerDetail,vm.seeMore=seeMore;var cdate=new Date,dayOfWeek=cdate.getDay(),isToday=!1;vm.noAns=!1,vm.maxRes1=5,vm.btext1="See more",vm.maxRes2=5,vm.btext2="See more",vm.maxRes3=5,vm.btext3="See more",vm.maxRes4=5,vm.btext4="See more",vm.maxRes5=5,vm.btext5="See more",vm.maxRes6=5,vm.btext6="See more",vm.maxRes7=5,vm.btext7="See more",vm.cb1gt5=!1,vm.cb2gt5=!1,vm.cb3gt5=!1,vm.cb4gt5=!1,vm.cb5gt5=!1,vm.cb6gt5=!1,vm.cb7gt5=!1,function(){$rootScope.inFavMode=!0,formatTables(),loadData(),$rootScope.DEBUG_MODE&&console.log("myfavs page Loaded!")}()}angular.module("app").controller("myfavs",myfavs),myfavs.$inject=["$location","$rootScope","$state","$window","dataloader"]}(),function(){"use strict";function mybusiness(location,$rootScope,$state,$window,$scope,useraccnt,dialog,answer,$http,promoter,SERVER_URL,$q,setting,codeprice){function changeCardNumber(){$state.go("mybusiness",{},{reload:!0})}function loadData(){vm.mybizs=[];for(var accntExists=!1,bizObj={},i=0;i<$rootScope.answers.length;i++)if($rootScope.answers[i].owner==$rootScope.user.id&&("Establishment"==$rootScope.answers[i].type||"PersonCust"==$rootScope.answers[i].type)){accntExists=!1,bizObj={},bizObj=$rootScope.answers[i];for(var j=0;j<$rootScope.useraccnts.length;j++)if($rootScope.useraccnts[j].answer==$rootScope.answers[i].id){if(accntExists=!0,bizObj.status=$rootScope.useraccnts[j].status,bizObj.bizcat=$rootScope.useraccnts[j].bizcat,bizObj.email=$rootScope.useraccnts[j].email,bizObj.accountid=$rootScope.useraccnts[j].id,bizObj.stripeid=$rootScope.useraccnts[j].stripeid,bizObj.lastPaymentMade=formatDate($rootScope.useraccnts[j].lastPaymentMade),bizObj.nextPaymentDue=formatDate($rootScope.useraccnts[j].nextPaymentDue),bizObj.lastPaymentAmount=$rootScope.useraccnts[j].lastPaymentAmount/100,bizObj.nextPaymentAmount=$rootScope.useraccnts[j].nextPaymentAmount/100,bizObj.istrial=$rootScope.useraccnts[j].istrial,bizObj.discountEndDate=formatDate($rootScope.useraccnts[j].discountEndDate),bizObj.monthlyCost=$rootScope.useraccnts[j].monthlyCost,bizObj.isPremium=$rootScope.useraccnts[j].ispremium,bizObj.hasRanks=$rootScope.useraccnts[j].hasranks,bizObj.ranksQty=$rootScope.useraccnts[j].ranksqty,bizObj.stripesub=$rootScope.useraccnts[j].stripesub,bizObj.stripesipremium=$rootScope.useraccnts[j].stripesipremium,bizObj.stripesiranks=$rootScope.useraccnts[j].stripesiranks,bizObj.user=$rootScope.useraccnts[j].user,bizObj.firstname=$rootScope.user.first_name,bizObj.lastname=$rootScope.user.last_name,bizObj.promocode=$rootScope.useraccnts[j].promocode,bizObj.isPremium?(bizObj.status="Premium",bizObj.style="background-color:#47d147"):(bizObj.status="Basic",bizObj.style="background-color:#ffffff"),bizObj.hasRanks?(bizObj.status2=bizObj.ranksQty+" Custom Ranks",bizObj.style2="background-color:#47d147"):(bizObj.status2="No Custom Ranks",bizObj.style2="background-color:#ffffff"),bizObj.istrial){var todayDate=Date.now(),endDate=new Date(bizObj.discountEndDate);bizObj.daysLeft=Math.floor((endDate-todayDate)/864e5)}for(var k=0;k<$rootScope.codeprices.length;k++)if($rootScope.codeprices[k].code==bizObj.bizcat){bizObj.price=$rootScope.codeprices[k].price;break}break}accntExists||useraccnt.adduseraccnt($rootScope.answers[i]),bizObj.loadingInvoices=!0,bizObj.invoices=[],loadInvoicesAndCustomer(bizObj),loadPromoter(bizObj),$rootScope.DEBUG_MODE&&console.log("bizObj - ",bizObj),vm.mybizs.push(bizObj)}0==vm.mybizs.length&&(vm.noAns=!0)}function showInvoicsClicked(){vm.showInvoices=!vm.showInvoices,vm.showInvoices&&(vm.showPaymentInfo=!1)}function hideInvoices(){vm.showInvoices=!1}function showPaymentInfoEditClicked(){vm.showPaymentInfo=!vm.showPaymentInfo,vm.showInvoices=!1}function GetFormattedDate(date){return format(date.getMonth()+1)+"/"+format(date.getDate())+"/"+format(date.getFullYear())}function loadPromoter(biz){biz.promocode?promoter.getbyCode(biz.promocode).then(function(promoterObj){promoterObj.length>=1&&(biz.promoterObj=promoterObj[0])}):biz.promoterObj=void 0}function loadInvoicesAndCustomer(biz){-1===[void 0,"","0"].indexOf(biz.stripeid)&&useraccnt.getuseraccntInvoicesAndCustomer(biz.stripeid).then(function(result){var invoices=angular.copy(result.invoices);biz.invoices=invoices.data.map(function(invoice){return invoice.period_end=new Date(1e3*invoice.period_end),invoice.date=moment(1e3*invoice.date).format("YYYY-MM-DD"),invoice.period_start=new Date(1e3*invoice.period_start),invoice.discount?Date.now()>1e3*invoice.discount.end?invoice.discountMsg="Trial Ended":invoice.discountMsg="Trial "+Math.ceil(moment.duration(1e3*invoice.discount.end-Date.now()).asDays())+" Days left":invoice.discountMsg="No Discount",invoice}),biz.customer=result.customer,biz.loadingInvoices=!1}).catch(function(err){biz.invoices=[],console.log("Error getting Stripe Invoices - ",err)})}function gotoanswer(x){$state.go("answerDetail",{index:x.slug})}function gotomanage(x){vm.showInvoices=!1,vm.showPaymentInfo=!1,vm.codeMsg="Enter a code and validate it using the 'Check code' button",vm.promocode="",vm.business=x,vm.getRanks=!1,vm.getPremium=!1,vm.ranksQty=1,vm.overview=!1,vm.manageview=!0,x.isPremium&&x.hasRanks?vm.sell=!1:vm.sell=!0,checkData(),$rootScope.DEBUG_MODE&&console.log("vm.business",x)}function goBack(){return 1==vm.manageview?(vm.overview=!0,vm.manageview=!1,void(vm.checkout=!1)):1==vm.checkout?(vm.manageview=!0,vm.checkout=!1,void(vm.overview=!1)):void(1==vm.overview&&("rankSummary"==$rootScope.previousState?$state.go("rankSummary",{index:$rootScope.cCategory.slug}):"answerDetail"==$rootScope.previousState?$state.go("answerDetail",{index:$rootScope.canswer.slug}):"addAnswer"==$rootScope.previousState?$state.go("addAnswer",{index:$rootScope.canswer.id}):"editAnswer"==$rootScope.previousState?$state.go("editAnswer",{index:$rootScope.canswer.id}):"about"==$rootScope.previousState?$state.go("about"):$rootScope.$emit("backToResults")))}function unbind(id){dialog.unbindAccount(vm.business,exec_unbind)}function exec_unbind(){answer.updateAnswer(vm.business.id,["owner"],[0]),useraccnt.deleteAccount(vm.business.stripeid,vm.business.accountid,vm.business.answer).then(function(res){vm.mybizs=[],loadData(),vm.overview=!0,vm.manageview=!1}).catch(function(err){console.log(err)})}function plusQty(){vm.ranksQty=vm.ranksQty+1}function minusQty(){vm.ranksQty=vm.ranksQty-1,vm.ranksQty<1&&(vm.ranksQty=1)}function checkcode(){8==vm.promocode.length?(vm.codeMsg="Validating code ...",promoter.getbyCode(vm.promocode).then(function(result){console.log("code exists - ",result.length,result),result.length>0?(vm.codeOk=!0,vm.codeMsg="This code gets you 60 days free on all your subscriptions!"):(vm.codeOk=!1,vm.codeMsg="Sorry, this is not a valid code.")})):(vm.codeOk=!1,vm.codeMsg="Sorry, this is not a valid code.")}function checkData(){vm.contactInfoOk,vm.fnok=!1,vm.lnok=!1,vm.emok=!1,void 0!=vm.business.firstname&&""!=vm.business.firstname&&null!=vm.business.firstname&&(vm.fnok=!0),void 0!=vm.business.lastname&&""!=vm.business.lastname&&null!=vm.business.lastname&&(vm.lnok=!0),void 0!=vm.business.email&&""!=vm.business.email&&null!=vm.business.email&&vm.business.email.indexOf("@")>-1&&(vm.emok=!0),vm.contactInfoOk=vm.fnok&&vm.lnok&&vm.emok,void 0!=vm.business.bizcat&&""!=vm.business.bizcat&&null!=vm.business.bizcat||dialog.notificationWithCallback("Missing Data","The business category for this establishment or profile has not been assigned. Please contact rank-x at <strong>contact@rank-x.com</strong> for more information.",goBack)}function goCheckout(){vm.acceptTOS=!1,0==vm.contactInfoOk?(vm.fnok||dialog.getDialog("invalidFirstName"),vm.lnok||dialog.getDialog("invalidLastName"),vm.emok||dialog.getDialog("invalidEmail")):0==vm.getRanks&&0==vm.getPremium?dialog.getDialog("nothingSelectedForPurchase"):(vm.total=vm.getRanks*vm.ranksQty*vm.CUSTOM_RANK_PRICE+vm.getPremium*vm.business.price,vm.manageview=!1,vm.checkout=!0,loopCheck("purchase"))}function cancelPremium(){vm.business.hasRanks?(cancelAll=!1,cancelPremium=!0,cancelRanks=!1,cancelNumRanks=0,dialog.confirmCancel(vm.business,"Premium",execCancel)):(cancelAll=!0,cancelPremium=!1,cancelRanks=!1,cancelNumRanks=0,dialog.confirmCancel(vm.business,"Premium",execCancel))}function execCancel(){var url=SERVER_URL+"StripeServer/cancel",req={method:"POST",url:url,headers:{"X-Dreamfactory-API-Key":void 0,"X-DreamFactory-Session-Token":void 0},data:{cancelAll:cancelAll,cancelPremium:cancelPremium,cancelRanks:cancelRanks,cancelNumRanks:cancelNumRanks,stripeId:vm.business.stripeid,useraccntId:vm.business.accountid,stripesub:vm.business.stripesub,stripesipremium:vm.business.stripesipremium,stripesiranks:vm.business.stripesiranks,answerId:vm.business.id}};$http(req).then(function(result){$rootScope.DEBUG_MODE&&console.log("Cancelling Premium Membership Success",result),dialog.notificationSuccess("Success","Succesfully cancelled your Premium Membership")},function(error){$rootScope.DEBUG_MODE&&console.log("Error Cancelling Premium Membership - ",error),dialog.notificationDanger("Error","There was an error cancelling your Premium Membership")}),loopCheck("cancel")}function cancelAllRanks(){vm.business.isPremium?(cancelAll=!1,cancelPremium=!1,cancelRanks=!0,cancelNumRanks=0,dialog.confirmCancel(vm.business,"Ranks",execCancel)):(cancelAll=!0,cancelPremium=!1,cancelRanks=!1,cancelNumRanks=0,dialog.confirmCancel(vm.business,"Ranks",execCancel))}function cancelAll(){cancelAll=!0,cancelPremium=!1,cancelRanks=!1,cancelNumRanks=0,dialog.confirmCancel(vm.business,"All",execCancel)}function editRanks(){dialog.editNumRanks(vm.business,execEditNumRanks)}function execEditNumRanks(action,N){if("cancel"==action&&N==vm.business.ranksQty)cancelAllRanks();else{var updatedNumRanks=0;"purchase"==action&&(updatedNumRanks=vm.business.ranksQty+N),"cancel"==action&&(updatedNumRanks=vm.business.ranksQty-N);var url=SERVER_URL+"StripeServer/edit",req={method:"POST",url:url,headers:{"X-Dreamfactory-API-Key":void 0,"X-DreamFactory-Session-Token":void 0},data:{action:action,numRanks:updatedNumRanks,stripeId:vm.business.stripeid,useraccntId:vm.business.accountid,stripesub:vm.business.stripesub,stripesiranks:vm.business.stripesiranks,answerId:vm.business.id}};$http(req).then(function(result){$rootScope.DEBUG_MODE&&console.log("Updating Quantity of Custom Ranks Success",result),dialog.notificationSuccess("Success","Updating Quantity of Custom Ranks Success")},function(error){$rootScope.DEBUG_MODE&&console.log("Error Updating Quantity of Custom Ranks - ",error),dialog.notificationDanger("Error","Error Updating Quantity of Custom Ranks")}),loopCheck("edit",updatedNumRanks)}console.log("Execute Edit Num Ranks")}function addSubscription(){var url=SERVER_URL+"StripeServer/update",req={method:"POST",url:url,headers:{"X-Dreamfactory-API-Key":void 0,"X-DreamFactory-Session-Token":void 0},data:{userId:vm.business.user,useraccntId:vm.business.accountid,answerId:vm.business.id,stripeId:vm.business.stripeid,stripeSub:vm.business.stripesub,getPremiumPlan:vm.getPremium,getCustomRanks:vm.getRanks,ranksQuantity:vm.ranksQty,couponValid:vm.codeOk,promoCode:vm.promocode,bizcat:vm.business.bizcat}};$http(req).then(function(result){$rootScope.DEBUG_MODE&&console.log("Updating Quantity of Custom Ranks Success",result),dialog.notificationSuccess("Success","Updating Quantity of Custom Ranks Success")},function(error){$rootScope.DEBUG_MODE&&console.log("Error Updating Quantity of Custom Ranks - ",error),dialog.notificationDanger("Error","Error Updating Quantity of Custom Ranks")})}function loopCheck(check,updatedNumRanks){console.log("---------------call loop check------------------------"),setTimeout(function(){function failGetuseraccnt(err){return console.log(JSON.stringify(err)),err}function successGetuseraccnt(result){var checkAgain=!0;console.log("i'm in, will check every 3 seconds for signup success"),console.log("full result:"),console.log(result);var missionAccomplished=!1;try{if("purchase"==check&&(vm.getPremium&&result[0].ispremium&&!vm.getRanks||!vm.getPremium&&vm.getRanks&&result[0].hasranks&&vm.ranksQty==result[0].ranksqty||vm.getPremium&&result[0].ispremium&&vm.getRanks&&result[0].hasranks&&vm.ranksQty==result[0].ranksqty)&&(missionAccomplished=!0),"cancel"==check&&(cancelPremium&&!result[0].ispremium&&""==result[0].stripesipremium||cancelRanks&&!result[0].hasranks&&""==result[0].stripesiranks||cancelAll&&""==result[0].stripesub)&&(missionAccomplished=!0),"edit"==check&&result[0].ranksqty==updatedNumRanks&&(missionAccomplished=!0),missionAccomplished){console.log("mission accomplished"),vm.purchase_progress=!1,vm.edit_progress=!1,vm.cancel_progress=!1,vm.processInProgress=!1;var idx=$rootScope.useraccnts.map(function(x){return x.id}).indexOf(result[0].id);console.log("idx - ",idx),$rootScope.useraccnts[idx]=result[0];var idx2=$rootScope.answers.map(function(x){return x.id}).indexOf(result[0].answer);return $rootScope.answers[idx2].ispremium=result[0].ispremium,$rootScope.answers[idx2].hasranks=result[0].hasranks,$rootScope.answers[idx2].ranksqty=result[0].ranksqty,loadData(),console.log(vm.mybiz),vm.overview=!0,vm.manageview=!1,vm.checkout=!1,vm.dataReady=!0,!0}console.log("havent accomplished mission yet")}catch(err){return console.log("error while looking up subscription info from DF: "+JSON.stringify(err)),checkAgain=!1,err}1==checkAgain&&(vm.checkout||vm.manage)&&(vm.acceptTOS&&vm.processInProgress&&("purchase"==check&&(vm.purchase_progress=!0),"edit"==check&&vm.acceptTOS&&vm.processInProgress&&(vm.edit_progress=!0),"cancel"==check&&vm.acceptTOS&&vm.processInProgress&&(vm.cancel_progress=!0)),loopCheck(check))}console.log("loopCheck -- ",check),useraccnt.getuseraccntans(vm.business.id).then(successGetuseraccnt,failGetuseraccnt)},3e3)}function clickStripeCheckout(){vm.processInProgress=!0}function editContact(){fields=["firstname","lastname","email"],labels=["First Name","Last Name","Email"],vals=[vm.business.firstname,vm.business.lastname,vm.business.email],dialog.editInfo(fields,labels,vals,execEditContact)}function execEditContact(newvals){useraccnt.updateuseraccnt(vm.business.accountid,fields,newvals).then(function(){loadData()})}function showTOSCustomersDlg(){dialog.showTOSCustomersDlg()}function showLearnMore(x){var url="";1==x&&(url="https://www.youtube.com/embed/IpUNM4Okb0U"),2==x&&(url="https://www.youtube.com/embed/pjxmggRM37o"),dialog.showLearnMore(url)}function stripeFormSubmit(e){alert()}function formatDate(x){return new Date(x).toDateString()}if(-1!==$window.location.href.indexOf("cardUpdate")){"success"==$window.location.href.slice($window.location.href.indexOf("cardUpdate")).split("=")[1].split("&")[0]?dialog.notificationSuccess("Success","Successfully changed card details."):$window.alert($window.location.href.slice($window.location.href.indexOf("messgage")).split("=")[1].split("&")[0])}var vm=this;vm.title="mybusiness",vm.overview=!0,vm.manageview=!1,vm.codeOk=!1,vm.getRanks=!1,vm.getPremium=!1,vm.dataReady=!1,vm.showInvoices=!1,vm.showPaymentInfo=!1,vm.processInProgress=!1,vm.SERVER_URL=SERVER_URL,vm.gotoanswer=gotoanswer,vm.gotomanage=gotomanage,vm.goCheckout=goCheckout,vm.unbind=unbind,vm.goBack=goBack,vm.ranksQty=1,vm.plusQty=plusQty,vm.minusQty=minusQty,vm.checkcode=checkcode,vm.cancelPremium=cancelPremium,vm.cancelAllRanks=cancelAllRanks,vm.editRanks=editRanks,vm.cancelAll=cancelAll,vm.editContact=editContact,vm.showInvoicsClicked=showInvoicsClicked,vm.showPaymentInfoEditClicked=showPaymentInfoEditClicked,vm.changeCardNumber=changeCardNumber,vm.GetFormattedDate=GetFormattedDate,vm.hideInvoices=hideInvoices,vm.showTOSCustomersDlg=showTOSCustomersDlg,vm.showLearnMore=showLearnMore,vm.mybizs=[],vm.clickStripeCheckout=clickStripeCheckout,vm.stripeFormSubmit=stripeFormSubmit,vm.addSubscription=addSubscription,function(){$rootScope.DEBUG_MODE&&console.log("activate business page"),$q.all([useraccnt.getuseraccnt(),setting.getSetting(),codeprice.get()]).then(function(data){$rootScope.useraccnts=data[0],vm.CUSTOM_RANK_PRICE=data[1].CUSTOM_RANK_PRICE,$rootScope.codeprices=data[2],vm.dataReady=!0,loadData()}),$rootScope.DEBUG_MODE&&console.log("mybusiness page Loaded!")}(),vm.noAns=!1;var cancelAll=!1,cancelPremium=!1,cancelRanks=!1,cancelNumRanks=0,fields=[],labels=[],vals=[]}angular.module("app").controller("mybusiness",mybusiness),mybusiness.$inject=["$location","$rootScope","$state","$window","$scope","useraccnt","dialog","answer","$http","promoter","SERVER_URL","$q","setting","codeprice"]}(),function(){"use strict";function feeds(location,$rootScope,$state,$window){}angular.module("app").controller("feeds",feeds),feeds.$inject=["$location","$rootScope","$state","$window"]}(),function(){"use strict";function feedback(location,$rootScope,$state){function goBack(){$state.go("cwrapper")}var vm=this;vm.title="feedback",vm.goBack=goBack,function(){console.log("feedback page Loaded!")}()}angular.module("app").controller("feedback",feedback),feedback.$inject=["$location","$rootScope","$state"]}(),function(){"use strict";function favs(location,$rootScope,$state,$window){}angular.module("app").controller("favs",favs),favs.$inject=["$location","$rootScope","$state","$window"]}(),function(){"use strict";function customertos($state,$rootScope){function goBack(){"rankSummary"==$rootScope.previousState?$state.go("rankSummary",{index:$rootScope.cCategory.slug}):"answerDetail"==$rootScope.previousState?$state.go("answerDetail",{index:$rootScope.canswer.slug}):"addAnswer"==$rootScope.previousState?$state.go("addAnswer",{index:$rootScope.canswer.slug}):"editAnswer"==$rootScope.previousState?$state.go("editAnswer",{index:$rootScope.canswer.slug}):"about"==$rootScope.previousState?$state.go("about"):$state.go("cwrapper")}var vm=this;vm.title="Customer Terms of Service",vm.goBack=goBack,function(){console.log("Customer Terms of Service page Loaded!")}()}angular.module("app").controller("customertos",customertos),customertos.$inject=["$state","$rootScope"]}(),function(){"use strict";function about(location,$rootScope,$state,$window,$scope){function goBack(){"rankSummary"==$rootScope.previousState?$state.go("rankSummary",{index:$rootScope.cCategory.slug}):"answerDetail"==$rootScope.previousState?$state.go("answerDetail",{index:$rootScope.canswer.slug}):$rootScope.$emit("backToResults")}var vm=this;vm.title="about",vm.goBack=goBack,$window.innerWidth<512?(vm.logoimage="/assets/images/rankxlogo_noheadline.png",vm.sm=!0):(vm.logoimage="/assets/images/rankxlogo_noheadline.png",vm.sm=!1),$scope.$parent.seo={pageTitle:"About",metaDescription:"Rank-X creates collective rankings on everything in your city."},function(){console.log("About page Loaded!")}()}angular.module("app").controller("about",about),about.$inject=["$location","$rootScope","$state","$window","$scope"]}(),function(){"use strict";function specials(location,$rootScope,$state,dialog,special){function displaySpecials(){vm.specialsList=[];for(var obj={},i=0;i<7;i++)obj={},i<$rootScope.specials.length?(obj=$rootScope.specials[i],obj.used=!0):(obj.stitle="Empty",obj.used=!1),vm.specialsList.push(obj)}function addSpecial(){$rootScope.specialmode="add",$state.go("editspecial")}function selSpecial(x){$rootScope.cspecial=x,$rootScope.specialmode="edit",$state.go("editspecial")}function deleteSpecial(x){selSpecial=x,dialog.deleteRank(x,execDeleteSpecial,!0)}function execDeleteSpecial(){special.deleteSpecial(selSpecial.id).then(function(){displaySpecials()})}function goBack(){$state.go("answerDetail",{index:$rootScope.canswer.id})}var vm=this;vm.title="specials",vm.addSpecial=addSpecial,vm.selSpecial=selSpecial,vm.deleteSpecial=deleteSpecial,vm.goBack=goBack,vm.specialsList=[],vm.dataReady=!1;var selSpecial={};!function(){special.getSpecialsbyAnswer($rootScope.canswer.id).then(function(response){$rootScope.specials=response,vm.dataReady=!0,displaySpecials()}),console.log("Specials Page loaded!")}()}angular.module("app").controller("specials",specials),specials.$inject=["$location","$rootScope","$state","dialog","special"]}(),function(){"use strict";function photogallery(location,$rootScope,$state){this.title="photogallery",function(){console.log("photogallery page Loaded!")}()}angular.module("app").controller("photogallery",photogallery),photogallery.$inject=["$location","$rootScope","$state"]}(),function(){"use strict";function mainphoto(location,$rootScope,$state){this.title="mainphoto",function(){console.log("mainphoto page Loaded!")}()}angular.module("app").controller("mainphoto",mainphoto),mainphoto.$inject=["$location","$rootScope","$state"]}(),function(){"use strict";function editvrows(location,$rootScope,$state,dialog,vrows,vrowvotes){function displayVRows(){function compare(a,b){return a.gnum-b.gnum}if(vm.vrows=[],$rootScope.cansvrows.length>0){vm.vrows=$rootScope.cansvrows.sort(compare),vm.vrows[0].shdr=!0;for(var i=1;i<vm.vrows.length;i++)vm.vrows[i].gnum==vm.vrows[i-1].gnum?vm.vrows[i].shdr=!1:vm.vrows[i].shdr=!0;vm.vrows[vm.vrows.length-1].saddr=!0;for(var i=0;i<vm.vrows.length-1;i++)vm.vrows[i].gnum!=vm.vrows[i+1].gnum?vm.vrows[i].saddr=!0:vm.vrows[i].saddr=!1}}function closeRank(){$state.go("answerDetail",{index:$rootScope.canswer.id})}function getVRows(answerid){$rootScope.cansvrows=[];for(var i=0;i<$rootScope.cvrows.length;i++)$rootScope.cvrows[i].answer==answerid&&$rootScope.cansvrows.push($rootScope.cvrows[i]);displayVRows()}function addVRowDiag(x){dialog.addVRow(x,addVRow)}function addVRow(x,newname){var isGroupFirst=!1;"-"==x.title&&(isGroupFirst=!0);var vrowobj=JSON.parse(JSON.stringify(x));if(vrowobj.id=void 0,vrowobj.$$hashKey=void 0,vrowobj.upV=0,vrowobj.downV=0,vrowobj.title=newname,isGroupFirst){vrows.updateRec(x.id,["title"],[newname]).then(function(){getVRows($rootScope.canswer.id)})}else{vrows.postRec(vrowobj).then(function(){getVRows($rootScope.canswer.id)})}}function deleteVRowDiag(x){dialog.deleteVRow(x,deleteVRow)}function deleteVRow(x){var promise=vrows.deleteVrow(x.id);vrowvotes.deleteVrowVotesbyVrow(x.id),promise.then(function(){getVRows($rootScope.canswer.id)})}function addVRowGroupDiag(){var x=vm.vrows[vm.vrows.length-1];dialog.addVRowGroup(x,addVRowGroup)}function addVRowGroup(x,newname){if(vm.vrows.length>0){var vrowobj=JSON.parse(JSON.stringify(x));vrowobj.id=void 0,vrowobj.$$hashKey=void 0,vrowobj.upV=0,vrowobj.downV=0,vrowobj.title="-",vrowobj.gnum=vm.vrows[vm.vrows.length-1].gnum+1,vrowobj.gtitle=newname}else vrowobj={},vrowobj.answer=$rootScope.canswer.id,vrowobj.gnum=0,vrowobj.gtitle=newname,vrowobj.title="-",vrowobj.upV=0,vrowobj.downV=0;vrows.postRec(vrowobj).then(function(){getVRows($rootScope.canswer.id)})}function editVRowGroupDiag(x){dialog.editVRowGroup(x,editVRowGroup,deleteVRowGroupDiag)}function editVRowGroup(x,newgroupname){var nameChanged=!1;if(x.gtitle!=newgroupname&&(nameChanged=!0),nameChanged){for(var i=0;i<$rootScope.cansvrows.length;i++)$rootScope.cansvrows[i].gnum==x.gnum&&($rootScope.cansvrows[i].gtitle=newgroupname,vrows.updateRec($rootScope.cansvrows[i].id,["gtitle"],[newgroupname]));getVRows($rootScope.canswer.id)}}function deleteVRowGroupDiag(x){dialog.deleteVRowGroup(x,deleteVRowGroup)}function deleteVRowGroup(x){vrows.deleteVrowByGroup(x.gnum,x.answer).then(function(){console.log("$rootScope.cvrows - ",$rootScope.cvrows),getVRows($rootScope.canswer.id)})}var vm=this;vm.title="editvrows";vm.header="Edit Vote Rows for "+$rootScope.canswer.name,vm.editvrowsList=[],vm.vrows=[],vm.addVRowDiag=addVRowDiag,vm.addVRowGroupDiag=addVRowGroupDiag,vm.deleteVRowDiag=deleteVRowDiag,vm.editVRowGroupDiag=editVRowGroupDiag,vm.closeRank=closeRank,function(){vm.vrows=$rootScope.cansvrows,displayVRows(),console.log("editvrows Page loaded!")}()}angular.module("app").controller("editvrows",editvrows),editvrows.$inject=["$location","$rootScope","$state","dialog","vrows","vrowvotes"]}(),function(){"use strict";function editspecial(location,$rootScope,$state,dialog,special,datetime,$scope){function displayCharLength(){vm.char=25-vm.sp.stitle.length}function frequencySel(x){1==x&&(vm.weekly=!1,vm.onetime=!0,vm.sp.freq="onetime"),2==x&&(vm.weekly=!0,vm.onetime=!1,vm.sp.freq="weekly")}function showPreview(){item=vm.sp,item.name=$rootScope.canswer.name,item.answer=$rootScope.canswer.id,item.image=vm.imageURL,item.freq=vm.onetime?"onetime":"weekly",dialog.createSpecialPreview(item,addSpecial)}function addSpecial(){if("onetime"==vm.sp.freq&&(item.stime2=null,item.etime2=null),"weekly"==vm.sp.freq&&(item.stime=null,item.sdate=null,item.etime=null,item.edate=null),0==vm.isEdit)special.addSpecial(item).then(function(){$state.go("specials")});else{var fields=[],vals=[];console.log("spx, vm.sp",spx,vm.sp),spx.bc!=vm.sp.bc&&(fields.push("bc"),vals.push(vm.sp.bc)),spx.fc!=vm.sp.fc&&(fields.push("fc"),vals.push(vm.sp.fc)),spx.edate!=vm.sp.edate&&(fields.push("edate"),vals.push(vm.sp.edate)),spx.etime!=vm.sp.etime&&(fields.push("etime"),vals.push(vm.sp.etime)),spx.etime2!=vm.sp.etime2&&(fields.push("etime2"),vals.push(vm.sp.etime2)),spx.sdate!=vm.sp.sdate&&(fields.push("sdate"),vals.push(vm.sp.sdate)),
spx.stime!=vm.sp.stime&&(fields.push("stime"),vals.push(vm.sp.stime)),spx.stime2!=vm.sp.stime2&&(fields.push("stime2"),vals.push(vm.sp.stime2)),spx.stitle!=vm.sp.stitle&&(fields.push("stitle"),vals.push(vm.sp.stitle)),spx.image!=vm.imageURL&&(fields.push("image"),vals.push(vm.imageURL)),spx.name!=vm.sp.name&&(fields.push("name"),vals.push(vm.sp.name)),spx.details!=vm.sp.details&&(fields.push("details"),vals.push(vm.sp.details)),spx.freq!=vm.sp.freq&&(fields.push("freq"),vals.push(vm.sp.freq)),spx.mon!=vm.sp.mon&&(fields.push("mon"),vals.push(vm.sp.mon)),spx.tue!=vm.sp.tue&&(fields.push("tue"),vals.push(vm.sp.tue)),spx.wed!=vm.sp.wed&&(fields.push("wed"),vals.push(vm.sp.wed)),spx.thu!=vm.sp.thu&&(fields.push("thu"),vals.push(vm.sp.thu)),spx.fri!=vm.sp.fri&&(fields.push("fri"),vals.push(vm.sp.fri)),spx.sat!=vm.sp.sat&&(fields.push("sat"),vals.push(vm.sp.sat)),spx.sun!=vm.sp.sun&&(fields.push("sun"),vals.push(vm.sp.sun)),console.log("fields, vals",fields,vals),special.updateSpecial(item.id,fields,vals).then(function(){$state.go("specials")})}}function deleteSpecial(){special.deleteSpecial(vm.sp.id),$state.go("specials")}function goBack(){$state.go("specials")}function createTimeDropdown(){vm.timeDD=["7:00 AM","7:30 AM","8:00 AM","8:30 AM","9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM","3:30 PM","4:00 PM","4:30 PM","5:00 PM","5:30 PM","6:00 PM","6:30 PM","7:00 PM","7:30 PM","8:00 PM","8:30 PM","9:00 PM","9:30 PM","10:00 PM","10:30 PM","11:00 PM","11:30 PM","12:00 AM","12:30 AM","1:00 AM","1:30 AM","2:00 AM","2:30 AM","3:00 AM","3:30 AM","4:00 AM","4:30 AM","5:00 AM","5:30 AM","6:00 AM","6:30 AM"]}function closeRank(){$state.go("answerDetail",{index:$rootScope.canswer.id})}var vm=this;vm.title="editspecial",vm.sp={};var spx={},item={};vm.displayCharLength=displayCharLength,vm.frequencySel=frequencySel,vm.showPreview=showPreview,vm.deleteSpecial=deleteSpecial,vm.goBack=goBack,vm.closeRank=closeRank,vm.header=$rootScope.canswer.name,vm.isEdit=!1,vm.userIsOwner=$rootScope.userIsOwner;var fileUploadedListener=$rootScope.$on("fileUploaded",function(event,data){console.log("Received fileUploaded",data),console.log("$state.current.name - ",$state.current.name),"editspecial"==$state.current.name&&(console.log("loaded date to vm.imageURL"),vm.imageURL=data)});$scope.$on("$destroy",fileUploadedListener),function(){"edit"==$rootScope.specialmode&&(vm.sp=JSON.parse(JSON.stringify($rootScope.cspecial)),spx=JSON.parse(JSON.stringify($rootScope.cspecial)),datetime.formatdatetime(vm.sp),vm.isEdit=!0,"onetime"==vm.sp.freq&&frequencySel(1),"weekly"==vm.sp.freq&&frequencySel(2),vm.sp.bc=vm.sp.bc,vm.sp.fc=vm.sp.fc,void 0!=vm.sp.image?vm.imageURL=vm.sp.image:vm.imageURL=$rootScope.EMPTY_IMAGE),"add"==$rootScope.specialmode&&(vm.char=25,vm.sp.fc="hsl(0, 100%, 0%)",vm.sp.bc="hsl(0, 0%, 100%)",frequencySel(1),vm.imageURL=$rootScope.EMPTY_IMAGE),createTimeDropdown(),console.log("editspecial page Loaded!")}()}angular.module("app").controller("editspecial",editspecial),editspecial.$inject=["$location","$rootScope","$state","dialog","special","datetime","$scope"]}(),function(){"use strict";function customer(location,$rootScope,$state,answer,dialog,special){function displayAnswers(){vm.answers=$rootScope.custans}function selAnswer(x){$rootScope.cust.canswer=x.id,console.log("current answer ",x.id,x.name)}function loadMainPhoto(){void 0==$rootScope.cust.canswer?dialog.getDialog("selectBusiness"):$state.go("mainphoto")}function loadSpecials(){void 0==$rootScope.cust.canswer?dialog.getDialog("selectBusiness"):$state.go("specials")}function loadPhotoGallery(){void 0==$rootScope.cust.canswer?dialog.getDialog("selectBusiness"):$state.go("photogallery")}function goBack(){$state.go("content")}var vm=this;vm.title="customer",vm.selMainPhoto="active",vm.selSpecials="",vm.selPhotoGallery="",vm.goBack=goBack,vm.loadMainPhoto=loadMainPhoto,vm.loadSpecials=loadSpecials,vm.loadPhotoGallery=loadPhotoGallery,vm.selAnswer=selAnswer,$rootScope.cust={},$rootScope.cust.id=1,function(){answer.getAnswerbyCustomer($rootScope.cust.id).then(function(response){$rootScope.custans=response.resource,console.log("Customer-Answer records: ",$rootScope.custans),displayAnswers()}),console.log("customer page Loaded!")}()}angular.module("app").controller("customer",customer),customer.$inject=["$location","$rootScope","$state","answer","dialog","special"]}(),function(){"use strict";function editAnswer(dialog,$stateParams,$state,$rootScope,catans,$scope,$modal,edit,editvote,answer,image,getgps,table,$window,getwiki,$http){function loadAnswerData(){vm.imageURL=vm.answer.imageurl,vm.establishmentNames=$rootScope.estNames.concat($rootScope.plaNames,$rootScope.orgNames,$rootScope.freNames);for(var i=0;i<$rootScope.fields.length;i++){switch(publicfield_obj={},publicfield_obj.field=$rootScope.fields[i].name,publicfield_obj.onlybyowner=$rootScope.fields[i].onlybyowner,$rootScope.fields[i].name){case"name":publicfield_obj.cval=vm.answer.name;break;case"cityarea":publicfield_obj.cval=vm.answer.cityarea;break;case"location":publicfield_obj.cval=vm.answer.location;break;case"addinfo":publicfield_obj.cval=vm.answer.addinfo;break;case"phone":publicfield_obj.cval=vm.answer.phone;break;case"website":publicfield_obj.cval=vm.answer.website;break;case"email":publicfield_obj.cval=vm.answer.email;break;case"worksat":publicfield_obj.cval=vm.answer.eventloc}publicfield_obj.val="",publicfield_obj.label=$rootScope.fields[i].label,"cityarea"==publicfield_obj.field?publicfield_obj.opts="c for c in vm.neighborhoods":"worksat"==publicfield_obj.field?publicfield_obj.opts="c for c in vm.establishmentNames":publicfield_obj.opts="c for c in vm.emptyarray",vm.fields.push(publicfield_obj)}for(var i=0;i<vm.fields.length;i++)vm.fields[i].val=vm.fields[i].cval}function onSelect(x){if(maybeAnswers=[],"worksat"==x.field){if(Math.abs(x.val.length-inputLengthMemWa)>2&&0!=x.val.length){inputLengthMemWa=x.val.length;for(var i=0;i<$rootScope.answers.length;i++)$rootScope.answers[i].name==x.val&&maybeAnswers.push($rootScope.answers[i]);1==maybeAnswers.length?dialog.confirmSameAnswer(maybeAnswers[0],answerChosen):maybeAnswers.length>1&&dialog.confirmSameAnswerMultiple(maybeAnswers,answerChosen)}inputLengthMemWa=x.val.length}}function answerChosen(n){void 0==n?(vm.answer.eventloc=maybeAnswers[0].name,vm.answer.eventlocid=maybeAnswers[0].id):(vm.answer.eventloc=maybeAnswers[n].name,vm.answer.eventlocid=maybeAnswers[n].id)}function loadAnswerRanks(){vm.answerRanks=[];for(var idx=0,i=0;i<$rootScope.catansrecs.length;i++)$rootScope.catansrecs[i].answer==vm.answer.id&&(idx=$rootScope.content.map(function(x){return x.id}).indexOf($rootScope.catansrecs[i].category),vm.answerRanks.push($rootScope.content[idx]))}function prepareCatansOptions(){$rootScope.DEBUG_MODE&&console.log("prepareCatansOptions"),vm.addctsopts=[];for(var opt="",i=0;i<$rootScope.ctsOptions.length;i++)$rootScope.ctsOptions[i].indexOf("@neighborhood")>-1?vm.answer.cityarea&&(opt=$rootScope.ctsOptions[i].replace("@neighborhood",vm.answer.cityarea),vm.addctsopts.push(opt)):vm.addctsopts.push($rootScope.ctsOptions[i])}function addCatans(){vm.addctsactive=!0}function addcts(){var typemismatch=!1,idx=$rootScope.content.map(function(x){return x.title}).indexOf(vm.addctsval);"Person"==vm.answer.type&&"Person"!=$rootScope.content[idx].type&&(typemismatch=!0),"Event"==vm.answer.type&&"Event"!=$rootScope.content[idx].type&&(typemismatch=!0),"Thing"==vm.answer.type&&"Thing"!=$rootScope.content[idx].type&&(typemismatch=!0),"PersonCust"==vm.answer.type&&"PersonCust"!=$rootScope.content[idx].type&&(typemismatch=!0),"Place"!=vm.answer.type&&"Establishment"!=vm.answer.type&&"Organization"!=vm.answer.type||"Place"==$rootScope.content[idx].type||"Establishment"==$rootScope.content[idx].type||"Organization"==$rootScope.content[idx].type||(typemismatch=!0),typemismatch?dialog.typemismatch($rootScope.content[idx].type,vm.answer.type):dialog.confirmAddRank($rootScope.content[idx],vm.answer,addRank)}function addRank(category,answer){catans.postRec2(answer.id,category.id).then(loadAnswerRanks),vm.addctsval="",vm.addctsactive=!1}function remRank(x){dialog.confirmRemoveRank(x,vm.answer,remRankConfirmed)}function remRankConfirmed(category,answer){for(var i=0;i<$rootScope.catansrecs.length;i++)$rootScope.catansrecs[i].answer==answer.id&&$rootScope.catansrecs[i].category==category.id&&catans.deleteRec(answer.id,category.id).then(loadAnswerRanks)}function getEdits(answer_id){vm.edits=[],upVi=[],downVi=[];for(var edit_obj={},i=0;i<$rootScope.edits.length;i++)if($rootScope.edits[i].answer==answer_id){switch(edit_obj=$rootScope.edits[i],edit_obj.vote=0,edit_obj.idx=i,edit_obj.agree="",edit_obj.disagree="",$rootScope.fields[0].name){case"name":edit_obj.name=vm.answer.name}vm.edits.push(edit_obj),upVi.push($rootScope.edits[i].upV),downVi.push($rootScope.edits[i].downV)}getEditsVote(vm.answer.id)}function editField(x){if(!$rootScope.isLoggedIn)return void dialog.loginFacebook();for(var editExists=!1,i=0;i<vm.edits.length;i++)if(vm.edits[i].field==x.field){editExists=!0;break}if(editExists)return void dialog.getDialog("editFieldExists");var newEdit={};switch(newEdit.field=x.field,newEdit.nval=x.val,newEdit.cval||(newEdit.cval=""),newEdit.answer=vm.answer.id,newEdit.upV=0,newEdit.downV=0,newEdit.imageURL="",newEdit.display="none",$rootScope.fields[0].name){case"name":newEdit.name=vm.answer.name}newEdit.user=$rootScope.user.id,newEdit.username=$rootScope.user.name,newEdit.timestmp=Date.now(),$rootScope.userIsOwner?dialog.editConfirm(newEdit,"field",userIsOwnerEditDirectly):dialog.editConfirm(newEdit,"field",createEdit)}function editImage(){if(console.log("@editImage"),!$rootScope.isLoggedIn)return void dialog.loginFacebook();for(var editExists=!1,i=0;i<vm.edits.length;i++)if("imageurl"==vm.edits[i].field){editExists=!0;break}if(editExists)return void dialog.getDialog("editFieldExists");image.getImageLinks(vm.fields,attNum,"edit").then(processImageResults,imageQueryFailed)}function selectImage(){$rootScope.DEBUG_MODE&&console.log("@selectImage");var newEdit={};switch(newEdit.field="imageurl",newEdit.cval=vm.imageURL,newEdit.nval="",$rootScope.userIsOwner&&(newEdit.imageURL=$rootScope.blobimage),newEdit.imageURL=vm.imageURL,newEdit.display="inline",newEdit.answer=vm.answer.id,newEdit.upV=0,newEdit.downV=0,$rootScope.fields[0].name){case"name":newEdit.name=vm.answer.name}newEdit.user=$rootScope.user.id,newEdit.username=$rootScope.user.name,newEdit.timestmp=Date.now(),$rootScope.userIsOwner?dialog.editConfirm(newEdit,"image",userIsOwnerEditDirectly):dialog.editConfirm(newEdit,"image",createImageEdit)}function getEditsVote(x){for(var editvote_obj={},i=0;i<$rootScope.editvotes.length;i++)$rootScope.editvotes[i].answer==x&&(editvote_obj=$rootScope.editvotes[i],editvotes.push(editvote_obj));for(i=0;i<vm.edits.length;i++)for(var j=0;j<editvotes.length;j++)vm.edits[i].id==editvotes[j].edit&&(vm.edits[i].vote=editvotes[j].vote);displayActiveVotes()}function editAgree(x,index){if($rootScope.isAdmin)return void dialog.editChangeEffective(vm.edits[index],index,"approve",editEffective);if(!$rootScope.isLoggedIn)return void dialog.loginFacebook();switch(x.vote){case 1:vm.edits[index].vote=0,vm.edits[index].upV--;break;case 0:vm.edits[index].vote=1,vm.edits[index].upV++;break;case-1:vm.edits[index].vote=1,vm.edits[index].upV++,vm.edits[index].downV--}checkEditStatus(index),displayActiveVotes()}function editDisagree(x,index){if($rootScope.isAdmin)return void dialog.editChangeEffective(vm.edits[index],index,"reject",editEffective);if(!$rootScope.isLoggedIn)return void dialog.loginFacebook();switch(x.vote){case 1:vm.edits[index].vote=-1,vm.edits[index].upV--,vm.edits[index].downV++;break;case 0:vm.edits[index].vote=-1,vm.edits[index].downV++;break;case-1:vm.edits[index].vote=0,vm.edits[index].downV--}checkEditStatus(index),displayActiveVotes()}function displayActiveVotes(){for(var i=0;i<vm.edits.length;i++)switch(vm.edits[i].vote){case 1:vm.edits[i].agree="active",vm.edits[i].disagree="";break;case 0:vm.edits[i].agree="",vm.edits[i].disagree="";break;case-1:vm.edits[i].agree="",vm.edits[i].disagree="active"}}function checkEditStatus(index){if(vm.edits[index].upV>vm.edits[index].downV){if(vm.edits[index].upV-vm.edits[index].downV>=numVotes2accept)return void dialog.editChangeEffective(vm.edits[index],index,"approve",editEffective)}else if(vm.edits[index].downV>vm.edits[index].upV&&vm.edits[index].downV-vm.edits[index].upV>=numVotes2discard)return void dialog.editChangeEffective(vm.edits[index],index,"reject",editEffective)}function updateRecords(){$rootScope.DEBUG_MODE&&console.log("updateRecords @ editAnswer");for(var voterecexists=!1,session_votes=[],item={},i=0;i<vm.edits.length;i++){voterecexists=!1;for(var j=0;j<editvotes.length;j++)if(vm.edits[i].id==editvotes[j].edit){voterecexists=!0;break}voterecexists?editvote.patchEditVoteRec(editvotes[j].id,vm.edits[i].vote):0!=vm.edits[i].vote&&(item={},item.edit=vm.edits[i].id,item.user=$rootScope.user.id,item.category=$rootScope.cCategory.id,item.answer=vm.edits[i].answer,item.vote=vm.edits[i].vote,item.timestmp=Date.now(),session_votes.push(item)),vm.edits[i].upV==upVi[i]&&vm.edits[i].downV==downVi[i]||edit.updateEdit(vm.edits[i].id,vm.edits[i].upV,vm.edits[i].downV)}session_votes.length>0&&(editvote.postEditVoteRec(session_votes),session_votes=[]),recordsUpdated=!0}function editEffective(index,type){"approve"==type&&(approveEdit(index),editIsLocation||requestOnFlight||answerDetail()),"reject"==type&&discardEdit(index)}function approveEdit(index){if($rootScope.DEBUG_MODE&&console.log("Edit has been approved"),"imageurl"==vm.edits[index].field)$rootScope.DEBUG_MODE&&console.log("EA-3"),answer.updateAnswer(vm.edits[index].answer,[vm.edits[index].field],[vm.edits[index].imageURL]).then(function(){console.log("vm.answer - ",vm.answer),loadAnswerData()});else if("location"==vm.edits[index].field){if(void 0!=vm.edits[index].nval&&""!=vm.edits[index].nval&&null!=vm.edits[index].nval){editIsLocation=!0,vm.answer.location=vm.edits[index].nval;var promise=getgps.getLocationGPS(vm.answer);promise.then(function(){})}}else if("cityarea"==vm.edits[index].field){for(var cidx=0,cObj={},sTitle="",rec2change=0,change2cat=0,rFound=!1,i=0;i<$rootScope.catansrecs.length;i++)if($rootScope.catansrecs[i].answer==vm.answer.id&&(rFound=!1,cidx=$rootScope.content.map(function(x){return x.id}).indexOf($rootScope.catansrecs[i].category),cObj=$rootScope.content[cidx],console.log("change nh- ",cidx,cObj),cObj.title.indexOf(vm.answer.cityarea)>-1)){sTitle=cObj.title.replace(vm.answer.cityarea,vm.edits[index].nval);for(var k=0;k<$rootScope.content.length;k++)if($rootScope.content[k].title==sTitle){rec2change=$rootScope.catansrecs[i].id,change2cat=$rootScope.content[k].id,rFound=!0;break}if(rFound)console.log("Changed catans"),catans.updateRec(rec2change,["category"],[change2cat]);else{console.log("dang, have to create table");var gidx=$rootScope.categories.map(function(x){return x.id}).indexOf(cObj.cat),nidx=$rootScope.locations.map(function(x){return x.nh_name}).indexOf(vm.edits[index].nval),rObj={};rObj.cat=$rootScope.categories[gidx].id,rObj.nh=$rootScope.locations[nidx].id,rObj.isatomic=!0,rObj.scope=$rootScope.SCOPE,requestOnFlight=!0,table.addTable(rObj).then(function(result){console.log("Had to create table, the id is: ",result),catans.updateRec(rec2change,["category"],[result]),answerDetail()})}}$rootScope.DEBUG_MODE&&console.log("EA-4"),answer.updateAnswer(vm.edits[index].answer,[vm.edits[index].field],[vm.edits[index].nval])}else $rootScope.DEBUG_MODE&&console.log("EA-2"),answer.updateAnswer(vm.edits[index].answer,[vm.edits[index].field],[vm.edits[index].nval]);needEditDelete=!0,editDeleteIndex=index}function editAnswerGPS(){editAnswerGPSexec||(editAnswerGPSexec=!0,$rootScope.DEBUG_MODE&&console.log("EA-1"),answer.updateAnswer(vm.answer.id,["location","lat","lng"],[vm.answer.location,vm.answer.lat,vm.answer.lng]).then(answerDetail))}function discardEdit(index){$rootScope.DEBUG_MODE&&console.log("Edit has been discarded"),edit.deleteEdit(vm.edits[index].id),editvote.deleteEditVotes(vm.edits[index].id),$rootScope.edits.splice(vm.edits[index].idx,1),vm.edits.splice(index,1)}function showHowItWorksDialog(){dialog.howItWorks("editAnswer")}function createEdit(newEdit){updateRecords(),recordsUpdated=!1;var promise=edit.addEdit(newEdit);$rootScope.DEBUG_MODE&&console.log("creating edit"),promise.then(function(){getEdits(vm.answer.id)})}function createImageEdit(newEdit){updateRecords(),recordsUpdated=!1,edit.addEdit(newEdit).then(function(){getEdits(vm.answer.id),vm.imageURL=vm.answer.imageurl,vm.imagefunctions="none"})}function answerDetail(){needEditDelete&&(edit.deleteEdit(vm.edits[editDeleteIndex].id),editvote.deleteEditVotes(vm.edits[editDeleteIndex].id),$rootScope.edits.splice(vm.edits[editDeleteIndex].idx,1),vm.edits.splice(editDeleteIndex,1)),$state.go("answerDetail",{index:vm.answer.id})}function processImageResults(results){for(var linkExists=!1,j=0;j<results.length;j++){for(var i=0;i<imageLinks.length;i++)if(0==results[j].localeCompare(imageLinks[i])){linkExists=!0;break}linkExists||imageLinks.push(results[j])}vm.numLinks=imageLinks.length,attNum++,(vm.numLinks>10||attNum>4)&&(vm.searchDisabled="disabled"),attNum>1&&(vm.imageCommand="Load More Images"),vm.linkIdx=0,vm.imageURL=imageLinks[vm.linkIdx],vm.numLinks>0&&(vm.imagefunctions="inline")}function imageQueryFailed(){$rootScope.DEBUG_MODE&&console.log("query failed, dont give up")}function viewNext(){vm.linkIdx++,vm.linkIdx>=vm.numLinks&&(vm.linkIdx=0),vm.imageURL=imageLinks[vm.linkIdx]}function viewPrev(){vm.linkIdx--,vm.linkIdx<0&&(vm.linkIdx=vm.numLinks-1),vm.imageURL=imageLinks[vm.linkIdx]}function closeRank(){answerDetail()}function loadHoursData(){if(vm.timeDD=["7:00 AM","7:30 AM","8:00 AM","8:30 AM","9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM","3:30 PM","4:00 PM","4:30 PM","5:00 PM","5:30 PM","6:00 PM","6:30 PM","7:00 PM","7:30 PM","8:00 PM","8:30 PM","9:00 PM","9:30 PM","10:00 PM","10:30 PM","11:00 PM","11:30 PM","12:00 AM","12:30 AM","1:00 AM","1:30 AM","2:00 AM","2:30 AM","3:00 AM","3:30 AM","4:00 AM","4:30 AM","5:00 AM","5:30 AM","6:00 AM","6:30 AM"],vm.openOptions=["OPEN","CLOSED"],void 0==vm.answer.strhours||null==vm.answer.strhours||0==vm.answer.strhours.length){vm.openhours=JSON.parse('[{"day":"MON","opn":"OPEN","st":"8:00 AM","ct":"5:00 PM"},{"day":"TUE","opn":"OPEN","st":"8:00 AM","ct":"5:00 PM"},{"day":"WED","opn":"OPEN","st":"8:00 AM","ct":"5:00 PM"},{"day":"THU","opn":"OPEN","st":"8:00 AM","ct":"5:00 PM"},{"day":"FRI","opn":"OPEN","st":"8:00 AM","ct":"5:00 PM"},{"day":"SAT","opn":"OPEN","st":"8:00 AM","ct":"5:00 PM"},{"day":"SUN","opn":"OPEN","st":"8:00 AM","ct":"5:00 PM"}]')}else vm.openhours=JSON.parse(vm.answer.strhours)}function hoursChanged(){vm.updateHoursEn=""}function updateHours(){for(var openhoursx=[],obj={},i=0;i<vm.openhours.length;i++)obj={},obj.day=vm.openhours[i].day,obj.opn=vm.openhours[i].opn,obj.st=vm.openhours[i].st,obj.ct=vm.openhours[i].ct,openhoursx.push(obj);var strhours=JSON.stringify(openhoursx);$rootScope.DEBUG_MODE&&console.log("EA-4"),answer.updateAnswer(vm.answer.id,["strhours"],[strhours]),vm.updateHoursEn="disabled"}function getWiki(){for(var wikiSearchStr="",n=0;n<vm.fields.length;n++)"name"==vm.fields[n].field&&(wikiSearchStr=vm.fields[n].val);wikiSearchStr.length>0&&getwiki.getWiki(wikiSearchStr)}function loadWiki(x){console.log("Load Wiki!!",x);for(var n=0;n<vm.fields.length;n++)"addinfo"==vm.fields[n].field&&(vm.fields[n].val=x)}function userIsOwnerEditDirectly(x){if(console.log("Direct Edit Executed"),$rootScope.DEBUG_MODE&&console.log("edit - ",x),"imageurl"==x.field)$rootScope.DEBUG_MODE&&console.log("R1"),answer.updateAnswer(x.answer,["imageurl"],[x.imageURL]);else if("location"==x.field){if($rootScope.DEBUG_MODE&&console.log("R2"),void 0!=x.nval&&""!=x.nval&&null!=x.nval){vm.answer.location=x.nval;var promise=getgps.getLocationGPS(vm.answer);promise.then(function(){})}}else"worksat"==x.field?($rootScope.DEBUG_MODE&&console.log("R3"),answer.updateAnswer(x.answer,["eventloc","eventlocid"],[vm.answer.eventloc,vm.answer.eventlocid])):($rootScope.DEBUG_MODE&&console.log("R4"),answer.updateAnswer(x.answer,[x.field],[x.nval]));$rootScope.cmd1exe=!1}function onNoGoodImages(x){x?(vm.imageURL=$rootScope.EMPTY_IMAGE,console.log("vm.imageURL - ",vm.imageURL),selectImage()):vm.imageURL=imageLinks[vm.linkIdx]}var vm=this;if(vm.title="editAnswer",vm.answer={},vm.showHowItWorksDialog=showHowItWorksDialog,vm.editField=editField,vm.editAgree=editAgree,vm.editImage=editImage,vm.selectImage=selectImage,vm.viewPrev=viewPrev,vm.viewNext=viewNext,vm.closeRank=closeRank,vm.editDisagree=editDisagree,vm.answerDetail=answerDetail,vm.hoursChanged=hoursChanged,vm.updateHours=updateHours,vm.onNoGoodImages=onNoGoodImages,vm.getWiki=getWiki,vm.remRank=remRank,vm.addCatans=addCatans,vm.addcts=addcts,vm.onSelect=onSelect,vm.ranking=$rootScope.title,vm.userIsOwner=$rootScope.userIsOwner,$stateParams.index){if(/^\d+$/.test($stateParams.index)){var i=$rootScope.answers.map(function(x){return x.id}).indexOf(+$stateParams.index);vm.answer=$rootScope.answers[i]}else{var i=$rootScope.answers.map(function(x){return x.slug}).indexOf($stateParams.index);vm.answer=$rootScope.answers[i]}}vm.type=vm.answer.type,vm.fields=[];var publicfield_obj={};vm.edits=[];var upVi=[],downVi=[],editvotes=[],recordsUpdated=!1,numVotes2accept=1,numVotes2discard=1,needEditDelete=!1,editDeleteIndex=0,editIsLocation=!1,editAnswerGPSexec=!1,requestOnFlight=!1,inputLengthMemWa=0,maybeAnswers=[],imageLinks=[];vm.linkIdx=0,vm.numLinks=0,vm.imageCommand="Change Image";var attNum=3;vm.imagefunctions="none",vm.emptyarray=[],vm.updateHoursEn="disabled",vm.neighborhoods=$rootScope.nhs,$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from,fromParams){$rootScope.previousState=from.name}),$rootScope.$on("$stateChangeStart",function(ev,to,toParams,from,fromParams){"editAnswer"==from.name&&(recordsUpdated||updateRecords())});var fileUploadedListener=$rootScope.$on("fileUploaded",function(event,data){$rootScope.cmd1exe=!!$rootScope.cmd1exe&&$rootScope.cmd1exe,"editAnswer"!=$state.current.name||$rootScope.cmd1exe||($rootScope.cmd1exe=!0,$rootScope.blobimage=data,vm.imageURL=$rootScope.blobimage,selectImage())}),answerGPSreadyListener=$rootScope.$on("answerGPSready",function(){"editAnswer"!=$state.current.name||editAnswerGPSexec||editAnswerGPS()}),wikiReadyListener=$rootScope.$on("wikiReady",function(event,wikiRes){"editAnswer"==$state.current.name&&loadWiki(wikiRes)});$scope.$on("$destroy",fileUploadedListener),$scope.$on("$destroy",answerGPSreadyListener),$scope.$on("$destroy",wikiReadyListener),$window.innerWidth<512?(vm.sm=!0,vm.nsm=!1):(vm.sm=!1,vm.nsm=!0),function(){void 0!=$rootScope.cCategory&&(void 0!=$rootScope.cCategory.owner&&0!=$rootScope.cCategory.owner?$rootScope.isCustomRank=!0:$rootScope.isCustomRank=!1),$window.scrollTo(0,0),loadAnswerData(),loadAnswerRanks(),prepareCatansOptions(),vm.userIsOwner&&"Establishment"==vm.type&&loadHoursData(),vm.access=vm.userIsOwner&&vm.answer.isactive,getEdits(vm.answer.id),$rootScope.DEBUG_MODE&&console.log("Edit Answer Activated!")}()}angular.module("app").controller("editAnswer",editAnswer),editAnswer.$inject=["dialog","$stateParams","$state","$rootScope","catans","$scope","$modal","edit","editvote","answer","image","getgps","table","$window","getwiki","$http"]}(),function(){"use strict";function answerRanksManager(dialog,$stateParams,$state,$rootScope,catans,$modal,edit,editvote,answer,table2,$window){function activate(){vm.ranksqty=$rootScope.canswer.ranksqty,void 0==$rootScope.canswer&&$state.go("cwrapper");var n=0;vm.ranks=JSON.parse($rootScope.canswer.ranks),void 0==vm.ranks&&(vm.ranks=[]);for(var i=0;i<vm.ranks.length;i++)n=$rootScope.customranks.map(function(x){return x.id}).indexOf(vm.ranks[i].id),vm.ranks[i].title=$rootScope.customranks[n].title.replace(" @ "+$rootScope.canswer.name,""),vm.ranks[i].used=!0;if(vm.ranks.length<$rootScope.canswer.ranksqty)for(var j=vm.ranks.length;j<$rootScope.canswer.ranksqty;j++){var emptyObj={};emptyObj.title="Empty",emptyObj.used=!1,vm.ranks.push(emptyObj)}$rootScope.DEBUG_MODE&&console.log("vm.ranks - ",vm.ranks),$rootScope.DEBUG_MODE&&console.log("Answer rankings manager activated!")}function editRank(x){$rootScope.rankIdx=x,$rootScope.rankforAnswerMode="edit",$state.go("addRankforAnswer")}function addRank(){$rootScope.rankforAnswerMode="add",$state.go("addRankforAnswer")}function deleteRank(x){var idx=$rootScope.customranks.map(function(x){return x.id}).indexOf(vm.ranks[x].id);selRank=x,dialog.deleteRank($rootScope.customranks[idx],execDeleteRank)}function execDeleteRank(){table2.deleteTable(vm.ranks[selRank].id),vm.ranks.splice(selRank,1);for(var ranksArr=[],rankObj={},i=0;i<vm.ranks.length;i++)vm.ranks[i].used&&(rankObj={},rankObj.id=vm.ranks[i].id,rankObj.bc=vm.ranks[i].bc,rankObj.fc=vm.ranks[i].fc,ranksArr.push(rankObj));var ranksStr=JSON.stringify(ranksArr);answer.updateAnswer($rootScope.canswer.id,["ranks"],[ranksStr]),activate()}function goBack(){$state.go("answerDetail",{index:$rootScope.canswer.id})}var vm=this;vm.title="answerRanksManager",vm.editRank=editRank,vm.addRank=addRank,vm.deleteRank=deleteRank,vm.goBack=goBack;var selRank=0;activate()}angular.module("app").controller("answerRanksManager",answerRanksManager),answerRanksManager.$inject=["dialog","$stateParams","$state","$rootScope","catans","$modal","edit","editvote","answer","table2","$window"]}(),function(){"use strict";function addEvent(dialog,$state,answer,$rootScope,$modal,datetime,table,image,catans,getgps,$timeout,getwiki,$window,$scope,common,search){function determineScope(){$rootScope.cCategory.isatomic||(hasSubAreas=!0)}function detectNeighborhood(){var idx=$rootScope.locations.map(function(x){return x.id}).indexOf($rootScope.cCategory.nh);idx>-1&&(rankNh=$rootScope.locations[idx].nh_name,rankNhObj=$rootScope.locations[idx],answerNeighborhood=rankNh,($rootScope.cCategory.isatomic||1!=rankNhObj.id)&&prepareCatansOptions())}function prepareCatansOptions(){if($rootScope.DEBUG_MODE&&console.log("prepareCatansOptions - ",$rootScope.cCategory,answerNeighborhood),vm.addToRanks.length>0){var morePossibleRanks=search.sibblingRanks($rootScope.cCategory,answerNeighborhood),map=vm.addToRanks.map(function(x){return x.id});morePossibleRanks.forEach(function(item){map.indexOf(item.id)<0&&vm.addToRanks.push(item)})}else vm.addToRanks=search.sibblingRanks($rootScope.cCategory,answerNeighborhood);0==vm.addToRanks.length&&vm.addToRanks.push($rootScope.cCategory),vm.addToRanks.length>0&&(vm.addToRanks[0].sel=!0);for(var i=1;i<vm.addToRanks.length;i++)vm.addToRanks[i].sel=!1;vm.addToRanks=vm.addToRanks.sort(compare),vm.addctsopts=[];for(var opt="",i=0;i<$rootScope.ctsOptions.length;i++)$rootScope.ctsOptions[i].indexOf("@Nh")>-1?answerNeighborhood&&(opt=$rootScope.ctsOptions[i].replace("@Nh",answerNeighborhood),vm.addctsopts.push(opt)):vm.addctsopts.push($rootScope.ctsOptions[i])}function compare(a,b){return a.sel==b.sel?b.ctr-a.ctr:b.sel?1:-1}function eqRanks(){var cityarea="";if(cityarea=void 0==myEvent.cityarea?extAnswer.cityarea?extAnswer.cityarea:rankNh:myEvent.cityarea,hasSubAreas)for(var idx=$rootScope.locations.map(function(x){return x.nh_name}).indexOf(cityarea),n=0;n<$rootScope.content.length;n++)$rootScope.content[n].cat==$rootScope.cCategory.cat&&$rootScope.content[n].nh==$rootScope.locations[idx].id&&(eqFound=!0,eqRankIdx=$rootScope.content[n].id)}function addAnswerConfirmed(myEvent){if($rootScope.DEBUG_MODE&&console.log("No, different! @addAnswerConfirmed"),neighborhoodOk(myEvent))if(void 0!=myEvent.location&&""!=myEvent.location&&null!=myEvent.location&&void 0==myEvent.lat&&void 0==myEvent.lng){var promise=getgps.getLocationGPS(myEvent);promise.then(function(){})}else if(eqRanks(),eqFound)hasSubAreas?($rootScope.DEBUG_MODE&&console.log("P2 - eqFound,hasSubAreas,eqRankIdx - ",eqFound,hasSubAreas,eqRankIdx,myEvent),answer.addAnswer2(myEvent,[eqRankIdx]).then(rankSummary)):($rootScope.DEBUG_MODE&&console.log("P1 - eqFound,hasSubAreas,eqRankIdx - ",eqFound,hasSubAreas,eqRankIdx,myEvent),answer.addAnswer2(myEvent,[$rootScope.cCategory.id,eqRankIdx]).then(rankSummary));else{if(needCreateRec)$rootScope.DEBUG_MODE&&console.log("Need to create record");else{$rootScope.DEBUG_MODE&&console.log("P3 - ",myEvent);for(var ranks=[],includesGhostRanking=!1,i=0;i<vm.addToRanks.length;i++)vm.addToRanks[i].sel&&ranks.push(vm.addToRanks[i]),vm.addToRanks[i].isghost&&(includesGhostRanking=!0);includesGhostRanking?($rootScope.DEBUG_MODE&&console.log("X1 - ",ranks,myEvent),table.ghostTablesWithAnswer(ranks,myEvent).then(function(){$timeout(function(){rankSummary()},1e3)})):answer.addAnswer(myEvent,ranks).then(rankSummary)}myEvent=void 0}else dialog.getDialog("neighborhoodsDontMatch")}function addEventGPS(myEvent){if(!addAnswerGPSexec)if($rootScope.DEBUG_MODE&&console.log("@exec-addAnswerGPS"),addAnswerGPSexec=!0,eqRanks(),eqFound)hasSubAreas?($rootScope.DEBUG_MODE&&console.log("P5 - eqFound,hasSubAreas,eqRankIdx - ",eqFound,hasSubAreas,eqRankIdx,myEvent),myEvent&&answer.addAnswer2(myEvent,[eqRankIdx]).then(rankSummary)):($rootScope.DEBUG_MODE&&console.log("P4 - eqFound,hasSubAreas,eqRankIdx - ",eqFound,hasSubAreas,eqRankIdx,myEvent),myEvent&&answer.addAnswer2(myEvent,[$rootScope.cCategory.id,eqRankIdx]).then(rankSummary));else{if(needCreateRec)$rootScope.DEBUG_MODE&&console.log("Need to Create Record");else if($rootScope.DEBUG_MODE&&console.log("P6",eqFound,myEvent),myEvent){for(var ranks=[],includesGhostRanking=!1,i=0;i<vm.addToRanks.length;i++)vm.addToRanks[i].sel&&ranks.push(vm.addToRanks[i]),vm.addToRanks[i].isghost&&(includesGhostRanking=!0);includesGhostRanking?($rootScope.DEBUG_MODE&&console.log("X2 - ",ranks,myEvent),table.ghostTablesWithAnswer(ranks,myEvent).then(function(){$timeout(function(){rankSummary()},1e3)})):answer.addAnswer(myEvent,ranks).then(rankSummary)}myEvent=void 0}}function neighborhoodOk(answer){var nhOk=!0;if(rankNh){if(rankNh!=answer.cityarea){var nhArr=[];common.getInclusiveAreas(rankNhObj.id,nhArr);var idx2=$rootScope.locations.map(function(x){return x.nh_name}).indexOf(answer.cityarea),nhIsIncluded=nhArr.indexOf($rootScope.locations[idx2].id)>-1;nhOk=!!nhIsIncluded,1==rankNhObj.id&&(nhOk=!0)}}else nhOk=!0;return nhOk}function onSelectNh(x){if(Math.abs(vm.ev.cityarea.length-inputLengthMemNh)>2&&0!=vm.ev.cityarea.length){inputLengthMemNh=vm.ev.cityarea.length;for(var i=0;i<$rootScope.nhs.length;i++)$rootScope.nhs[i]==vm.ev.cityarea&&(vm.nhrdy=!0,answerNeighborhood=vm.ev.cityarea,prepareCatansOptions())}inputLengthMemNh=vm.ev.cityarea.length}function loadFormData(){myEvent.name=vm.ev.name,myEvent.location=vm.ev.location,myEvent.addinfo=vm.ev.addinfo,myEvent.cityarea=vm.ev.cityarea,myEvent.website=vm.ev.website,myEvent.eventloc=vm.ev.eventloc}function validateData(){loadImageDataOk=!0,vm.ev.name.length<3&&(loadImageDataOk=!1),addEventDataOk=loadImageDataOk&&(vm.numLinks>0||vm.ngi)}function rankSummary(){$state.go("rankSummary",{index:$rootScope.cCategory.id})}function callSearchImage(){var pFields=[];if(loadFormData(),validateData(),!loadImageDataOk)return void dialog.getDialog("missingDataImage");var obj={};obj.field="name",obj.val=vm.ev.name,obj.cval=vm.ev.name,pFields.push(obj),image.getImageLinks(pFields,attNum,"add").then(processImageResults,imageQueryFailed)}function imageQueryFailed(){console.log("query failed, dont give up")}function calladdEvent(){if(loadFormData(),validateData(),!addEventDataOk)return void dialog.getDialog("missingDataAnswer");addEvent()}function processImageResults(results){for(var linkExists=!1,j=0;j<results.length;j++){for(var i=0;i<imageLinks.length;i++)if(0==results[j].localeCompare(imageLinks[i])){linkExists=!0;break}
linkExists||imageLinks.push(results[j])}vm.numLinks=imageLinks.length,attNum++,(vm.numLinks>10||attNum>=4)&&(vm.searchDisabled="disabled"),attNum>1&&(vm.imageCommand="Get more images"),vm.linkIdx=0,vm.imageURL=imageLinks[vm.linkIdx],testImageUrl(imageLinks[vm.linkIdx],showImageNotOk),vm.numLinks>0&&(vm.imagefunctions="inline")}function viewNext(){vm.linkIdx++,vm.linkIdx>=vm.numLinks&&(vm.linkIdx=0),vm.imageURL=imageLinks[vm.linkIdx],testImageUrl(imageLinks[vm.linkIdx],showImageNotOk)}function viewPrev(){vm.linkIdx--,vm.linkIdx<0&&(vm.linkIdx=vm.numLinks-1),vm.imageURL=imageLinks[vm.linkIdx],testImageUrl(imageLinks[vm.linkIdx],showImageNotOk)}function addEventConfirmed(myEvent){var eventObj={};eventObj.bc=myEvent.bc,eventObj.fc=myEvent.fc,eventObj.freq=myEvent.freq,eventObj.edate=myEvent.edate,eventObj.sdate=myEvent.sdate,eventObj.etime=myEvent.etime,eventObj.etime2=myEvent.etime2,eventObj.stime=myEvent.stime,eventObj.stime2=myEvent.stime2,eventObj.mon=myEvent.mon,eventObj.tue=myEvent.tue,eventObj.wed=myEvent.wed,eventObj.thu=myEvent.thu,eventObj.fri=myEvent.fri,eventObj.sat=myEvent.sat,eventObj.sun=myEvent.sun;var eventstr=JSON.stringify(eventObj),ansObj={};ansObj.name=myEvent.name,ansObj.addinfo=myEvent.addinfo,ansObj.cityarea=myEvent.cityarea,ansObj.location=myEvent.location,ansObj.eventloc=myEvent.eventloc,ansObj.eventlocid=myEvent.eventlocid,ansObj.lat=myEvent.lat,ansObj.lng=myEvent.lng,ansObj.type="Event",ansObj.website=myEvent.website,ansObj.phone=myEvent.phone,ansObj.imageurl=myEvent.imageurl,ansObj.views=0,ansObj.eventstr=eventstr,ansObj.userid=$rootScope.user.id,ansObj.ig_image_urls="",ansObj.slug="",vm.bind&&(ansObj.owner=$rootScope.user.id),myAnswer=ansObj,addAnswerConfirmed(ansObj)}function updateEventConfirmed(){console.log("updateEventComfirmed");var eventObj={};eventObj.bc=myEvent.bc,eventObj.fc=myEvent.fc,eventObj.freq=myEvent.freq,eventObj.edate=myEvent.edate,eventObj.sdate=myEvent.sdate,eventObj.etime=myEvent.etime,eventObj.etime2=myEvent.etime2,eventObj.stime=myEvent.stime,eventObj.stime2=myEvent.stime2,eventObj.mon=myEvent.mon,eventObj.tue=myEvent.tue,eventObj.wed=myEvent.wed,eventObj.thu=myEvent.thu,eventObj.fri=myEvent.fri,eventObj.sat=myEvent.sat,eventObj.sun=myEvent.sun;var eventstrNew=JSON.stringify(eventObj);vm.bind||(vm.ev.owner=0);var fields=[],vals=[];$rootScope.canswer.name!=vm.ev.name&&(fields.push("name"),vals.push(vm.ev.name)),$rootScope.canswer.addinfo!=vm.ev.addinfo&&(fields.push("addinfo"),vals.push(vm.ev.addinfo)),$rootScope.canswer.cityarea!=vm.ev.cityarea&&(fields.push("cityarea"),vals.push(vm.ev.cityarea),nhChanged=!0),$rootScope.canswer.location!=vm.ev.location&&(fields.push("location"),vals.push(vm.ev.location)),$rootScope.canswer.website!=vm.ev.website&&(fields.push("website"),vals.push(vm.ev.website)),$rootScope.canswer.phone!=vm.ev.phone&&(fields.push("phone"),vals.push(vm.ev.phone)),$rootScope.canswer.imageurl!=vm.imageURL&&(fields.push("image"),vals.push(vm.imageURL)),$rootScope.canswer.eventstr!=eventstrNew&&(fields.push("eventstr"),vals.push(eventstrNew)),$rootScope.canswer.owner!=vm.ev.owner&&(fields.push("owner"),vals.push(vm.ev.owner)),$rootScope.canswer.eventloc!=vm.ev.eventloc&&(fields.push("eventloc"),vals.push(vm.ev.eventloc)),$rootScope.canswer.eventlocid!=vm.ev.eventlocid&&(fields.push("eventlocid"),vals.push(vm.ev.eventlocid)),$rootScope.canswer.lat!=vm.ev.lat&&(fields.push("lat"),vals.push(vm.ev.lat)),$rootScope.canswer.lng!=vm.ev.lng&&(fields.push("lng"),vals.push(vm.ev.lng)),$rootScope.DEBUG_MODE&&console.log("fields - ",fields),$rootScope.DEBUG_MODE&&console.log("vals - ",vals),nhChanged&&updateCatans(),answer.updateAnswer(vm.ev.id,fields,vals).then(function(){$state.go("answerDetail",{index:vm.ev.id})})}function updateCatans(){for(var cidx=0,cObj={},sTitle="",rec2change=[],change2cat=[],i=0;i<$rootScope.catansrecs.length;i++)if($rootScope.catansrecs[i].answer==vm.ev.id&&(cidx=$rootScope.content.map(function(x){return x.id}).indexOf($rootScope.catansrecs[i].category),cObj=$rootScope.content[cidx],cObj.title.indexOf($rootScope.canswer.cityarea)>-1)){sTitle=cObj.title.replace($rootScope.canswer.cityarea,vm.ev.cityarea);for(var k=0;k<$rootScope.content.length;k++)if($rootScope.content[k].title==sTitle){rec2change.push($rootScope.catansrecs[i].id),change2cat.push($rootScope.content[k].id);break}}for(var i=0;i<rec2change.length;i++)catans.updateRec(rec2change[i],["category"],[change2cat[i]])}function showHowItWorksDialog(){dialog.howItWorks("addEvent")}function testImageUrl(url,callback,timeout){timeout=timeout||5e3;var timer,timedOut=!1,img=new Image;img.onerror=img.onabort=function(){timedOut||(clearTimeout(timer),callback(url,"error"))},img.onload=function(){timedOut||(clearTimeout(timer),callback(url,"success"))},img.src=url,timer=setTimeout(function(){timedOut=!0,callback(url,"timeout")},timeout)}function showImageNotOk(url,result){"error"!=result&&"timeout"!=result||(vm.imageURL=$rootScope.EMPTY_IMAGE)}function onNoGoodImages(x){vm.imageURL=x?$rootScope.EMPTY_IMAGE:imageLinks[vm.linkIdx]}function displayCharLength(){vm.char=45-vm.ev.name.length}function frequencySel(x){1==x&&(vm.weekly=!1,vm.onetime=!0,vm.ev.freq="onetime"),2==x&&(vm.weekly=!0,vm.onetime=!1,vm.ev.freq="weekly")}function showPreview(){myEvent=vm.ev,myEvent.imageurl=vm.imageURL,myEvent.date=myEvent.sdate,"add"==$rootScope.eventmode?dialog.createEventPreview(myEvent,"add",addEventConfirmed):dialog.createEventPreview(myEvent,"edit",updateEventConfirmed)}function onSelect(){if(maybeLocations=[],Math.abs(vm.ev.eventloc.length-inputLengthMem)>2&&0!=vm.ev.eventloc.length){inputLengthMem=vm.ev.eventloc.length;for(var i=0;i<$rootScope.answers.length;i++)$rootScope.answers[i].name==vm.ev.eventloc&&maybeLocations.push($rootScope.answers[i]);1==maybeLocations.length?dialog.confirmSameAnswer(maybeLocations[0],locationSelected):maybeLocations.length>1&&dialog.confirmSameAnswerMultiple(maybeSameAnswers,locationSelected)}inputLengthMem=vm.ev.eventloc.length}function locationSelected(x){var n=0;void 0!=x&&(n=x);for(var i=0;i<$rootScope.answers.length;i++)$rootScope.answers[i].name==maybeLocations[n].name&&(vm.ev.location=$rootScope.answers[i].location,vm.ev.cityarea=$rootScope.answers[i].cityarea,vm.ev.eventloc=$rootScope.answers[i].name,vm.ev.eventlocid=$rootScope.answers[i].id,vm.ev.phone=$rootScope.answers[i].phone,vm.ev.website=$rootScope.answers[i].website,vm.ev.lat=$rootScope.answers[i].lat,vm.ev.lng=$rootScope.answers[i].lng,$scope.$apply())}function deleteSpecial(){event.deleteEvent(myEvent.id),$state.go("specials")}function goBack(){"edit"==$rootScope.eventmode&&$state.go("answerDetail",{index:$rootScope.canswer.slug}),"add"==$rootScope.eventmode&&$state.go("rankSummary",{index:$rootScope.cCategory.slug})}function createTimeDropdown(){vm.timeDD=["7:00 AM","7:30 AM","8:00 AM","8:30 AM","9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM","3:30 PM","4:00 PM","4:30 PM","5:00 PM","5:30 PM","6:00 PM","6:30 PM","7:00 PM","7:30 PM","8:00 PM","8:30 PM","9:00 PM","9:30 PM","10:00 PM","10:30 PM","11:00 PM","11:30 PM","12:00 AM","12:30 AM","1:00 AM","1:30 AM","2:00 AM","2:30 AM","3:00 AM","3:30 AM","4:00 AM","4:30 AM","5:00 AM","5:30 AM","6:00 AM","6:30 AM"]}function closeRank(){$state.go("cwrapper")}var vm=this;vm.title="addEvent",vm.searchDisabled="disabled",vm.modalEnable=!0,vm.publicfields=[],vm.ranking=void 0!=$rootScope.cCategory?$rootScope.cCategory.title:"Add Event";var loadImageDataOk=!1,addEventDataOk=!1,nhChanged=($rootScope.events,!1),myAnswer={},hasSubAreas=!1,answerNeighborhood="",rankNh="",rankNhObj={},eqRankIdx=0,imageLinks=[];vm.linkIdx=0,vm.numLinks=0,vm.imageCommand="Get images",vm.searchDisabled="";var attNum=1;vm.imagefunctions="none",vm.ev={};var myEvent={},eqRankIdx=0,eqFound=!1,addAnswerGPSexec=!1,needCreateRec=!1,inputLengthMem=0,inputLengthMemNh=0,maybeLocations=[];vm.calladdEvent=calladdEvent,vm.rankSummary=rankSummary,vm.callSearchImage=callSearchImage,vm.viewNext=viewNext,vm.viewPrev=viewPrev,vm.closeRank=closeRank,vm.onNoGoodImages=onNoGoodImages,vm.showHowItWorksDialog=showHowItWorksDialog,vm.displayCharLength=displayCharLength,vm.frequencySel=frequencySel,vm.showPreview=showPreview,vm.deleteSpecial=deleteSpecial,vm.onSelect=onSelect,vm.onSelectNh=onSelectNh,vm.goBack=goBack,vm.imageURL=$rootScope.EMPTY_IMAGE,vm.header=$rootScope.header,$window.innerWidth<512?(vm.sm=!0,vm.nsm=!1):(vm.sm=!1,vm.nsm=!0);$rootScope.$on("answerGPSready",function(){"addEvent"!=$state.current.name||addAnswerGPSexec||addEventGPS(myAnswer)});!function(){vm.locations=$rootScope.estNames.concat($rootScope.plaNames),vm.neighborhoods=$rootScope.nhs,vm.addToRanks=[],"edit"==$rootScope.eventmode&&(vm.ev=JSON.parse(JSON.stringify($rootScope.canswer)),0!=vm.ev.owner&&void 0!=vm.ev.owner?vm.bind=!0:vm.bind=!1,datetime.formatdatetime(vm.ev),vm.isEdit=!0,"onetime"==vm.ev.freq&&frequencySel(1),"weekly"==vm.ev.freq&&frequencySel(2),$rootScope.DEBUG_MODE&&console.log("vm.ev --- ",vm.ev),vm.imageURL=vm.ev.imageurl),"add"==$rootScope.eventmode&&(determineScope(),detectNeighborhood(),vm.char=45,vm.ev.fc="hsl(0, 100%, 0%)",vm.ev.bc="hsl(0, 0%, 100%)",vm.ev.eventlocid=-1,frequencySel(1)),createTimeDropdown(),$rootScope.DEBUG_MODE&&console.log("Add Event Activated!")}()}angular.module("app").controller("addEvent",addEvent),addEvent.$inject=["dialog","$state","answer","$rootScope","$modal","datetime","table","image","catans","getgps","$timeout","getwiki","$window","$scope","common","search"]}(),function(){"use strict";function addAnswer(dialog,$state,answer,$rootScope,$modal,$q,common,table,image,catans,getgps,$timeout,getwiki,$window,$scope,search){function determineScope(){$rootScope.cCategory.isatomic||(hasSubAreas=!0)}function loadPublicFields(){vm.emptyarray=[],vm.neighborhoods=$rootScope.nhs,vm.establishmentNames=$rootScope.estNames.concat($rootScope.plaNames,$rootScope.orgNames,$rootScope.freNames),vm.peopleNames=$rootScope.pplNames,vm.fields=$rootScope.fields,vm.type=$rootScope.cCategory.type,myAnswer.type=vm.type,vm.fields.opts=[],vm.fields.val=[],vm.fields.textstyle=[];for(var i=0;i<vm.fields.length;i++)vm.fields[i].val="","cityarea"==vm.fields[i].name?vm.fields[i].opts="c for c in vm.neighborhoods":vm.fields[i].opts="c for c in vm.emptyarray","name"==vm.fields[i].name&&"Establishment"==$rootScope.cCategory.type&&(vm.fields[i].opts="c for c in vm.establishmentNames"),"name"==vm.fields[i].name&&"Person"==$rootScope.cCategory.type&&(vm.fields[i].opts="c for c in vm.peopleNames"),"name"==vm.fields[i].name&&"Place"==$rootScope.cCategory.type&&(vm.fields[i].opts="c for c in vm.establishmentNames"),"name"==vm.fields[i].name&&"Organization"==$rootScope.cCategory.type&&(vm.fields[i].opts="c for c in vm.establishmentNames"),"name"==vm.fields[i].name&&"PersonCust"==$rootScope.cCategory.type&&(vm.fields[i].opts="c for c in vm.establishmentNames"),"worksat"==vm.fields[i].name&&(vm.fields[i].opts="c for c in vm.establishmentNames"),"cityarea"==vm.fields[i].name&&"Establishment"==$rootScope.cCategory.type&&1==$rootScope.NhImplied&&"Downtown"!=$rootScope.NhValue&&(vm.fields[i].val=$rootScope.NhValue),"addinfo"==vm.fields[i].name?vm.fields[i].textstyle="textarea":vm.fields[i].textstyle="text"}function addAnswer(){addAnswerExec||(myAnswer.imageurl=vm.imageURL,"Short-Phrase"==$rootScope.cCategory.type&&(myAnswer.imageurl="none"),myAnswer.upV=0,myAnswer.downV=0,myAnswer.type=vm.type,myAnswer.userid=$rootScope.user.id,myAnswer.views=0,myAnswer.ig_image_urls="",myAnswer.slug="",vm.userIsOwner&&(myAnswer.owner=$rootScope.user.id),duplicateExists?dialog.checkSameAnswer(myAnswer,extAnswer,addAnswerConfirmed,answerIsSame):dialog.addAnswer(myAnswer,vm.addToRanks,vm.imageURL,addAnswerConfirmed),addAnswerExec=!0,$timeout(function(){addAnswerExec=!1},1e3))}function loadFormData(){for(var i=0;i<vm.fields.length;i++)switch(vm.fields[i].name){case"name":myAnswer.name=vm.fields[i].val;break;case"location":myAnswer.location=vm.fields[i].val;break;case"addinfo":myAnswer.addinfo=vm.fields[i].val;break;case"cityarea":myAnswer.cityarea=vm.fields[i].val;break;case"phone":myAnswer.phone=vm.fields[i].val;break;case"website":myAnswer.website=vm.fields[i].val;break;case"email":myAnswer.email=vm.fields[i].val;break;case"worksat":var idx=$rootScope.answers.map(function(x){return x.name}).indexOf(vm.fields[i].val);idx>-1?(myAnswer.eventlocid=$rootScope.answers[idx].id,myAnswer.eventloc=$rootScope.answers[idx].name):(myAnswer.eventlocid=-1,myAnswer.eventloc=vm.fields[i].val)}}function validateData(){loadImageDataOk=!0;for(var i=0;i<vm.fields.length;i++)if(vm.fields[i].isrequired&&vm.fields[i].val.length<3){loadImageDataOk=!1;break}if("PersonCust"==$rootScope.cCategory.type)for(var i=0;i<vm.fields.length;i++)if("email"==vm.fields[i].name&&vm.fields[i].val.length>3||"website"==vm.fields[i].name&&vm.fields[i].val.length>3){loadImageDataOk=!0;break}addAnswerDataOk="Short-Phrase"==$rootScope.cCategory.type||"PersonCust"==$rootScope.cCategory.type||"Simple"==$rootScope.cCategory.type?loadImageDataOk:loadImageDataOk&&(vm.numLinks>0||vm.ngi)}function rankSummary(){$state.go("rankSummary",{index:$rootScope.cCategory.id})}function callSearchImage(){var pFields=[];if(loadFormData(),validateData(),!loadImageDataOk)return void dialog.getDialog("missingDataImage");pFields=JSON.parse(JSON.stringify(vm.fields)),image.getImageLinks(pFields,attNum,"add").then(processImageResults,imageQueryFailed)}function imageQueryFailed(){console.log("query failed, dont give up")}function callAddAnswer(){if(loadFormData(),validateData(),"Establishment"!=vm.type&&"Person"!=vm.type&&"Place"!=vm.type||checkAnswerExists(myAnswer),!addAnswerDataOk)return void dialog.getDialog("missingDataAnswer");addAnswer()}function processImageResults(results){for(var linkExists=!1,j=0;j<results.length;j++){for(var i=0;i<imageLinks.length;i++)if(0==results[j].localeCompare(imageLinks[i])){linkExists=!0;break}linkExists||imageLinks.push(results[j])}vm.numLinks=imageLinks.length,attNum++,(vm.numLinks>10||attNum>=4)&&(vm.searchDisabled="disabled"),attNum>1&&(vm.imageCommand="Get more images"),vm.linkIdx=0,vm.imageURL=imageLinks[vm.linkIdx],testImageUrl(imageLinks[vm.linkIdx],showImageNotOk),vm.numLinks>0&&(vm.imagefunctions="inline")}function viewNext(){vm.linkIdx++,vm.linkIdx>=vm.numLinks&&(vm.linkIdx=0),vm.imageURL=imageLinks[vm.linkIdx],testImageUrl(imageLinks[vm.linkIdx],showImageNotOk)}function viewPrev(){vm.linkIdx--,vm.linkIdx<0&&(vm.linkIdx=vm.numLinks-1),vm.imageURL=imageLinks[vm.linkIdx],testImageUrl(imageLinks[vm.linkIdx],showImageNotOk)}function neighborhoodOk(answer){var nhOk=!0,idx=vm.fields.map(function(x){return x.name}).indexOf("cityarea");if(rankNh&&idx>-1){if(rankNh!=answer.cityarea){var nhArr=[];common.getInclusiveAreas(rankNhObj.id,nhArr);var idx2=$rootScope.locations.map(function(x){return x.nh_name}).indexOf(answer.cityarea),nhIsIncluded=nhArr.indexOf($rootScope.locations[idx2].id)>-1;nhOk=!!nhIsIncluded,1==rankNhObj.id&&(nhOk=!0)}}else nhOk=!0;return nhOk}function addAnswerConfirmed(myAnswer){if($rootScope.DEBUG_MODE&&console.log("No, different! @addAnswerConfirmed"),neighborhoodOk(myAnswer))if(void 0!=myAnswer.location&&""!=myAnswer.location&&null!=myAnswer.location){var promise=getgps.getLocationGPS(myAnswer);promise.then(function(){})}else if(eqRanks(),eqFound)hasSubAreas?($rootScope.DEBUG_MODE&&console.log("P2 - eqFound,hasSubAreas,eqRankIdx - ",eqFound,hasSubAreas,eqRankIdx,myAnswer),answer.addAnswer2(myAnswer,[eqRankIdx]).then(rankSummary)):($rootScope.DEBUG_MODE&&console.log("P1 - eqFound,hasSubAreas,eqRankIdx - ",eqFound,hasSubAreas,eqRankIdx,myAnswer),answer.addAnswer2(myAnswer,[$rootScope.cCategory.id,eqRankIdx]).then(rankSummary));else{if(needCreateRec)console.log("Need to create record");else{$rootScope.DEBUG_MODE&&console.log("P3 - ",myAnswer);for(var ranks=[],includesGhostRanking=!1,i=0;i<vm.addToRanks.length;i++)vm.addToRanks[i].sel&&ranks.push(vm.addToRanks[i]),vm.addToRanks[i].isghost&&(includesGhostRanking=!0);includesGhostRanking?(console.log("X1 - ",ranks,myAnswer),table.ghostTablesWithAnswer(ranks,myAnswer).then(function(){$timeout(function(){rankSummary()},1e3)})):answer.addAnswer(myAnswer,ranks).then(rankSummary)}myAnswer=void 0}else dialog.getDialog("neighborhoodsDontMatch")}function addAnswerGPS(){if(!addAnswerGPSexec)if($rootScope.DEBUG_MODE&&console.log("@exec-addAnswerGPS"),addAnswerGPSexec=!0,eqRanks(),eqFound)hasSubAreas?($rootScope.DEBUG_MODE&&console.log("P5 - eqFound,hasSubAreas,eqRankIdx - ",eqFound,hasSubAreas,eqRankIdx,myAnswer),myAnswer&&answer.addAnswer2(myAnswer,[eqRankIdx]).then(rankSummary)):($rootScope.DEBUG_MODE&&console.log("P4 - eqFound,hasSubAreas,eqRankIdx - ",eqFound,hasSubAreas,eqRankIdx,myAnswer),myAnswer&&answer.addAnswer2(myAnswer,[$rootScope.cCategory.id,eqRankIdx]).then(rankSummary));else{if(needCreateRec)console.log("Need to Create Record");else if($rootScope.DEBUG_MODE&&console.log("P6",myAnswer),myAnswer){for(var ranks=[],includesGhostRanking=!1,i=0;i<vm.addToRanks.length;i++)vm.addToRanks[i].sel&&ranks.push(vm.addToRanks[i]),vm.addToRanks[i].isghost&&(includesGhostRanking=!0);includesGhostRanking?(console.log("X2 - ",ranks,myAnswer),table.ghostTablesWithAnswer(ranks,myAnswer).then(function(){$timeout(function(){rankSummary()},1e3)})):answer.addAnswer(myAnswer,ranks).then(rankSummary)}myAnswer=void 0}}function answerIsSame(){$rootScope.DEBUG_MODE&&console.log("Yeah Same, @answerIsSame");var nhIsValid=neighborhoodOk(extAnswer);if(duplicateSameCategory)dialog.getDialog("answerDuplicated");else if(nhIsValid){if(eqRanks(),$rootScope.DEBUG_MODE&&console.log("eqFound, hasSubAreas, eqRankIdx = ",eqFound,hasSubAreas,eqRankIdx),eqFound)hasSubAreas?($rootScope.DEBUG_MODE&&console.log("P8 - eqFound,hasSubAreas,eqRankIdx - ",eqFound,hasSubAreas,eqRankIdx),catans.postRec2(extAnswer.id,eqRankIdx).then(rankSummary)):($rootScope.DEBUG_MODE&&console.log("P7 - eqFound,hasSubAreas,eqRankIdx - ",eqFound,hasSubAreas,eqRankIdx),catans.postRec2(extAnswer.id,eqRankIdx),catans.postRec2(extAnswer.id,$rootScope.cCategory.id).then(rankSummary));else if(needCreateRec)console.log("Need to create record");else if($rootScope.DEBUG_MODE&&console.log("P9"),$rootScope.cCategory.isatomic)catans.postRec(extAnswer.id).then(rankSummary);else{var rFound=!1,nidx=$rootScope.locations.map(function(x){return x.nh_name}).indexOf(extAnswer.cityarea);if($rootScope.content.forEach(function(r){r.nh==$rootScope.locations[nidx].id&&r.cat==$rootScope.cCategory.cat&&(rFound=!0,rankid=r.id)}),rFound)catans.postRec2(extAnswer.id,rankid).then(rankSummary);else{var rObj={};rObj.cat=$rootScope.cCategory.cat,rObj.nh=$rootScope.locations[nidx].id,rObj.isatomic=!0,table.addTable(rObj).then(function(tableid){var newcatstr=$rootScope.cCategory.catstr+":"+tableid,p1=catans.postRec2(extAnswer.id,tableid),p2=table.update($rootScope.cCategory.id,["catstr"],[newcatstr]);$q.all([p1,p2]).then(rankSummary)})}}myAnswer=void 0}else dialog.getDialog("neighborhoodsDontMatch")}function eqRanks(){var cityarea="";if(cityarea=void 0==myAnswer.cityarea?extAnswer.cityarea?extAnswer.cityarea:rankNh:myAnswer.cityarea,hasSubAreas)for(var idx=$rootScope.locations.map(function(x){return x.nh_name}).indexOf(cityarea),n=0;n<$rootScope.content.length;n++)$rootScope.content[n].cat==$rootScope.cCategory.cat&&$rootScope.content[n].nh==$rootScope.locations[idx].id&&(eqFound=!0,eqRankIdx=$rootScope.content[n].id)}function showHowItWorksDialog(){"Short-Phrase"==$rootScope.cCategory.type?dialog.howItWorks("shortPhrase"):dialog.howItWorks("addAnswer")}function selRank(x,idx){x.sel?0!=idx&&(x.sel=!1):x.sel=!0,vm.addToRanks=vm.addToRanks.sort(compare)}function prepareCatansOptions(){if($rootScope.DEBUG_MODE&&console.log("prepareCatansOptions - ",$rootScope.cCategory,answerNeighborhood),isCustomRank)vm.addToRanks.push($rootScope.cCategory);else{if(vm.addToRanks.length>0){var morePossibleRanks=search.sibblingRanks($rootScope.cCategory,answerNeighborhood),map=vm.addToRanks.map(function(x){return x.id});morePossibleRanks.forEach(function(item){map.indexOf(item.id)<0&&vm.addToRanks.push(item)})}else vm.addToRanks=search.sibblingRanks($rootScope.cCategory,answerNeighborhood);0==vm.addToRanks.length&&vm.addToRanks.push($rootScope.cCategory),vm.addToRanks.length>0&&(vm.addToRanks[0].sel=!0);for(var i=1;i<vm.addToRanks.length;i++)vm.addToRanks[i].sel=!1;vm.addToRanks=vm.addToRanks.sort(compare),vm.addctsopts=[];for(var opt="",i=0;i<$rootScope.ctsOptions.length;i++)$rootScope.ctsOptions[i].indexOf("@Nh")>-1?answerNeighborhood&&(opt=$rootScope.ctsOptions[i].replace("@Nh",answerNeighborhood),vm.addctsopts.push(opt)):vm.addctsopts.push($rootScope.ctsOptions[i])}}function compare(a,b){return a.sel==b.sel?b.ctr-a.ctr:b.sel?1:-1}function addCatans(){vm.addctsactive=!0}function addcts(){var typemismatch=!1,rankObj={},idx=$rootScope.content.map(function(x){return x.title}).indexOf(vm.addctsval);if(idx>-1)"Person"==$rootScope.cCategory.type&&"Person"!=$rootScope.content[idx].type&&(typemismatch=!0),"Event"==$rootScope.cCategory.type&&"Event"!=$rootScope.content[idx].type&&(typemismatch=!0),"Thing"==$rootScope.cCategory.type&&"Thing"!=$rootScope.content[idx].type&&(typemismatch=!0),"PersonCust"==$rootScope.cCategory.type&&"PersonCust"!=$rootScope.content[idx].type&&(typemismatch=!0),"Place"!=$rootScope.cCategory.type&&"Establishment"!=$rootScope.cCategory.type&&"Organization"!=$rootScope.cCategory.type||"Place"==$rootScope.content[idx].type||"Establishment"==$rootScope.content[idx].type||"Organization"==$rootScope.content[idx].type||(typemismatch=!0),typemismatch?dialog.typemismatch($rootScope.content[idx].type,$rootScope.cCategory.type):(rankObj=$rootScope.content[idx],rankObj.sel=!0,vm.addToRanks.push(rankObj),vm.addToRanks=vm.addToRanks.sort(compare),vm.addctsval="",vm.addctsactive=!1);else{var idx2=$rootScope.categories.map(function(x){return x.category}).indexOf(vm.addctsval.slice(0,9));if($rootScope.categories[idx2].category.indexOf("@Nh")>-1){var nidx=$rootScope.locations.map(function(x){return x.nh_name}).indexOf(answerNeighborhood),gObj={};gObj.cat=$rootScope.categories[idx2].id,gObj.nh=$rootScope.locations[nidx].id,gObj.isghost=!0,gObj.isatomic=!0,gObj.title=vm.addctsval,console.log("added ghost to vm.addToRanks from addcts"),vm.addToRanks.push(gObj)}}}function testImageUrl(url,callback,timeout){timeout=timeout||5e3;var timer,timedOut=!1,img=new Image;img.onerror=img.onabort=function(){timedOut||(clearTimeout(timer),callback(url,"error"))},img.onload=function(){timedOut||(clearTimeout(timer),callback(url,"success"))},img.src=url,timer=setTimeout(function(){timedOut=!0,callback(url,"timeout")},timeout)}function showImageNotOk(url,result){"error"!=result&&"timeout"!=result||(vm.imageURL=$rootScope.EMPTY_IMAGE)}function checkAnswerExists(answer){if("Establishment"==vm.type||"Place"==vm.type||"Organization"==vm.type){for(var i=0;i<$rootScope.estAnswers.length;i++)if(answer.name==$rootScope.estAnswers[i].name&&answer.cityarea==$rootScope.estAnswers[i].cityarea){duplicateExists=!0,extAnswer=$rootScope.estAnswers[i];for(var j=0;j<$rootScope.catansrecs.length;j++)$rootScope.catansrecs[j].answer==$rootScope.estAnswers[i].id&&$rootScope.catansrecs[j].category==$rootScope.cCategory.id&&(duplicateSameCategory=!0)}}else if("Person"==vm.type){for(var i=0;i<$rootScope.pplAnswers.length;i++)if(answer.name==$rootScope.pplAnswers[i].name){duplicateExists=!0,extAnswer=$rootScope.pplAnswers[i];for(var j=0;j<$rootScope.catansrecs.length;j++)$rootScope.catansrecs[j].answer==$rootScope.pplAnswers[i].id&&$rootScope.catansrecs[j].category==$rootScope.cCategory.id&&(duplicateSameCategory=!0)}}else if("Establishment"==vm.type||"Place"==vm.type||"Organization"==vm.type){for(var i=0;i<$rootScope.plaAnswers.length;i++)if(answer.name==$rootScope.plaAnswers[i].name){duplicateExists=!0,extAnswer=$rootScope.plaAnswers[i];for(var j=0;j<$rootScope.catansrecs.length;j++)$rootScope.catansrecs[j].answer==$rootScope.plaAnswers[i].id&&$rootScope.catansrecs[j].category==$rootScope.cCategory.id&&(duplicateSameCategory=!0)}}else if("Establishment"==vm.type||"Place"==vm.type||"Organization"==vm.type)for(var i=0;i<$rootScope.orgAnswers.length;i++)if(answer.name==$rootScope.orgAnswers[i].name){duplicateExists=!0,extAnswer=$rootScope.orgAnswers[i];for(var j=0;j<$rootScope.catansrecs.length;j++)$rootScope.catansrecs[j].answer==$rootScope.orgAnswers[i].id&&$rootScope.catansrecs[j].category==$rootScope.cCategory.id&&(duplicateSameCategory=!0)}}function getWiki(){for(var wikiSearchStr="",n=0;n<vm.fields.length;n++)if("name"==vm.fields[n].name){wikiSearchStr=vm.fields[n].val;break}wikiSearchStr.length>0&&getwiki.getWiki(wikiSearchStr)}function loadWiki(x){for(var n=0;n<vm.fields.length;n++)if("addinfo"==vm.fields[n].name){vm.fields[n].val=x;break}}function onNoGoodImages(x){vm.imageURL=x?$rootScope.EMPTY_IMAGE:imageLinks[vm.linkIdx]}function closeRank(){$state.go("cwrapper")}function onSelect(x){if(maybeSameAnswers=[],"name"==x.name){if(Math.abs(x.val.length-inputLengthMem)>=2&&0!=x.val.length){inputLengthMem=x.val.length;for(var i=0;i<$rootScope.answers.length;i++)$rootScope.answers[i].name==x.val&&(1!=rankNhObj.id?$rootScope.answers[i].cityarea==rankNh&&maybeSameAnswers.push($rootScope.answers[i]):maybeSameAnswers.push($rootScope.answers[i]));1==maybeSameAnswers.length?(checkAnswerExists(maybeSameAnswers[0]),dialog.confirmSameAnswer(maybeSameAnswers[0],answerChosen)):maybeSameAnswers.length>1&&dialog.confirmSameAnswerMultiple(maybeSameAnswers,answerChosen)}inputLengthMem=x.val.length}if("cityarea"==x.name){if(Math.abs(x.val.length-inputLengthMemNh)>2&&0!=x.val.length){inputLengthMemNh=x.val.length;for(var i=0;i<$rootScope.nhs.length;i++)$rootScope.nhs[i]==x.val&&(vm.nhrdy=!0,answerNeighborhood=x.val,prepareCatansOptions())}inputLengthMemNh=x.val.length}}function answerChosen(n){extAnswer=void 0==n?maybeSameAnswers[0]:maybeSameAnswers[n],answerIsSame()}function detectNeighborhood(){var idx=$rootScope.locations.map(function(x){return x.id}).indexOf($rootScope.cCategory.nh);idx>-1&&(rankNh=$rootScope.locations[idx].nh_name,rankNhObj=$rootScope.locations[idx],answerNeighborhood=rankNh,($rootScope.cCategory.isatomic||1!=rankNhObj.id)&&prepareCatansOptions())}function showUploadedImage(){vm.imageURL=$rootScope.blobimage}var vm=this;vm.title="addAnswer",vm.header="table"+$rootScope.cCategory.id+".header",vm.body="table"+$rootScope.cCategory.id+".body",vm.searchDisabled="disabled",vm.modalEnable=!0,vm.userIsOwner=!1,vm.addRanksEnable=!0,vm.publicfields=[],vm.ranking=$rootScope.cCategory.title;var loadImageDataOk=!1,addAnswerDataOk=!1,addAnswerExec=!1,addAnswerGPSexec=!1,inputLengthMem=($rootScope.answers,0),inputLengthMemNh=0,maybeSameAnswers=[],imageLinks=[];vm.linkIdx=0,vm.numLinks=0,vm.imageCommand="Get images",vm.searchDisabled="";var attNum=1;vm.imagefunctions="none";var duplicateExists=!1,duplicateSameCategory=!1,hasSubAreas=!1,needCreateRec=!1,eqRankIdx=0,eqFound=!1,rankNh=void 0,answerNeighborhood=void 0,rankObj={},rankNhObj={},isCustomRank=!1,myAnswer={},extAnswer={};vm.callAddAnswer=callAddAnswer,vm.rankSummary=rankSummary,vm.callSearchImage=callSearchImage,vm.viewNext=viewNext,vm.viewPrev=viewPrev,vm.closeRank=closeRank,vm.getWiki=getWiki,vm.onNoGoodImages=onNoGoodImages,vm.showHowItWorksDialog=showHowItWorksDialog,vm.onSelect=onSelect,vm.addCatans=addCatans,vm.addcts=addcts,vm.selRank=selRank,vm.imageURL=$rootScope.EMPTY_IMAGE,vm.header=$rootScope.header;var GPSReadyListener=$rootScope.$on("answerGPSready",function(){"addAnswer"!=$state.current.name||addAnswerGPSexec||addAnswerGPS()}),WikiReadyListener=$rootScope.$on("wikiReady",function(event,wikiRes){"addAnswer"==$state.current.name&&loadWiki(wikiRes)}),fileUploadedListener=$rootScope.$on("fileUploaded",function(event,data){"addAnswer"==$state.current.name&&($rootScope.blobimage=data,showUploadedImage())});$scope.$on("$destroy",GPSReadyListener),$scope.$on("$destroy",WikiReadyListener),$scope.$on("$destroy",fileUploadedListener),function(){if($rootScope.isLoggedIn){var answerParent=$rootScope.cCategory.owner;if(void 0!=answerParent&&0!=answerParent){var idx=$rootScope.answers.map(function(x){return x.id}).indexOf(Number(answerParent)),owner=$rootScope.answers[idx].owner;$rootScope.user.id==owner&&(vm.userIsOwner=!0)}}}(),$window.innerWidth<512?(vm.sm=!0,vm.nsm=!1):(vm.sm=!1,vm.nsm=!0),function(){void 0!=$rootScope.cCategory.owner&&0!=$rootScope.cCategory.owner?$rootScope.isCustomRank=!0:$rootScope.isCustomRank=!1,$window.scrollTo(0,0),vm.addToRanks=[],detectNeighborhood(),loadPublicFields(),determineScope(),void 0!=$rootScope.cCategory.owner&&0!=$rootScope.cCategory.owner&&(isCustomRank=!0,vm.addRanksEnable=!1),($rootScope.cCategory.isatomic||1!=rankNhObj.id)&&(vm.nhrdy=!0,prepareCatansOptions(),rankObj=$rootScope.cCategory,rankObj.sel=!0),$rootScope.DEBUG_MODE&&console.log("Add Answer Activated!")}()}angular.module("app").controller("addAnswer",addAnswer),addAnswer.$inject=["dialog","$state","answer","$rootScope","$modal","$q","common","table","image","catans","getgps","$timeout","getwiki","$window","$scope","search"]}();